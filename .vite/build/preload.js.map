{"version":3,"file":"preload.js","sources":["../../src/config/channellist.ts","../../src/preload.js"],"sourcesContent":["export const EXTRAMODULECHANNE_LIST='extramodule:list'\nexport const EXTRAMODULECHANNE_INSTALL='extramodule:install'\nexport const EXTRAMODULECHANNE_UNINSTALL='extramodule:uninstall'\nexport const EXTRAMODULECHANNE_MESSAGE='extramodule:message'\nexport const OPENDIRECTORY='open:directory'","import { contextBridge, ipcRenderer } from 'electron'\nimport {EXTRAMODULECHANNE_LIST,EXTRAMODULECHANNE_INSTALL,EXTRAMODULECHANNE_UNINSTALL,EXTRAMODULECHANNE_MESSAGE,OPENDIRECTORY} from \"./config/channellist\";\n// window.ipcRenderer = ipcRenderer\n// console.log('preload.js')\n// contextBridge.exposeInMainWorld('electronAPI', {\n//     userLogin: (data) => ipcRenderer.invoke('user:login', data)\n// })\ncontextBridge.exposeInMainWorld('api', {\n    send: (channel, data) => {\n      // whitelist channels\n      let validChannels = ['user:Login','socialtask:start','socialtask:log','socialaccount:login','socialaccount:login:msg',EXTRAMODULECHANNE_INSTALL,EXTRAMODULECHANNE_MESSAGE,EXTRAMODULECHANNE_UNINSTALL]\n      console.log('send',channel,data)\n      if (validChannels.includes(channel)) {\n        console.log('send2',channel,data)\n        ipcRenderer.send(channel, data)\n      }\n    },\n    receive: (channel, func) => {\n      let validChannels = ['user:Login','socialtask:start','socialtask:log','socialaccount:login:msg',EXTRAMODULECHANNE_INSTALL,EXTRAMODULECHANNE_MESSAGE,EXTRAMODULECHANNE_UNINSTALL]\n      const regex=\"/^socialtask:log:/\"\n\n      if (validChannels.includes(channel)||channel.test(regex)) {\n        // Deliberately strip event as it includes `sender`\n        ipcRenderer.on(channel, (event, ...args) => func(...args))\n      }\n    },\n    invoke: (channel, data) => {\n      // whitelist channels\n      let validChannels = ['user:Login','user:checklogin','user:Signout','campaign:list','socialtask:list','socialtask:info','socialtasktype:list','tag:list','socialtask:save','socialtask:start','socialtaskrun:list','socialtaskresult:list','socialaccount:list','socialaccount:save','socialplatform:list','socialaccount:detail','socialaccount:delete','proxy:list','proxy:delete','proxy:save','proxy:detail','proxy:check','proxy:import',EXTRAMODULECHANNE_LIST,OPENDIRECTORY]\n      if (validChannels.includes(channel)) {\n        return ipcRenderer.invoke(channel, data)\n      }\n    }\n  })"],"names":["EXTRAMODULECHANNE_LIST","EXTRAMODULECHANNE_INSTALL","EXTRAMODULECHANNE_UNINSTALL","EXTRAMODULECHANNE_MESSAGE","OPENDIRECTORY","contextBridge","channel","data","validChannels","ipcRenderer","func","regex","event","args"],"mappings":"yCAAaA,EAAuB,mBACvBC,EAA0B,sBAC1BC,EAA4B,wBAC5BC,EAA0B,sBAC1BC,EAAc,iBCG3BC,EAAAA,cAAc,kBAAkB,MAAO,CACnC,KAAM,CAACC,EAASC,IAAS,CAEvB,IAAIC,EAAgB,CAAC,aAAa,mBAAmB,iBAAiB,sBAAsB,0BAA0BP,EAA0BE,EAA0BD,CAA2B,EACrM,QAAQ,IAAI,OAAOI,EAAQC,CAAI,EAC3BC,EAAc,SAASF,CAAO,IAChC,QAAQ,IAAI,QAAQA,EAAQC,CAAI,EAChCE,cAAY,KAAKH,EAASC,CAAI,EAEjC,EACD,QAAS,CAACD,EAASI,IAAS,CAC1B,IAAIF,EAAgB,CAAC,aAAa,mBAAmB,iBAAiB,0BAA0BP,EAA0BE,EAA0BD,CAA2B,EAC/K,MAAMS,EAAM,sBAERH,EAAc,SAASF,CAAO,GAAGA,EAAQ,KAAKK,CAAK,IAErDF,cAAY,GAAGH,EAAS,CAACM,KAAUC,IAASH,EAAK,GAAGG,CAAI,CAAC,CAE5D,EACD,OAAQ,CAACP,EAASC,IAAS,CAGzB,GADoB,CAAC,aAAa,kBAAkB,eAAe,gBAAgB,kBAAkB,kBAAkB,sBAAsB,WAAW,kBAAkB,mBAAmB,qBAAqB,wBAAwB,qBAAqB,qBAAqB,sBAAsB,uBAAuB,uBAAuB,aAAa,eAAe,aAAa,eAAe,cAAc,eAAeP,EAAuBI,CAAa,EAC/b,SAASE,CAAO,EAChC,OAAOG,cAAY,OAAOH,EAASC,CAAI,CAE1C,CACF,CAAA"}