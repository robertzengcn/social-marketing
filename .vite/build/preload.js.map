{"version":3,"file":"preload.js","sources":["../../src/config/channellist.ts","../../src/preload.js"],"sourcesContent":["export const EXTRAMODULECHANNE_LIST='extramodule:list'\nexport const EXTRAMODULECHANNE_INSTALL='extramodule:install'\nexport const EXTRAMODULECHANNE_UNINSTALL='extramodule:uninstall'\nexport const EXTRAMODULECHANNE_MESSAGE='extramodule:message'\nexport const OPENDIRECTORY='open:directory'\nexport const VIDEODOWNLOAD='video:download'\nexport const VIDEODOWNLOAD_MESSAGE='video:download:message'\nexport const SYSTEM_MESSAGE='system:message'\nexport const VIDEODOWNLOAD_LIST='video:download:list'\nexport const SOCIALPLATFORM_LIST='socialplatform:list'","import { contextBridge, ipcRenderer } from 'electron'\nimport {EXTRAMODULECHANNE_LIST,EXTRAMODULECHANNE_INSTALL,EXTRAMODULECHANNE_UNINSTALL,EXTRAMODULECHANNE_MESSAGE,OPENDIRECTORY,SYSTEM_MESSAGE,VIDEODOWNLOAD_MESSAGE,VIDEODOWNLOAD,VIDEODOWNLOAD_LIST} from \"./config/channellist\";\n// window.ipcRenderer = ipcRenderer\n// console.log('preload.js')\n// contextBridge.exposeInMainWorld('electronAPI', {\n//     userLogin: (data) => ipcRenderer.invoke('user:login', data)\n// })\ncontextBridge.exposeInMainWorld('api', {\n    send: (channel, data) => {\n      // whitelist channels\n      const validChannels = ['user:Login','socialtask:start','socialtask:log','socialaccount:login','socialaccount:login:msg',EXTRAMODULECHANNE_INSTALL,EXTRAMODULECHANNE_MESSAGE,EXTRAMODULECHANNE_UNINSTALL,SYSTEM_MESSAGE,VIDEODOWNLOAD_MESSAGE,VIDEODOWNLOAD]\n      console.log('send',channel,data)\n      if (validChannels.includes(channel)) {\n        console.log('send2',channel,data)\n        ipcRenderer.send(channel, data)\n      }\n    },\n    receive: (channel, func) => {\n      const validChannels = ['user:Login','socialtask:start','socialtask:log','socialaccount:login:msg',EXTRAMODULECHANNE_INSTALL,EXTRAMODULECHANNE_MESSAGE,EXTRAMODULECHANNE_UNINSTALL,SYSTEM_MESSAGE,VIDEODOWNLOAD_MESSAGE,VIDEODOWNLOAD]\n      const regex=\"/^socialtask:log:/\"\n\n      if (validChannels.includes(channel)||channel.test(regex)) {\n        // Deliberately strip event as it includes `sender`\n        ipcRenderer.on(channel, (event, ...args) => func(...args))\n      }\n    },\n    invoke: (channel, data) => {\n      // whitelist channels\n      const validChannels = ['user:Login','user:checklogin','user:Signout','campaign:list','socialtask:list','socialtask:info','socialtasktype:list','tag:list','socialtask:save','socialtask:start','socialtaskrun:list','socialtaskresult:list','socialaccount:list','socialaccount:save','socialplatform:list','socialaccount:detail','socialaccount:delete','proxy:list','proxy:delete','proxy:save','proxy:detail','proxy:check','proxy:import',EXTRAMODULECHANNE_LIST,OPENDIRECTORY,VIDEODOWNLOAD,VIDEODOWNLOAD_LIST]\n      if (validChannels.includes(channel)) {\n        return ipcRenderer.invoke(channel, data)\n      }\n    }\n  })"],"names":["EXTRAMODULECHANNE_LIST","EXTRAMODULECHANNE_INSTALL","EXTRAMODULECHANNE_UNINSTALL","EXTRAMODULECHANNE_MESSAGE","OPENDIRECTORY","VIDEODOWNLOAD","VIDEODOWNLOAD_MESSAGE","SYSTEM_MESSAGE","VIDEODOWNLOAD_LIST","contextBridge","channel","data","validChannels","ipcRenderer","func","regex","event","args"],"mappings":"yCAAaA,EAAuB,mBACvBC,EAA0B,sBAC1BC,EAA4B,wBAC5BC,EAA0B,sBAC1BC,EAAc,iBACdC,EAAc,iBACdC,EAAsB,yBACtBC,EAAe,iBACfC,EAAmB,sBCDhCC,EAAAA,cAAc,kBAAkB,MAAO,CACnC,KAAM,CAACC,EAASC,IAAS,CAEvB,MAAMC,EAAgB,CAAC,aAAa,mBAAmB,iBAAiB,sBAAsB,0BAA0BX,EAA0BE,EAA0BD,EAA4BK,EAAeD,EAAsBD,CAAa,EAC1P,QAAQ,IAAI,OAAOK,EAAQC,CAAI,EAC3BC,EAAc,SAASF,CAAO,IAChC,QAAQ,IAAI,QAAQA,EAAQC,CAAI,EAChCE,cAAY,KAAKH,EAASC,CAAI,EAEjC,EACD,QAAS,CAACD,EAASI,IAAS,CAC1B,MAAMF,EAAgB,CAAC,aAAa,mBAAmB,iBAAiB,0BAA0BX,EAA0BE,EAA0BD,EAA4BK,EAAeD,EAAsBD,CAAa,EAC9NU,EAAM,sBAERH,EAAc,SAASF,CAAO,GAAGA,EAAQ,KAAKK,CAAK,IAErDF,cAAY,GAAGH,EAAS,CAACM,KAAUC,IAASH,EAAK,GAAGG,CAAI,CAAC,CAE5D,EACD,OAAQ,CAACP,EAASC,IAAS,CAGzB,GADsB,CAAC,aAAa,kBAAkB,eAAe,gBAAgB,kBAAkB,kBAAkB,sBAAsB,WAAW,kBAAkB,mBAAmB,qBAAqB,wBAAwB,qBAAqB,qBAAqB,sBAAsB,uBAAuB,uBAAuB,aAAa,eAAe,aAAa,eAAe,cAAc,eAAeX,EAAuBI,EAAcC,EAAcG,CAAkB,EACle,SAASE,CAAO,EAChC,OAAOG,cAAY,OAAOH,EAASC,CAAI,CAE1C,CACF,CAAA"}