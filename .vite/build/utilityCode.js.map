{"version":3,"file":"utilityCode.js","sources":["../../src/modules/metadata.ts","../../src/model/scraperdb.ts","../../node_modules/vite-plugin-node-polyfills/shims/process/dist/index.js","../../src/modules/lib/function.ts","../../src/model/task_resultdb.ts","../../src/modules/social_scraper.ts","../../src/modules/facebook_scraper.ts","../../src/modules/youtube_scraper.ts","../../src/modules/bilibili/downloader.ts","../../src/modules/bilibili_scraper.ts","../../node_modules/vite-plugin-node-polyfills/shims/buffer/dist/index.js","../../src/modules/cryptosource.ts","../../src/modules/storeservice.ts","../../src/modules/token.ts","../../src/modules/lib/httpclient.ts","../../node_modules/jwt-decode/build/jwt-decode.esm.js","../../src/modules/remotesource.ts","../../src/modules/videoedit.ts","../../src/model/videodb.ts","../../src/modules/videodownload_observer.ts","../../src/concurrency-implementation.ts","../../src/node_socialmk.ts","../../src/modules/scrapeindex.ts","../../src/model/taskrundb.ts","../../node_modules/randomstring/node_modules/randombytes/browser.js","../../node_modules/randomstring/lib/charset.js","../../node_modules/randomstring/lib/randomstring.js","../../node_modules/randomstring/index.js","../../src/modules/socialtaskrun.ts","../../src/modules/socialtask.ts","../../src/config/puppeteerconfig.ts","../../src/modules/keyword.ts","../../src/utilityCode.ts"],"sourcesContent":["const cheerio = require('cheerio');\n\n// module.exports = {\n//     get_ip_data: get_ip_data,\n//     get_http_headers: get_http_headers,\n// };\n\nexport async function get_ip_data(page) {\n    await page.goto('https://ipinfo.io/json', {\n      waitLoad: true,\n      waitNetworkIdle: true\n    });\n    const json = await page.content({\n        timeout: 20000\n    });\n    const $ = cheerio.load(json);\n    const ipinfo_text =  $('pre').text();\n    return JSON.parse(ipinfo_text);\n}\n\nexport async function get_http_headers(page) {\n    await page.goto('https://httpbin.org/get', {\n      waitLoad: true,\n      waitNetworkIdle: true\n    });\n    const headers = await page.content();\n\n    const $ = cheerio.load(headers);\n    const headers_text =  $('pre').text();\n    return JSON.parse(headers_text);\n}","import { Database } from 'sqlite3';\nimport * as fs from 'fs';\nconst debug = require(\"debug\")(\"scraperdb\");\nconst appRoot = require('app-root-path');\nimport * as path from 'path';\n\n// import { use } from 'chai';\n// import * as e from 'express';\n\n// const db = new sqlite3.Database('socialmarket.db');\n\n// module.exports = {\n//     db: db,\n// };\n\n\nexport class Scraperdb {\n    private static instance: Scraperdb;\n    dbname: string;\n    db: Database;\n    pathdb: string;\n\n    private constructor() {\n        const dbpath: string = path.resolve(appRoot + \"/tmp/db/\");\n        // debug(dbpath)\n        if (!fs.existsSync(dbpath)) {\n            fs.mkdirSync(dbpath, { recursive: true });\n        }\n        this.dbname = \"scraper.db\";\n        this.pathdb = dbpath + \"/\" + this.dbname\n        // debug(this.dbname)\n        this.db = new Database(this.pathdb, (err) => {\n            if (err) {\n                // console.log(\"Getting error \" + err);\n                throw new Error(\"Getting error \" + err);\n            }\n        });\n    }\n    // deconstructor() {\n    //     this.db.close();\n    // }\n\n    public static getInstance(): Scraperdb {\n        if (!Scraperdb.instance) {\n            Scraperdb.instance = new Scraperdb();\n        }\n        return Scraperdb.instance;\n    }\n    init() {\n        this.createTables();\n    }\n    //get database\n    getdb(): Database {\n        return this.db;\n    }\n    /**\n     * create video table\n     */\n    createTables() {\n        const videotablepath = path.resolve(appRoot + \"/src/sql/scraperdb/\");\n\n        fs.readdir(videotablepath, (err, files) => {\n            debug(files)\n            files.forEach(file => {\n                this.db.exec(fs.readFileSync(videotablepath +path.sep+ file).toString());\n            });\n        });\n    }\n   \n  \n\n    \n    \n\n}\n\n  \n    \n\n\n","function getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar browser = {exports: {}};\n\n// shim for using process in browser\nvar process = browser.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ());\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] };\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\nvar browserExports = browser.exports;\nconst process$1 = /*@__PURE__*/getDefaultExportFromCjs(browserExports);\n\nexport { process$1 as default, process$1 as process };\n//# sourceMappingURL=index.js.map\n","const path = require(\"path\");\nexport type queryParams = {\n    page: number,\n    size: number,\n    sortby: string,\n    search: string,\n  }\n//scroll down to the bottom of the page\nexport async function autoScroll(page){\n    await page.evaluate(async () => {\n        await new Promise((resolve) => {\n            let totalHeight = 0;\n            const distance = 100;\n            var timer = setInterval(() => {\n                const scrollHeight = document.body.scrollHeight;\n                window.scrollBy(0, distance);\n                totalHeight += distance;\n\n                if(totalHeight >= scrollHeight - window.innerHeight){\n                    clearInterval(timer);\n                    resolve(void(0));\n                }\n            }, 100);\n        });\n    });\n}\nexport function delay(time) {\n    return new Promise(function(resolve) { \n        setTimeout(resolve, time)\n    });\n}\n//get record date string for local db\nexport function getRecorddatetime():string{\n    const date = new Date();\n    \n    return date.getFullYear().toString() +\n      \"-\" +\n      pad2(date.getMonth() + 1) +\n      \"-\" +\n      pad2(date.getDate()) +\n      \" \" +\n      pad2(date.getHours()) +\n      \":\" +\n      pad2(date.getMinutes()) +\n      \":\" +\n      pad2(date.getSeconds());  \n}\nexport function pad2(n: number): string {\n    if (n < 10) {\n      return \"0\" + n.toString();\n    } else {\n      return n.toString();\n    }\n  }\n//return date string\nexport function getdate():string{\n    const date = new Date();\n    \n    return date.getFullYear().toString() +\n      \"-\" +\n      pad2(date.getMonth() + 1) +\n      \"-\" +\n      pad2(date.getDate()) +\n      \" \" +\n      pad2(date.getHours()) +\n      \":\" +\n      pad2(date.getMinutes()) +\n      \":\" +\n      pad2(date.getSeconds());  \n}\n\n\nexport function getUserhome():string|undefined{\n    switch(process.platform) {\n        case 'darwin': {\n          return path.join(process.env.HOME, 'Library', 'Application Support');\n        }\n        case 'win32': {\n          return process.env.APPDATA;\n        }\n        case 'linux': {\n          return process.env.HOME;\n        }\n      }\n      return undefined;\n}\nexport function getApplogpath():string|undefined{\n    const userPath=getUserhome()\n    if(!userPath){\n        return undefined\n    }\n    const appname=\"social-marketing\"\n    return path.join(process.env.HOME, appname, 'log');\n}\n\nexport const hash = Math.floor(Math.random() * 90000) + 10000;\n// module.exports = {\n//     autoScroll:autoScroll,\n//     delay:delay,\n//     getRecorddate:getRecorddate\n// }","import { Database } from 'sqlite3';\nimport { Scraperdb } from \"@/model/scraperdb\";\nimport {getRecorddatetime} from \"@/modules/lib/function\";\nexport interface TaskResultEntity{\n  taskrunId:number\n  url:string\n  title:string\n  content?:string\n  lang?:string\n}\nexport class TaskResultdb {\n    db: Database;\n    taskresultTable = \"task_result\"; \n    constructor() {\n        const scraperModel = Scraperdb.getInstance();\n        this.db = scraperModel.getdb();\n    }\n    public saveTaskresult(taskresult:TaskResultEntity,callback:Function|undefined|null){\n      if(!taskresult.taskrunId){\n        throw new Error(\n          `task run id empty`\n        );\n      }\n      const recordtime =getRecorddatetime();\n        const sql =\n        `INSERT INTO ` +\n        this.taskresultTable +\n        ` (taskrun_id,url,title,content,lang,record_time) VALUES (?,?,?,?,?,?)`;  \n        this.db.run(    \n            sql,\n            [taskresult.taskrunId, taskresult.url,taskresult.title,taskresult.content,taskresult.lang,recordtime],\n            function (err) {\n              if (err) {\n                throw new Error(\n                  err.message + \" taskrunid:\" + taskresult.taskrunId.toString() + \" recordtime:\" + recordtime\n                );\n              }\n              if (this.lastID) {           \n                if(callback){\n                  callback(this.lastID)\n                }\n              }    \n            }\n          );\n    }    \n}","'use strict';\n\nimport {get_ip_data,get_http_headers} from '@/modules/metadata';\nconst debug = require('debug')('se-scraper:Scraper');\nimport { Linkdata } from \"./remotesource\"\nimport { Page } from 'puppeteer';\nimport {TaskResultdb,TaskResultEntity} from \"@/model/task_resultdb\"\nconst appRoot = require('app-root-path');\nconst fs = require('fs');\n// const resolve = require('path').resolve;\nimport * as path from \"path\";\n// import { Scraperdb } from \"../model/scraperdb\"\n// const { spawn } = require('child_process');\nimport { Subject, Observer } from './subject';\nimport {SMconfig} from \"@/node_socialmk\"\n// import {ScrapeVideo} from './social_scraper';\n// export interface ScrapeOptionsPages {\n//     setViewport: Function,\n//     setRequestInterception: Function,\n//     on: Function,\n//     goto: Function,\n//     screenshot: Function,\n//     setBypassCSP: Function,\n//     click: Function,\n//     waitForSelector: Function,\n//     $x: Function,\n//     cookies: Function,\n// }\n// export class ScrapeOptionsPage extends Page{\nexport interface ScrapeVideo{\n    scrapeinfo:Linkdata,\n    video:VideoInfo,\n}    \nexport interface VideoInfo{\n    url:string,\n    localpath:string,\n    title:string,\n    description:string|undefined,\n    language:string\n}\n// }\n// export class Elementhands extends puppeteer.ElementHandle{}\nexport interface ScrapeOptions {\n    // config: {\n    //     logger: logType,\n    //     search_engine?: string, keywords?: Array<string>, proxy?: string, apply_evasion_techniques?: boolean, block_assets?: boolean, test_evasion?: boolean, log_http_headers?: boolean, log_ip_address?: boolean\n    // },\n    config:SMconfig,\n    context?: object,\n    pluggable?: object,\n    page?: Page,\n    taskid?: number,\n    taskrunid?:number,\n    // platform:string\n}\n\ninterface runParameter {\n    page?: Page,\n    data?: object,\n    worker?: object\n}\ninterface logType {\n    info: Function,\n    error: Function\n}\n\nexport interface WosearchObj {\n    page?: Page,\n    worker?: object\n}\n\nexport interface Linkurl {\n    title: string,\n    link: string,\n    lang: string,\n    taskid?: number\n}\nexport type Searchobject = {\n    page?: Page,\n    keyword: string | Array<string>\n    cookiesPath?: string\n}\n\n\n\n/**\n * this is parent class for social scrapyer node\n *  */\nexport class SocialScraper implements Subject {\n    // config: {\n    //     logger: logType,\n    //     search_engine?: string,\n    //     keywords?: Array<string>,\n    //     proxy?: string,\n    //     apply_evasion_techniques?: boolean,\n    //     block_assets?: boolean,\n    //     test_evasion?: boolean,\n    //     log_http_headers?: boolean,\n    //     log_ip_address?: boolean\n    //     tmppath?: string,\n    //     taskid?: number\n    //     // obj:puppeteer.Page\n    // };\n    config:SMconfig;\n    page: Page;\n    last_response: object | null;\n    metadata: { http_headers?: object, ipinfo?: { ip: string }, scraping_detected?: boolean };\n    pluggable?: object;\n    context?: object;\n    logger: logType;\n    proxy: string;\n    keywords: Array<string>;\n    STANDARD_TIMEOUT: number;\n    SOLVE_CAPTCHA_TIME: number;\n    results: object;\n    result_rank: number;\n    num_requests: number;\n    num_keywords: number;\n    taskid?: number;\n    taskrunid?:number;\n    private observers: Observer[] = [];\n    constructor(options: ScrapeOptions) {\n\n        // debug('constructor');\n        // debug(options);\n        // const {\n        //     // config = {},\n        //     context = {},\n        //     // pluggable = null,\n        //     page = null,\n        //     // browsers=null\n        // } = options;\n        // this.browser=browser;\n        if(options.page){\n        this.page = options.page;\n        }\n        this.last_response = null; // the last response object\n        this.metadata = {\n            scraping_detected: false,\n        };\n        this.pluggable = options.pluggable;\n        this.config = options.config;\n        this.logger = this.config.logger;\n        this.context = options.context;\n        // if(options.config.proxy){\n        // this.proxy = options.config.proxy;\n        // }\n        if(options.config.keywords){\n        this.keywords = options.config.keywords;\n        }\n        if (options.taskid) {\n            this.taskid = options.taskid;\n        }\n        if(options.taskrunid){\n            this.taskrunid=options.taskrunid;\n        }\n        this.STANDARD_TIMEOUT = 10000;\n        this.SOLVE_CAPTCHA_TIME = 45000;\n\n        this.results = {};\n        this.result_rank = 1;\n        // keep track of the requests done\n        this.num_requests = 0;\n        // keep track of the keywords searched\n        this.num_keywords = 0;\n        \n        let settings = this.config[`${this.config.platform}_settings`];\n        if (settings) {\n            if (typeof settings === 'string') {\n                settings = JSON.parse(settings);\n                this.config[`${this.config.platform}_settings`] = settings;\n            }\n        }\n    }\n\n    /**\n     * The subscription management methods.\n     */\n    public attach(observer: Observer): void {\n        const isExist = this.observers.includes(observer);\n        if (isExist) {\n            return console.log('Subject: Observer has been attached already.');\n        }\n\n        console.log('Subject: Attached an observer.');\n        this.observers.push(observer);\n    }\n\n    public detach(observer: Observer): void {\n        const observerIndex = this.observers.indexOf(observer);\n        if (observerIndex === -1) {\n            return console.log('Subject: Nonexistent observer.');\n        }\n\n        this.observers.splice(observerIndex, 1);\n        console.log('Subject: Detached an observer.');\n    }\n\n    /**\n     * Trigger an update in each subscriber.\n     */\n    public notify(type:string,data:ScrapeVideo): void {\n        console.log('Subject: Notifying observers...');\n        for (const observer of this.observers) {\n            observer.update(type,data);\n        }\n    }\n\n    /**\n     * login social media platform\n     * @param runobj \n     * \n     */\n    async runLogin(runobj: runParameter) {\n\n        debug('worker=%o', runobj.worker, this.config.keywords);\n\n        if (runobj.page) {\n            this.page = runobj.page;\n        }\n\n        await this.page?.setViewport({ width: 1280, height: 800 });\n\n\n        await this.load_browser_engine();\n        await this.makeloginaction()\n\n    }\n\n    /**\n     * Action that runs only once in the beginning of the\n     * scraping procedure.\n     *\n     * @returns {Promise<void>} true if everything is correct.\n     */\n    async load_browser_engine(): Promise<void> {\n\n        if (this.config.apply_evasion_techniques === true) {\n            // prevent detection by evading common detection techniques\n            await evadeChromeHeadlessDetection(this.page);\n        }\n\n        // block some assets to speed up scraping\n        if (this.config.block_assets === true) {\n            await this.page.setRequestInterception(true);\n            this.page.on('request', (req) => {\n                const type = req.resourceType();\n                const block = ['stylesheet', 'font', 'image', 'media'];\n                if (block.includes(type)) {\n                    req.abort();\n                } else {\n                    req.continue();\n                }\n            });\n        }\n\n        if (this.config.test_evasion === true) {\n            // Navigate to the page that will perform the tests.\n            const testUrl = 'https://bot.sannysoft.com';\n            await this.page.goto(testUrl);\n            // Save a screenshot of the results.\n            await this.page.screenshot({ path: 'headless-evasion-result.png' });\n        }\n\n        if (this.config.log_http_headers === true) {\n            this.metadata.http_headers = await get_http_headers(this.page);\n            // debug('this.metadata.http_headers=%O', this.metadata.http_headers);\n        }\n\n        if (this.config.log_ip_address === true) {\n            const ipinfo = await get_ip_data(this.page);\n            this.metadata.ipinfo = ipinfo;\n            // debug('this.metadata.ipinfo', this.metadata.ipinfo);\n        }\n\n        // check that our proxy is working by confirming\n        // that ipinfo.io sees the proxy IP address\n        if (this.proxy && this.config.log_ip_address === true) {\n            debug(`${this.metadata.ipinfo?.ip} vs ${this.proxy}`);\n\n            // if the ip returned by ipinfo is not a substring of our proxystring, get the heck outta here\n            if (this.metadata.ipinfo?.ip && (!this.proxy.includes(this.metadata.ipinfo?.ip))) {\n                throw new Error(`Proxy output ip ${this.proxy} does not match with provided one`);\n            } else {\n                this.logger.info(`Using valid Proxy: ${this.proxy}`);\n            }\n\n        }\n\n        return await this.load_start_page();\n    }\n    /**\n  *\n  * @returns true if startpage was loaded correctly.\n  */\n    async load_login_page() {\n\n    }\n    /**\n    *\n    * @returns true if startpage was loaded correctly.\n    */\n    async load_start_page() {\n\n    }\n    /**\n     * make login action\n     */\n    async makeloginaction(): Promise<any | boolean> {\n\n    }\n    /**\n     * user login by their hand\n     */\n    async userloginaction() {\n\n    }\n\n    async searchdata(seachobj: Searchobject): Promise<any | Array<Linkurl>> {\n\n    }\n\n    /**\n     * use worker to search data\n     * @param object keyword \n     */\n    async workersearchdata(workerseach: WosearchObj) {\n        if (workerseach.worker) {\n            console.log('worker=%o', workerseach.worker, this.config.keywords);\n        }\n        if (workerseach.page) {\n            this.page = workerseach.page;\n        }\n\n        await this.page.setViewport({ width: 1280, height: 800 });\n        await this.load_browser_engine()\n        if(!this.config.keywords){\n            console.error(\"keyword is empty\");\n            return\n        }\n        const links = await this.searchdata({ keyword: this.config.keywords })\n        //save link to local db\n        const taskresultModel=new TaskResultdb()\n        \n        // const remoteSourmodel = new RemoteSource();\n        // debug('links=%o',links)\n        //handle the links\n        links?.map(async linkItem => {\n            // const linkobj: Linkdata = { title: linkItem.title, url: linkItem.link, lang: linkItem.lang, socialtask_id: linkItem.taskid }\n            // debug(linkobj)\n            try {\n                let taskresultEntity:TaskResultEntity={url:linkItem.link,\n                    title: linkItem.title, \n                    lang: linkItem.lang,\n                    \n                    taskrunId:this.taskrunid as number,\n                }\n                if(linkItem.content){\n                    taskresultEntity.content=linkItem.content  \n                }\n                taskresultModel.saveTaskresult(taskresultEntity,null)\n                // await remoteSourmodel.saveLinkremote(linkobj)\n            } catch (error) {\n                console.error(error);\n            }\n        })\n\n    }\n    /**\n     * download video\n     */\n    async downloadvideo(list: Array<Linkdata>): Promise<void> {\n\n        const currentdate = new Date();\n        const datetime = currentdate.getFullYear() + \"-\"\n            + (currentdate.getMonth() + 1) + \"-\"\n            + (currentdate.getDate());\n        const videosavepath: string = path.resolve(appRoot + \"/tmp/video/\" + datetime + \"/\");\n        if (!fs.existsSync(videosavepath)) {\n            fs.mkdirSync(videosavepath, { recursive: true });\n        }\n        // debug('linklist=%o',list)\n        //debug(list)\n        //const scraperDb = Scraperdb.getInstance();\n        list.forEach(async (linkItem, index) => {\n            // console.log(linkItem)\n            // console.log(index)\n            // const lt=linkItem as Linkdata\n            // console.log(lt.id)\n            debug(linkItem)\n            // console.log(Object.getPrototypeOf(linkItem))\n            const videoArray = await this.downloadSigleVideo(linkItem.url, videosavepath)\n            if (videoArray) {\n\n                for (let i = 0; i < videoArray.length; i++) {\n                    //    console.log(videoArray[i])\n                    const videoItem:VideoInfo={url:linkItem.url,localpath:videoArray[i],title:linkItem.title,description:linkItem.content,language:linkItem.lang}\n                    const scrapeitem:ScrapeVideo={video:videoItem,scrapeinfo:linkItem}\n                    //scraperDb.saveVideo(linkItem.url, videoArray[i], linkItem.title, linkItem.content, linkItem.lang)\n                    this.notify(\"downloadvideoend\",scrapeitem);\n                }\n            }\n        })\n    }\n    /**\n     * download single video\n     * @param string link \n     * @param string videopath \n     */\n    async downloadSigleVideo(link: string, videopath: string): Promise<Array<string> | void> {\n\n    }\n\n\n}\n// This is where we'll put the code to get around the tests.\nasync function evadeChromeHeadlessDetection(page) {\n\n    // Pass the Webdriver Test.\n    await page.evaluateOnNewDocument(() => {\n        // const newProto = navigator.__proto__;\n        const newProto = Object.getPrototypeOf(navigator);\n        delete newProto.webdriver;\n        // navigator.__proto__ = newProto;\n        Object.setPrototypeOf(navigator, newProto);\n    });\n\n    // Pass the Chrome Test.\n    await page.evaluateOnNewDocument(() => {\n        // interface mockObjType extends typeof chrome {\n        //     chrome: object,\n        // }\n        // We can mock this in as much depth as we need for the test.\n        const mockObj = {\n            app: {\n                isInstalled: false,\n            },\n            webstore: {\n                onInstallStageChanged: {},\n                onDownloadProgress: {},\n            },\n            runtime: {\n                PlatformOs: {\n                    MAC: 'mac',\n                    WIN: 'win',\n                    ANDROID: 'android',\n                    CROS: 'cros',\n                    LINUX: 'linux',\n                    OPENBSD: 'openbsd',\n                },\n                PlatformArch: {\n                    ARM: 'arm',\n                    X86_32: 'x86-32',\n                    X86_64: 'x86-64',\n                },\n                PlatformNaclArch: {\n                    ARM: 'arm',\n                    X86_32: 'x86-32',\n                    X86_64: 'x86-64',\n                },\n                RequestUpdateCheckStatus: {\n                    THROTTLED: 'throttled',\n                    NO_UPDATE: 'no_update',\n                    UPDATE_AVAILABLE: 'update_available',\n                },\n                OnInstalledReason: {\n                    INSTALL: 'install',\n                    UPDATE: 'update',\n                    CHROME_UPDATE: 'chrome_update',\n                    SHARED_MODULE_UPDATE: 'shared_module_update',\n                },\n                OnRestartRequiredReason: {\n                    APP_UPDATE: 'app_update',\n                    OS_UPDATE: 'os_update',\n                    PERIODIC: 'periodic',\n                },\n            },\n        };\n        // if(window.navigator.chrome){\n        // window.navigator.chrome = mockObj;\n        // }\n        // window.chrome = mockObj;\n    });\n\n    // //Pass the Permissions Test.\n    // await page.evaluateOnNewDocument(() => {\n    //     const originalQuery = window.navigator.permissions.query;\n    //     // window.navigator.permissions.__proto__.query = parameters =>\n    //     Object.getPrototypeOf(window.navigator.permissions).query = parameters =>\n\n    //         parameters.name === 'notifications'\n    //             ? Promise.resolve({ state: Notification.permission })\n    //             : originalQuery(parameters);\n\n    //     // Inspired by: https://github.com/ikarienator/phantomjs_hide_and_seek/blob/master/5.spoofFunctionBind.js\n    //     const oldCall = Function.prototype.call;\n\n    //     function call() {\n            \n    //         return oldCall.apply(this, arguments);\n    //     }\n\n    //     Function.prototype.call = call;\n\n    //     const nativeToStringFunctionString = Error.toString().replace(/Error/g, \"toString\");\n    //     const oldToString = Function.prototype.toString;\n\n    //     function functionToString() {\n    //         if (this === window.navigator.permissions.query) {\n    //             return \"function query() { [native code] }\";\n    //         }\n    //         if (this === functionToString) {\n    //             return nativeToStringFunctionString;\n    //         }\n    //         return oldCall.call(oldToString, this);\n    //     }\n\n    //     Function.prototype.toString = functionToString;\n    // });\n\n    // Pass the Plugins Length Test.\n    await page.evaluateOnNewDocument(() => {\n        // Overwrite the `plugins` property to use a custom getter.\n        Object.defineProperty(navigator, 'plugins', {\n            // This just needs to have `length > 0` for the current test,\n            // but we could mock the plugins too if necessary.\n            get: () => [1, 2, 3, 4, 5]\n        });\n    });\n\n    // Pass the Languages Test.\n    await page.evaluateOnNewDocument(() => {\n        // Overwrite the `plugins` property to use a custom getter.\n        Object.defineProperty(navigator, 'languages', {\n            get: () => ['en-US', 'en']\n        });\n    });\n\n    // Pass the iframe Test\n    await page.evaluateOnNewDocument(() => {\n        Object.defineProperty(HTMLIFrameElement.prototype, 'contentWindow', {\n            get: function () {\n                return window;\n            }\n        });\n    });\n\n    // Pass toString test, though it breaks console.debug() from working\n    await page.evaluateOnNewDocument(() => {\n        window.console.debug = () => {\n            return null;\n        };\n    });\n}","'use strict';\n// import {cheerio} from 'cheerio';\nimport { SocialScraper as Scraper,ScrapeOptions} from './social_scraper';\n\nexport class FacebookScraper extends Scraper {\n\n    constructor(args: ScrapeOptions) {\n        super(args);\n    }\n \n\n    async load_login_page():Promise<void> {\n        const startUrl = 'https://www.facebook.com';\n\n        // if (this.config.facebook_settings) {\n        //     startUrl = `https://www.${this.config.facebook_settings.facebook_domain}`;\n        //     if (this.config.facebook_settings.facebook_domain) {\n        //         startUrl = `https://www.${this.config.facebook_settings.facebook_domain}`;\n        //     } else {\n        //         startUrl = `https://www.facebook.com`;\n        //     }\n\n        //     for (var key in this.config.facebook_settings) {\n        //         if (key !== 'facebook_domain') {\n        //             startUrl += `${key}=${this.config.facebook_settings[key]}&`\n        //         }\n        //     }\n        // }\n\n        this.logger.info('Using loginUrl: ' + startUrl);\n\n        this.last_response = await this.page.goto(startUrl);\n\n        //await this.page.waitForSelector('input[name=\"q\"]', { timeout: this.STANDARD_TIMEOUT });\n\n        // return true;\n    }\n    //user login by hand\n    async userloginaction(){\n\n    }\n\n}\n\n\n","'use strict';\n\n// const cheerio = require('cheerio');\nimport {SocialScraper as Scraper,ScrapeOptions} from './social_scraper';\nconst fs = require('fs');\n\nexport class YoutubeScraper extends Scraper {\n\n    constructor(args: ScrapeOptions) {\n        super(args);    \n    }\n\n\n    async load_login_page() {\n        \n        const startUrl = 'https://www.youtube.com';\n\n        this.logger.info('Using loginUrl: ' + startUrl);\n        await this.page.setBypassCSP(true);\n        this.last_response = await this.page.goto(startUrl);\n        \n        //hidden icon\n        await this.page.evaluate(() => {\n        const icon = document.getElementById(\"logo-icon\");\n        if(icon){\n        icon.style.display = \"none\";\n        }\n        });\n        console.log(this.config.tmppath)\n        //await this.page.waitForSelector('input[name=\"q\"]', { timeout: this.STANDARD_TIMEOUT });\n        //await for user to take action\n        await this.page.waitForSelector('#avatar-btn',{'timeout':0});\n        //user has success login\n        //save cookies \n        const cookies = await this.page.cookies();\n        \n        await fs.writeFile(this.config.tmppath+'/cookies.json', JSON.stringify(cookies, null, 2));\n        // await browser.close();\n        // return true;\n    }\n\n\n\n}\n\nmodule.exports = {\n    YoutubeScraper: YoutubeScraper,\n};\n","const fs = require(\"fs\");\nconst crypto = require(\"crypto\");\nconst http = require(\"http\");\nconst https = require(\"https\");\nconst progress = require(\"progress-stream\");\nconst fetch =require(\"node-fetch\");\nconst debug = require(\"debug\")(\"bilibili-download\");\nconst debugerror = debug('app:error');\nexport interface getAiddata {\n\tvideoData: {\n\t\taid: number;\n\t\tpages: Array<{\n\t\t\tcid: number;\n\t\t}>;\n\t};\n\n\tepInfo: {\n\t\taid: number;\n\t\tcid: number;\n\t}\n\tepList: Array<{\n\t\taid: number;\n\t\tcid: number;\n\t}>;\n}\ntype Durldata = {\n\turl: string;\n\torder: string;\n\tlength: string;\n\tsize: string;\n}\ntype Targetresult = {\n\tdurl: Array<Durldata>;\n\tquality: string;\n}\nexport type Videodata = {\n\tdata: {\n\t\ttitle: string;\n\t}\n}\nclass Task {\n\turl: string;\n\tfinished: boolean;\n\tconstructor(url) {\n\t\tthis.url = url;\n\t\tthis.finished = false;\n\t}\n}\n\n\nexport class Downloader {\n\ttype: string;\n\tid: string;\n\turl: string;\n\taid: number;\n\tpid: number;\n\tcid: number;\n\tname: string;\n\tlinks: Array<string>;\n\ttasks: Array<Task>;\n\n\tconstructor() {\n\t\tthis.type = \"\";\n\t\tthis.id = \"\";\n\t\tthis.url = \"\";\n\t\tthis.aid = -1;\n\t\tthis.pid = 1;\n\t\tthis.cid = -1;\n\t\tthis.name = \"\";\n\t\tthis.links = [];\n\t\tthis.tasks = [];\n\t}\n\n\tgetVideoUrl(videoUrl: string): void {\n\t\tif(!videoUrl){\n\t\t\tthrow new Error(\"video url is empty\");\n\t\t} \n\t\tthis.url = \"\";\n\t\tconst mapping = {\n\t\t\t\"BV\": \"https://www.bilibili.com/video/\",\n\t\t\t\"bv\": \"https://www.bilibili.com/video/\",\n\t\t\t\"av\": \"https://www.bilibili.com/video/\",\n\t\t\t\"ep\": \"https://www.bilibili.com/bangumi/play/\",\n\t\t\t\"ss\": \"https://www.bilibili.com/bangumi/play/\"\n\t\t};\n\t\tfor (const [key, value] of Object.entries(mapping)) {\n\t\t\tif (videoUrl.includes(key)) {\n\t\t\t\tthis.type = key;\n\t\t\t\tthis.id = key + videoUrl.split(key)[1];\n\t\t\t\tthis.url = value + this.id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync getAid() {\n\t\tconst { type, url } = this;\n\t\tif (!url) return;\n\t\treturn fetch(url)\n\t\t\t.then(response => response.text())\n\t\t\t.then(result => {\n\t\t\t\tconst data = result.match(/__INITIAL_STATE__=(.*?);\\(function\\(\\)/)[1];\n\t\t\t\t// data =  cast(JSON.parse(data),r(\"User\"));\n\t\t\t\tconst aiddata: getAiddata = JSON.parse(data)\n\t\t\t\t//debug(\"INITIAL STATE\", data);\n\t\t\t\tif (type === \"BV\" || type === \"bv\" || type === \"av\") {\n\t\t\t\t\tthis.aid = aiddata.videoData.aid;\n\t\t\t\t\tthis.pid = parseInt(url.split(\"p=\")[1], 10) || 1;\n\t\t\t\t\tthis.cid = aiddata.videoData.pages[this.pid - 1].cid;\n\t\t\t\t}\n\t\t\t\telse if (type === \"ep\") {\n\t\t\t\t\tthis.aid = aiddata.epInfo.aid;\n\t\t\t\t\tthis.cid = aiddata.epInfo.cid;\n\t\t\t\t}\n\t\t\t\telse if (type === \"ss\") {\n\t\t\t\t\tthis.aid = aiddata.epList[0].aid;\n\t\t\t\t\tthis.cid = aiddata.epList[0].cid;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(\n\t\t\t\t// error => showError(\"获取视频 aid 出错！\")\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// console.error(error);\n\t\t\t\t\tthrow new Error(\"get video aid error\");\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tasync getInfo(): Promise<Videodata> {\n\t\tconst { aid, cid } = this;\n\t\tif (!cid) {\n\t\t\tthrow new Error(\"get video cid error\");\n\t\t\t// showError(\"获取视频 cid 出错！\");\n\t\t\t// return;\n\t\t}\n\t\t// getDanmaku(); //获取cid后，获取下载链接和弹幕信息\n\t\treturn fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)\n\t\t\t.then(response => response.json() as Promise<Videodata>)\n\t\t\t.catch(\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// console.error(error);\n\t\t\t\t\tthrow new Error(\"get video info error\");\n\t\t\t\t}\n\t\t\t\t// error => showError(\"获取视频信息出错！\")\n\t\t\t);\n\t}\n\n\tasync getData(fallback = false) {\n\t\tconst { cid, type } = this;\n\t\tlet playUrl;\n\t\tif (fallback) {\n\t\t\tconst params = `cid=${cid}&module=movie&player=1&quality=112&ts=1`;\n\t\t\tconst sign = crypto.createHash(\"md5\").update(params + \"9b288147e5474dd2aa67085f716c560d\").digest(\"hex\");\n\t\t\tplayUrl = `https://bangumi.bilibili.com/player/web_api/playurl?${params}&sign=${sign}`;\n\t\t} else {\n\t\t\tif (type === \"BV\" || type === \"bv\" || type === \"av\") {\n\t\t\t\tconst params = `appkey=iVGUTjsxvpLeuDCf&cid=${cid}&otype=json&qn=112&quality=112&type=`;\n\t\t\t\tconst sign = crypto.createHash(\"md5\").update(params + \"aHRmhWMLkdeMuILqORnYZocwMBpMEOdt\").digest(\"hex\");\n\t\t\t\tplayUrl = `https://interface.bilibili.com/v2/playurl?${params}&sign=${sign}`;\n\t\t\t} else {\n\t\t\t\tplayUrl = `https://api.bilibili.com/pgc/player/web/playurl?qn=80&cid=${cid}`;\n\n\t\t\t}\n\t\t}\n\t\treturn fetch(playUrl)\n\t\t\t.then(response => response.text())\n\t\t\t.then(result => {\n\t\t\t\tconst data = fallback ? this.parseData(result) : JSON.parse(result);\n\t\t\t\tconst target = data.durl || data.result.durl;\n\t\t\t\t// console.log(\"PLAY URL\", data);\n\t\t\t\tif (target) {\n\t\t\t\t\tthis.links = target.map(part => part.url);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfallback, data\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (fallback) throw Error();\n\t\t\t\t\treturn this.getData(true);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// console.error(error);\n\t\t\t\t\tthrow new Error(\"get playUrl or download link error\");\n\t\t\t\t}\n\t\t\t\t// \terror => {\n\t\t\t\t// \t// showError(\"获取 PlayUrl 或下载链接出错！由于B站限制，只能下载低清晰度视频。\");\n\t\t\t\t// }\n\t\t\t);\n\t}\n\n\tparseData(target) {\n\t\tconst data = $(target);\n\t\tconst result: Targetresult = { durl: [], quality: \"\" };\n\t\tresult.durl = [];\n\t\tresult.quality = data.find(\"quality\").text();\n\t\tdata.find(\"durl\").each((i, o) => {\n\t\t\tconst part = $(o);\n\t\t\tresult.durl.push({\n\t\t\t\turl: part.find(\"url\").text(),\n\t\t\t\torder: part.find(\"order\").text(),\n\t\t\t\tlength: part.find(\"length\").text(),\n\t\t\t\tsize: part.find(\"size\").text()\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}\n\n\tdownloadByIndex(part, file, callback = (progress: any, index: any) => { }) {\n\t\tconst { url } = this;\n\n\t\tif (this.tasks.some(item => item.url === this.links[part])) return \"DUPLICATE\";\n\t\tthis.tasks.push(new Task(this.links[part]));\n\t\tlet state;\n\t\ttry {\n\t\t\tstate = fs.statSync(file);\n\t\t}\n\t\tcatch (error) {\n\t\t}\n\t\tconst options = {\n\t\t\turl: this.links[part],\n\t\t\theaders: {\n\t\t\t\t\"Range\": `bytes=${state ? state.size : 0}-`, //断点续传\n\t\t\t\t\"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\n\t\t\t\t\"Referer\": url\n\t\t\t}\n\t\t};\n\t\tconst stream = fs.createWriteStream(file, state ? { flags: \"a\" } : {});\n\t\tthis.download(options, stream, callback);\n\n\t\treturn state;\n\t}\n\n\tdownload(options, stream, callback) {\n\t\t// https://www.npmjs.com/package/progress-stream\n\t\tconst index = this.tasks.findIndex(item => item.url === options.url);\n\t\tconst proStream = progress({\n\t\t\ttime: 250 //单位ms\n\t\t}).on(\"progress\", progress => {\n\t\t\tconst { percentage } = progress; //显示进度条\n\t\t\tif (percentage === 100) {\n\t\t\t\tthis.tasks[index].finished = true;\n\t\t\t}\n\t\t\tcallback(progress, index);\n\t\t});\n\n\t\tconst { url } = options;\n\t\tfunction downloadLink(url) {\n\t\t\t(url.startsWith(\"https\") ? https : http).get(url, options, res => {\n\t\t\t\tif (res.statusCode === 302) {\n\t\t\t\t\turl = res.headers.location;\n\t\t\t\t\treturn downloadLink(url);\n\t\t\t\t}\n\t\t\t\tproStream.setLength(res.headers[\"content-length\"]);\n\t\t\t\t//先pipe到proStream再pipe到文件的写入流中\n\t\t\t\tres.pipe(proStream).pipe(stream).on(\"error\", error => {\n\t\t\t\t\tdebugerror(error);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tdownloadLink(url);\n\t}\n}\n\nmodule.exports = { Task, Downloader };\n","\"use strict\";\n\nconst cheerio = require(\"cheerio\");\nimport { SocialScraper as Scraper, Linkurl, ScrapeOptions, Searchobject } from \"./social_scraper\";\nconst fs = require(\"fs\");\nimport { Downloader } from \"@/modules/bilibili/downloader\";\nconst path = require(\"path\");\nconst sanitize = require(\"filenamify\");\nconst debug = require(\"debug\")(\"bilibili-scraper\");\nimport { autoScroll, delay } from \"@/modules/lib/function\";\nimport { ElementHandle, Page, } from 'puppeteer';\nconst debugerror = debug('app:error');\n\ntype clickbtnserobj = {\n  page: Page,\n  keyword: string\n}\n// import filenamify from 'filenamify';\n// const { launch, getStream } = require(\"puppeteer-stream\");\n// const PuppeteerVideoRecorder = require('puppeteer-video-recorder');\nexport class BilibiliScraper extends Scraper {\n  startUrl: string;\n\n  constructor(args: ScrapeOptions) {\n    super(args);\n    this.startUrl = \"https://www.bilibili.com\";\n    this.taskid = args.taskid;\n    this.taskrunid = args.taskrunid;\n  }\n  async load_start_page(): Promise<void> {\n    debug(\"load start page\")\n\n  }\n  //login into bilibili\n  async makeloginaction(): Promise<boolean> {\n    // let startUrl = \"https://www.bilibili.com\";\n\n    this.logger.info(\"Using loginUrl: \" + this.startUrl);\n    await this.page.setBypassCSP(true);\n    this.last_response = await this.page.goto(this.startUrl);\n    //cookies should not save in this way\n    // debug(\n    //   \"login success, cookies has been save at \" + this.config.tmppath\n    // );\n    //click login btn\n    await this.page.click(\".header-login-entry\");\n    // await this.page.evaluate(_ => {\n    // var icon = document.getElementById(\"logo\");\n    // icon.style.display = \"none\";\n    // });\n    //wait login box show\n    await this.page.waitForSelector(\".bili-mini-content-wp\", {\n      timeout: this.STANDARD_TIMEOUT,\n    });\n\n    //click login by sms\n    const button = await this.page.$(\"//div[contains(., ' 短信登录 ')]\");\n    if (button) {\n      await (button as ElementHandle<Element>).click();\n    }\n    //await for user to take action\n    await this.page.waitForSelector(\".header-entry-mini\", { timeout: 0 });\n    //user has success login\n    //save cookies\n    const cookies = await this.page.cookies();\n\n    await fs.writeFile(\n      // this.config.tmppath + \"/cookies.json\",\n      JSON.stringify(cookies, null, 2),\n      (err) => {\n        if (err) {\n          debugerror(err);\n        }\n      }\n    );\n    await this.page.close();\n    // await this.browsers.close();\n    return true;\n  }\n\n  /**\n   * get video list page\n   * @param {object} page\n   * @param {string} keyword\n   * @returns element\n   */\n  async clickSearchbtn(searobj: clickbtnserobj): Promise<ElementHandle<Element> | null> {\n    if (searobj.page) {\n      this.page = searobj.page;\n    }\n\n    this.logger.info(\"Using loginUrl: \" + this.startUrl);\n    await this.page.setBypassCSP(true);\n    this.last_response = await this.page.goto(this.startUrl);\n    await this.page.type(\".nav-search-input\", searobj.keyword);\n    // await this.page.$eval(\".nav-search-input\", function (keyword) {\n    //   this.value = keyword;\n    // });\n    // await page.$eval('.nav-search-input', el => el.value = \"\");\n    const searchbtn = await this.page.$(\".nav-search-btn\");\n    if (searchbtn) {\n      await searchbtn.click();\n    }\n    return searchbtn;\n  }\n  /**\n   *\n   * @param {object} page\n   * @param {string} keyword\n   * @returns array\n   */\n  async searchdata(searobj: Searchobject): Promise<Array<object>> {\n    if (searobj.page) {\n      this.page = searobj.page;\n    }\n    const result: Array<object> = []\n    if (Array.isArray(searobj.keyword)) {\n      for (const element of searobj.keyword) {\n        const subsearobg: Searchobject = { page: this.page, keyword: element }\n        const linkres = await this.getVideourls(subsearobg);\n        if (linkres) {\n          for (const link of linkres) {\n            result.push(link)\n          }\n        }\n      }\n\n    } else if (typeof searobj.keyword === 'string') {\n      const sersearobg: Searchobject = { page: this.page, keyword: searobj.keyword }\n      const linkres = await this.getVideourls(sersearobg);\n      if (linkres) {\n        for (const link of linkres) {\n\n          result.push(linkres)\n        }\n      }\n    }\n    return result\n    // return await this.getVideourls({ page: this.page, keyword: keyword });\n  }\n  //get video url return in array\n  /**\n   *\n   * @param {object,string,string}\n   * @returns array\n   */\n  async getVideourls(serobj: Searchobject): Promise<Array<Linkurl> | null> {\n    if (serobj.page) {\n      this.page = serobj.page;\n    }\n    if (serobj.cookiesPath) {\n      if (!fs.existsSync(serobj.cookiesPath)) {\n        throw new Error(`Cannot find cookies file at ${serobj.cookiesPath}`);\n      }\n\n      const cookies = JSON.parse(await fs.promises.readFile(serobj.cookiesPath));\n      // console.log(cookies);\n      await this.page.setCookie(...cookies);\n    }\n\n    if (typeof serobj.keyword === 'string') {\n      return await this.handleSearch({ page: this.page, keyword: serobj.keyword })\n    } else {\n      const linkres: Array<Linkurl> = [];\n      for (const keyelement of serobj.keyword) {\n        const res = await this.handleSearch({ page: this.page, keyword: keyelement })\n        if (res) {\n          for (const link of res) {\n            linkres.push(link)\n          }\n        }\n      }\n      return linkres\n    }\n\n  }\n\n  async handleSearch(csobj: clickbtnserobj): Promise<Array<Linkurl> | null> {\n    const searchbtn = await this.clickSearchbtn({\n      page: this.page,\n      keyword: csobj.keyword,\n    });\n\n    const browser = this.page.browser();\n     await browser.waitForTarget((target) =>\n      target.url().includes(\"search.bilibili.com\")\n    );\n    const pages = await browser.pages();\n    let searchPage;\n    for (const page of pages) {\n      const pageurl = await page.url(); // new page now appear!\n      // debug(await page.title())\n      if (pageurl.includes(\"search.bilibili.com\")) {\n        searchPage = page;\n        break;\n      }\n    }\n    if (!searchPage) {\n      throw new Error(\"search page not found\");\n    }\n\n    await autoScroll(searchPage);\n\n    try {\n      await searchPage.waitForSelector(\".vui_pagenation\", { timeout: 5000 });\n    } catch (e) {\n      //if (e instanceof Puppeteererror.TimeoutError) {\n      // Do something if this is a timeout in find page\n      debug(\"not find .vui_pagenation item, the page may not have result\")\n      //return empty promise array\n      return new Promise((resolve) => { resolve(null); });\n      //}\n    }\n    const linkres: Array<Linkurl> = [];\n    // await this.page.$$(\"button.vui_button\", elements=>{\n    //   console.log(elements)\n    // })\n    const linkPage = await searchPage.$$(\"button.vui_button\");\n    debug(linkPage);\n    for (let i = 0; i < linkPage.length; i++) {\n\n      await searchPage.evaluate((element) => {\n        element.click();\n      }, linkPage[i]);\n      const links = await this.getVideolistlink({ page: searchPage });\n      debug(links);\n      links.map((link) => {\n        linkres.push(link);\n      });\n    }\n\n\n    return linkres;\n  }\n  /**\n   *\n   * @param {page} page\n   * @returns array\n   */\n  async getVideolistlink({ page }): Promise<Array<Linkurl>> {\n    if (page) {\n      this.page = page;\n    }\n    // const elHandleArray = await page.$$(\n    //   \".bili-video-card__info--right a:nth-child(1)\"\n    // );\n\n    let linkmap: Array<Linkurl> = [];\n    // const that=this;\n    // debug(this.taskid)\n    // let taskids = 0;\n    // if (this.taskid) {\n    //   taskids = this.taskid\n    // }\n    // linkmap = await this.page.$$eval(\n    //   \".bili-video-card__info--right >a:first-child\",\n    //   (alinks, taskids) => {\n    //     return alinks.map((alink) => {\n    //       const linkobg: Linkurl = { title: '', link: '', lang: 'zh-cn' };\n    //       // if(!that.taskid){\n    //       // linkobg.taskid=that.taskid;\n    //       // }\n    //       if (taskids) {\n    //         linkobg.taskid = taskids\n    //       }\n    //       const herf = alink.getAttribute(\"href\")\n    //       if (herf) {\n    //         linkobg.link = herf\n    //       }\n    //       // console.log(alink);\n    //       const htitle = alink.querySelector(\"h3\");\n    //       if (htitle) {\n    //         const htres = htitle.getAttribute(\"title\");\n    //         if (htres) {\n    //           linkobg.title = htres\n    //         }\n    //       }\n    //       return linkobg;\n    //     });\n    //   }, taskids\n    // );\n\n    linkmap = await this.page.$$eval(\n      \".bili-video-card__info--right >a:first-child\",\n      (alinks) => {\n        return alinks.map((alink) => {\n          const linkobg: Linkurl = { title: '', link: '', lang: 'zh-cn' };\n          // if(!that.taskid){\n          // linkobg.taskid=that.taskid;\n          // }\n          // if (taskids) {\n          //   linkobg.taskid = taskids\n          // }\n          const herf = alink.getAttribute(\"href\")\n          if (herf) {\n            linkobg.link = herf\n            //check if link not start with https\n            if (!herf.startsWith(\"https\")) {\n              linkobg.link = \"https:\" + herf\n            }\n          }\n          // console.log(alink);\n          const htitle = alink.querySelector(\"h3\");\n          if (htitle) {\n            const htres = htitle.getAttribute(\"title\");\n            if (htres) {\n              linkobg.title = htres\n            }\n          }\n          return linkobg;\n        });\n      }\n    );\n\n    // debug(\"query link finish\");\n    // debug(linkmap);\n    // debug(\"show link finish\");\n    // console.log(linkmap)\n\n    await linkmap.forEach((element, index) => {\n      if (!element.link.includes(\"/video/\")) {\n        // debug(\"element has video \"+element)\n        linkmap.splice(index, 1);\n      }\n    });\n    await linkmap.forEach((element, index) => {\n      if (element.link.includes(\"/api/\")) {\n        debug(\"element has api \" + element);\n        linkmap.splice(index, 1);\n      }\n    });\n    //debug(\"filter link finish\");\n    debug(linkmap);\n\n    return linkmap;\n  }\n  /**\n   *\n   * @param {object} page\n   * @param {string} link\n   * @param {string} videopath\n   */\n  async downloadSigleVideo(link: string, videopath: string): Promise<Array<string>> {\n    // if (page) {\n    //   this.page = page;\n    // }\n\n    // console.log(link)\n    // await this.page.goto(link,{\n    //   waitUntil: 'domcontentloaded',\n    // });\n    // console.log(videopath)\n    // const file = fs.createWriteStream(videopath + \"/test.webm\");\n    // await page.evaluate(async () => {\n    // const el = document.querySelector('.bpx-player-video-wrap > video:nth-child(1)');\n    // console.log(el);\n    // const {src} = el.querySelector('source');\n    // console.log(src);\n    // });\n    // const html = await page.$eval('#bilibili-player', el => el.outerHTML);\n    // console.log(html)\n    // const src = await page.$eval(\"#bilibili-player video\",el => el.getAttribute(\"src\"))\n    if (!link) {\n      debug(link)\n      throw new Error(\"link is empty\")\n    }\n    const downloader = new Downloader();\n    downloader.getVideoUrl(link);\n    if (!downloader.url) {\n      throw new Error(\"video url invalid\");\n    }\n    await downloader.getAid();\n\n    const videores = await downloader.getInfo();\n    debug(\"VIDEO INFO\", videores);\n    // const downloadPath ='/home/robertzeng/downloadtest';\n    const filename = Math.random().toString(20).slice(2);\n    const { data, fallback } = await downloader.getData();\n\n    const target = data.durl || data.result.durl;\n    const quality = data.quality || data.result.quality,\n      qualityArray = {\n        112: \"1080P+\",\n        80: \"1080P\",\n        74: \"720P60\",\n        64: \"720P\",\n        48: \"720P\",\n        32: \"480P\",\n        16: \"360P\",\n        15: \"360P\",\n      };\n    const videoQuantity = qualityArray[quality] || \"unknown\";\n    debug(\"videoQuantity is \" + videoQuantity);\n    if (fallback) {\n      throw new Error(\"error happen when get video data\");\n    }\n    // debug(\"echo target\");\n    // debug(target);\n    const result: Array<string> = [];\n    target.forEach((element, part) => {\n      const file = path.join(videopath, `${sanitize(filename)}-${part}.flv`);\n      debug(\"part is %o\", part);\n      debug(\"file name %o\", file);\n\n      const state = downloader.downloadByIndex(\n        part,\n        file,\n        (progress, index) => {\n          const { speed, eta, percentage } = progress; //显示进度条\n          // console.log(\"speed: \" + Math.round(speed / 1e3) + \"KB/s\");\n          // console.log(`eta:${eta}s`);\n        }\n      );\n      result.push(file)\n    });\n\n    return result;\n  }\n  /**\n   * get video detail\n   * @param {object} page\n   * @param {string} link\n   */\n  async getVideodetail(page, link) {\n    if (page) {\n      this.page = page;\n    }\n    await this.page.goto(link, {\n      waitUntil: \"domcontentloaded\",\n    });\n\n    // await this.page.waitForSe\n  }\n}\n\nmodule.exports = {\n  BilibiliScraper: BilibiliScraper,\n};\n","var buffer = {};\n\nvar base64Js = {};\n\nbase64Js.byteLength = byteLength;\nbase64Js.toByteArray = toByteArray;\nbase64Js.fromByteArray = fromByteArray;\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens (b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4);\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n\n  var curByte = 0;\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen;\n\n  var i;\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = (tmp >> 16) & 0xFF;\n    arr[curByte++] = (tmp >> 8) & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4);\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2);\n    arr[curByte++] = (tmp >> 8) & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    );\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    );\n  }\n\n  return parts.join('')\n}\n\nvar ieee754 = {};\n\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\n\nieee754.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = (nBytes * 8) - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? (nBytes - 1) : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n};\n\nieee754.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = (nBytes * 8) - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0);\n  var i = isLE ? 0 : (nBytes - 1);\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n(function (exports) {\n\n\tconst base64 = base64Js;\n\tconst ieee754$1 = ieee754;\n\tconst customInspectSymbol =\n\t  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n\t    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n\t    : null;\n\n\texports.Buffer = Buffer;\n\texports.SlowBuffer = SlowBuffer;\n\texports.INSPECT_MAX_BYTES = 50;\n\n\tconst K_MAX_LENGTH = 0x7fffffff;\n\texports.kMaxLength = K_MAX_LENGTH;\n\tconst { Uint8Array: GlobalUint8Array, ArrayBuffer: GlobalArrayBuffer, SharedArrayBuffer: GlobalSharedArrayBuffer } = globalThis;\n\n\t/**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n\t *               implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * We report that the browser does not support typed arrays if the are not subclassable\n\t * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n\t * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n\t * for __proto__ and has a buggy typed array implementation.\n\t */\n\tBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport();\n\n\tif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n\t    typeof console.error === 'function') {\n\t  console.error(\n\t    'This browser lacks typed array (Uint8Array) support which is required by ' +\n\t    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n\t  );\n\t}\n\n\tfunction typedArraySupport () {\n\t  // Can typed array instances can be augmented?\n\t  try {\n\t    const arr = new GlobalUint8Array(1);\n\t    const proto = { foo: function () { return 42 } };\n\t    Object.setPrototypeOf(proto, GlobalUint8Array.prototype);\n\t    Object.setPrototypeOf(arr, proto);\n\t    return arr.foo() === 42\n\t  } catch (e) {\n\t    return false\n\t  }\n\t}\n\n\tObject.defineProperty(Buffer.prototype, 'parent', {\n\t  enumerable: true,\n\t  get: function () {\n\t    if (!Buffer.isBuffer(this)) return undefined\n\t    return this.buffer\n\t  }\n\t});\n\n\tObject.defineProperty(Buffer.prototype, 'offset', {\n\t  enumerable: true,\n\t  get: function () {\n\t    if (!Buffer.isBuffer(this)) return undefined\n\t    return this.byteOffset\n\t  }\n\t});\n\n\tfunction createBuffer (length) {\n\t  if (length > K_MAX_LENGTH) {\n\t    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n\t  }\n\t  // Return an augmented `Uint8Array` instance\n\t  const buf = new GlobalUint8Array(length);\n\t  Object.setPrototypeOf(buf, Buffer.prototype);\n\t  return buf\n\t}\n\n\t/**\n\t * The Buffer constructor returns instances of `Uint8Array` that have their\n\t * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n\t * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n\t * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n\t * returns a single octet.\n\t *\n\t * The `Uint8Array` prototype remains unmodified.\n\t */\n\n\tfunction Buffer (arg, encodingOrOffset, length) {\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    if (typeof encodingOrOffset === 'string') {\n\t      throw new TypeError(\n\t        'The \"string\" argument must be of type string. Received type number'\n\t      )\n\t    }\n\t    return allocUnsafe(arg)\n\t  }\n\t  return from(arg, encodingOrOffset, length)\n\t}\n\n\tBuffer.poolSize = 8192; // not used by this implementation\n\n\tfunction from (value, encodingOrOffset, length) {\n\t  if (typeof value === 'string') {\n\t    return fromString(value, encodingOrOffset)\n\t  }\n\n\t  if (GlobalArrayBuffer.isView(value)) {\n\t    return fromArrayView(value)\n\t  }\n\n\t  if (value == null) {\n\t    throw new TypeError(\n\t      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n\t      'or Array-like Object. Received type ' + (typeof value)\n\t    )\n\t  }\n\n\t  if (isInstance(value, GlobalArrayBuffer) ||\n\t      (value && isInstance(value.buffer, GlobalArrayBuffer))) {\n\t    return fromArrayBuffer(value, encodingOrOffset, length)\n\t  }\n\n\t  if (typeof GlobalSharedArrayBuffer !== 'undefined' &&\n\t      (isInstance(value, GlobalSharedArrayBuffer) ||\n\t      (value && isInstance(value.buffer, GlobalSharedArrayBuffer)))) {\n\t    return fromArrayBuffer(value, encodingOrOffset, length)\n\t  }\n\n\t  if (typeof value === 'number') {\n\t    throw new TypeError(\n\t      'The \"value\" argument must not be of type number. Received type number'\n\t    )\n\t  }\n\n\t  const valueOf = value.valueOf && value.valueOf();\n\t  if (valueOf != null && valueOf !== value) {\n\t    return Buffer.from(valueOf, encodingOrOffset, length)\n\t  }\n\n\t  const b = fromObject(value);\n\t  if (b) return b\n\n\t  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n\t      typeof value[Symbol.toPrimitive] === 'function') {\n\t    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n\t  }\n\n\t  throw new TypeError(\n\t    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n\t    'or Array-like Object. Received type ' + (typeof value)\n\t  )\n\t}\n\n\t/**\n\t * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n\t * if value is a number.\n\t * Buffer.from(str[, encoding])\n\t * Buffer.from(array)\n\t * Buffer.from(buffer)\n\t * Buffer.from(arrayBuffer[, byteOffset[, length]])\n\t **/\n\tBuffer.from = function (value, encodingOrOffset, length) {\n\t  return from(value, encodingOrOffset, length)\n\t};\n\n\t// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n\t// https://github.com/feross/buffer/pull/148\n\tObject.setPrototypeOf(Buffer.prototype, GlobalUint8Array.prototype);\n\tObject.setPrototypeOf(Buffer, GlobalUint8Array);\n\n\tfunction assertSize (size) {\n\t  if (typeof size !== 'number') {\n\t    throw new TypeError('\"size\" argument must be of type number')\n\t  } else if (size < 0) {\n\t    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n\t  }\n\t}\n\n\tfunction alloc (size, fill, encoding) {\n\t  assertSize(size);\n\t  if (size <= 0) {\n\t    return createBuffer(size)\n\t  }\n\t  if (fill !== undefined) {\n\t    // Only pay attention to encoding if it's a string. This\n\t    // prevents accidentally sending in a number that would\n\t    // be interpreted as a start offset.\n\t    return typeof encoding === 'string'\n\t      ? createBuffer(size).fill(fill, encoding)\n\t      : createBuffer(size).fill(fill)\n\t  }\n\t  return createBuffer(size)\n\t}\n\n\t/**\n\t * Creates a new filled Buffer instance.\n\t * alloc(size[, fill[, encoding]])\n\t **/\n\tBuffer.alloc = function (size, fill, encoding) {\n\t  return alloc(size, fill, encoding)\n\t};\n\n\tfunction allocUnsafe (size) {\n\t  assertSize(size);\n\t  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n\t}\n\n\t/**\n\t * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n\t * */\n\tBuffer.allocUnsafe = function (size) {\n\t  return allocUnsafe(size)\n\t};\n\t/**\n\t * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n\t */\n\tBuffer.allocUnsafeSlow = function (size) {\n\t  return allocUnsafe(size)\n\t};\n\n\tfunction fromString (string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') {\n\t    encoding = 'utf8';\n\t  }\n\n\t  if (!Buffer.isEncoding(encoding)) {\n\t    throw new TypeError('Unknown encoding: ' + encoding)\n\t  }\n\n\t  const length = byteLength(string, encoding) | 0;\n\t  let buf = createBuffer(length);\n\n\t  const actual = buf.write(string, encoding);\n\n\t  if (actual !== length) {\n\t    // Writing a hex string, for example, that contains invalid characters will\n\t    // cause everything after the first invalid character to be ignored. (e.g.\n\t    // 'abxxcd' will be treated as 'ab')\n\t    buf = buf.slice(0, actual);\n\t  }\n\n\t  return buf\n\t}\n\n\tfunction fromArrayLike (array) {\n\t  const length = array.length < 0 ? 0 : checked(array.length) | 0;\n\t  const buf = createBuffer(length);\n\t  for (let i = 0; i < length; i += 1) {\n\t    buf[i] = array[i] & 255;\n\t  }\n\t  return buf\n\t}\n\n\tfunction fromArrayView (arrayView) {\n\t  if (isInstance(arrayView, GlobalUint8Array)) {\n\t    const copy = new GlobalUint8Array(arrayView);\n\t    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n\t  }\n\t  return fromArrayLike(arrayView)\n\t}\n\n\tfunction fromArrayBuffer (array, byteOffset, length) {\n\t  if (byteOffset < 0 || array.byteLength < byteOffset) {\n\t    throw new RangeError('\"offset\" is outside of buffer bounds')\n\t  }\n\n\t  if (array.byteLength < byteOffset + (length || 0)) {\n\t    throw new RangeError('\"length\" is outside of buffer bounds')\n\t  }\n\n\t  let buf;\n\t  if (byteOffset === undefined && length === undefined) {\n\t    buf = new GlobalUint8Array(array);\n\t  } else if (length === undefined) {\n\t    buf = new GlobalUint8Array(array, byteOffset);\n\t  } else {\n\t    buf = new GlobalUint8Array(array, byteOffset, length);\n\t  }\n\n\t  // Return an augmented `Uint8Array` instance\n\t  Object.setPrototypeOf(buf, Buffer.prototype);\n\n\t  return buf\n\t}\n\n\tfunction fromObject (obj) {\n\t  if (Buffer.isBuffer(obj)) {\n\t    const len = checked(obj.length) | 0;\n\t    const buf = createBuffer(len);\n\n\t    if (buf.length === 0) {\n\t      return buf\n\t    }\n\n\t    obj.copy(buf, 0, 0, len);\n\t    return buf\n\t  }\n\n\t  if (obj.length !== undefined) {\n\t    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n\t      return createBuffer(0)\n\t    }\n\t    return fromArrayLike(obj)\n\t  }\n\n\t  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n\t    return fromArrayLike(obj.data)\n\t  }\n\t}\n\n\tfunction checked (length) {\n\t  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= K_MAX_LENGTH) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n\t}\n\n\tfunction SlowBuffer (length) {\n\t  if (+length != length) { // eslint-disable-line eqeqeq\n\t    length = 0;\n\t  }\n\t  return Buffer.alloc(+length)\n\t}\n\n\tBuffer.isBuffer = function isBuffer (b) {\n\t  return b != null && b._isBuffer === true &&\n\t    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n\t};\n\n\tBuffer.compare = function compare (a, b) {\n\t  if (isInstance(a, GlobalUint8Array)) a = Buffer.from(a, a.offset, a.byteLength);\n\t  if (isInstance(b, GlobalUint8Array)) b = Buffer.from(b, b.offset, b.byteLength);\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError(\n\t      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n\t    )\n\t  }\n\n\t  if (a === b) return 0\n\n\t  let x = a.length;\n\t  let y = b.length;\n\n\t  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n\t    if (a[i] !== b[i]) {\n\t      x = a[i];\n\t      y = b[i];\n\t      break\n\t    }\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n\t};\n\n\tBuffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'latin1':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n\t};\n\n\tBuffer.concat = function concat (list, length) {\n\t  if (!Array.isArray(list)) {\n\t    throw new TypeError('\"list\" argument must be an Array of Buffers')\n\t  }\n\n\t  if (list.length === 0) {\n\t    return Buffer.alloc(0)\n\t  }\n\n\t  let i;\n\t  if (length === undefined) {\n\t    length = 0;\n\t    for (i = 0; i < list.length; ++i) {\n\t      length += list[i].length;\n\t    }\n\t  }\n\n\t  const buffer = Buffer.allocUnsafe(length);\n\t  let pos = 0;\n\t  for (i = 0; i < list.length; ++i) {\n\t    let buf = list[i];\n\t    if (isInstance(buf, GlobalUint8Array)) {\n\t      if (pos + buf.length > buffer.length) {\n\t        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf);\n\t        buf.copy(buffer, pos);\n\t      } else {\n\t        GlobalUint8Array.prototype.set.call(\n\t          buffer,\n\t          buf,\n\t          pos\n\t        );\n\t      }\n\t    } else if (!Buffer.isBuffer(buf)) {\n\t      throw new TypeError('\"list\" argument must be an Array of Buffers')\n\t    } else {\n\t      buf.copy(buffer, pos);\n\t    }\n\t    pos += buf.length;\n\t  }\n\t  return buffer\n\t};\n\n\tfunction byteLength (string, encoding) {\n\t  if (Buffer.isBuffer(string)) {\n\t    return string.length\n\t  }\n\t  if (GlobalArrayBuffer.isView(string) || isInstance(string, GlobalArrayBuffer)) {\n\t    return string.byteLength\n\t  }\n\t  if (typeof string !== 'string') {\n\t    throw new TypeError(\n\t      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n\t      'Received type ' + typeof string\n\t    )\n\t  }\n\n\t  const len = string.length;\n\t  const mustMatch = (arguments.length > 2 && arguments[2] === true);\n\t  if (!mustMatch && len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  let loweredCase = false;\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'latin1':\n\t      case 'binary':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) {\n\t          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n\t        }\n\t        encoding = ('' + encoding).toLowerCase();\n\t        loweredCase = true;\n\t    }\n\t  }\n\t}\n\tBuffer.byteLength = byteLength;\n\n\tfunction slowToString (encoding, start, end) {\n\t  let loweredCase = false;\n\n\t  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n\t  // property of a typed array.\n\n\t  // This behaves neither like String nor Uint8Array in that we set start/end\n\t  // to their upper/lower bounds if the value passed is out of range.\n\t  // undefined is handled specially as per ECMA-262 6th Edition,\n\t  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\t  if (start === undefined || start < 0) {\n\t    start = 0;\n\t  }\n\t  // Return early if start > this.length. Done here to prevent potential uint32\n\t  // coercion fail below.\n\t  if (start > this.length) {\n\t    return ''\n\t  }\n\n\t  if (end === undefined || end > this.length) {\n\t    end = this.length;\n\t  }\n\n\t  if (end <= 0) {\n\t    return ''\n\t  }\n\n\t  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n\t  end >>>= 0;\n\t  start >>>= 0;\n\n\t  if (end <= start) {\n\t    return ''\n\t  }\n\n\t  if (!encoding) encoding = 'utf8';\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'latin1':\n\t      case 'binary':\n\t        return latin1Slice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase();\n\t        loweredCase = true;\n\t    }\n\t  }\n\t}\n\n\t// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n\t// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n\t// reliably in a browserify context because there could be multiple different\n\t// copies of the 'buffer' package in use. This method works even for Buffer\n\t// instances that were created from another copy of the `buffer` package.\n\t// See: https://github.com/feross/buffer/issues/154\n\tBuffer.prototype._isBuffer = true;\n\n\tfunction swap (b, n, m) {\n\t  const i = b[n];\n\t  b[n] = b[m];\n\t  b[m] = i;\n\t}\n\n\tBuffer.prototype.swap16 = function swap16 () {\n\t  const len = this.length;\n\t  if (len % 2 !== 0) {\n\t    throw new RangeError('Buffer size must be a multiple of 16-bits')\n\t  }\n\t  for (let i = 0; i < len; i += 2) {\n\t    swap(this, i, i + 1);\n\t  }\n\t  return this\n\t};\n\n\tBuffer.prototype.swap32 = function swap32 () {\n\t  const len = this.length;\n\t  if (len % 4 !== 0) {\n\t    throw new RangeError('Buffer size must be a multiple of 32-bits')\n\t  }\n\t  for (let i = 0; i < len; i += 4) {\n\t    swap(this, i, i + 3);\n\t    swap(this, i + 1, i + 2);\n\t  }\n\t  return this\n\t};\n\n\tBuffer.prototype.swap64 = function swap64 () {\n\t  const len = this.length;\n\t  if (len % 8 !== 0) {\n\t    throw new RangeError('Buffer size must be a multiple of 64-bits')\n\t  }\n\t  for (let i = 0; i < len; i += 8) {\n\t    swap(this, i, i + 7);\n\t    swap(this, i + 1, i + 6);\n\t    swap(this, i + 2, i + 5);\n\t    swap(this, i + 3, i + 4);\n\t  }\n\t  return this\n\t};\n\n\tBuffer.prototype.toString = function toString () {\n\t  const length = this.length;\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n\t};\n\n\tBuffer.prototype.toLocaleString = Buffer.prototype.toString;\n\n\tBuffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n\t};\n\n\tBuffer.prototype.inspect = function inspect () {\n\t  let str = '';\n\t  const max = exports.INSPECT_MAX_BYTES;\n\t  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim();\n\t  if (this.length > max) str += ' ... ';\n\t  return '<Buffer ' + str + '>'\n\t};\n\tif (customInspectSymbol) {\n\t  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect;\n\t}\n\n\tBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n\t  if (isInstance(target, GlobalUint8Array)) {\n\t    target = Buffer.from(target, target.offset, target.byteLength);\n\t  }\n\t  if (!Buffer.isBuffer(target)) {\n\t    throw new TypeError(\n\t      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n\t      'Received type ' + (typeof target)\n\t    )\n\t  }\n\n\t  if (start === undefined) {\n\t    start = 0;\n\t  }\n\t  if (end === undefined) {\n\t    end = target ? target.length : 0;\n\t  }\n\t  if (thisStart === undefined) {\n\t    thisStart = 0;\n\t  }\n\t  if (thisEnd === undefined) {\n\t    thisEnd = this.length;\n\t  }\n\n\t  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n\t    throw new RangeError('out of range index')\n\t  }\n\n\t  if (thisStart >= thisEnd && start >= end) {\n\t    return 0\n\t  }\n\t  if (thisStart >= thisEnd) {\n\t    return -1\n\t  }\n\t  if (start >= end) {\n\t    return 1\n\t  }\n\n\t  start >>>= 0;\n\t  end >>>= 0;\n\t  thisStart >>>= 0;\n\t  thisEnd >>>= 0;\n\n\t  if (this === target) return 0\n\n\t  let x = thisEnd - thisStart;\n\t  let y = end - start;\n\t  const len = Math.min(x, y);\n\n\t  const thisCopy = this.slice(thisStart, thisEnd);\n\t  const targetCopy = target.slice(start, end);\n\n\t  for (let i = 0; i < len; ++i) {\n\t    if (thisCopy[i] !== targetCopy[i]) {\n\t      x = thisCopy[i];\n\t      y = targetCopy[i];\n\t      break\n\t    }\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n\t};\n\n\t// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n\t// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n\t//\n\t// Arguments:\n\t// - buffer - a Buffer to search\n\t// - val - a string, Buffer, or number\n\t// - byteOffset - an index into `buffer`; will be clamped to an int32\n\t// - encoding - an optional encoding, relevant is val is a string\n\t// - dir - true for indexOf, false for lastIndexOf\n\tfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n\t  // Empty buffer means no match\n\t  if (buffer.length === 0) return -1\n\n\t  // Normalize byteOffset\n\t  if (typeof byteOffset === 'string') {\n\t    encoding = byteOffset;\n\t    byteOffset = 0;\n\t  } else if (byteOffset > 0x7fffffff) {\n\t    byteOffset = 0x7fffffff;\n\t  } else if (byteOffset < -0x80000000) {\n\t    byteOffset = -0x80000000;\n\t  }\n\t  byteOffset = +byteOffset; // Coerce to Number.\n\t  if (numberIsNaN(byteOffset)) {\n\t    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n\t    byteOffset = dir ? 0 : (buffer.length - 1);\n\t  }\n\n\t  // Normalize byteOffset: negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\t  if (byteOffset >= buffer.length) {\n\t    if (dir) return -1\n\t    else byteOffset = buffer.length - 1;\n\t  } else if (byteOffset < 0) {\n\t    if (dir) byteOffset = 0;\n\t    else return -1\n\t  }\n\n\t  // Normalize val\n\t  if (typeof val === 'string') {\n\t    val = Buffer.from(val, encoding);\n\t  }\n\n\t  // Finally, search either indexOf (if dir is true) or lastIndexOf\n\t  if (Buffer.isBuffer(val)) {\n\t    // Special case: looking for empty string/buffer always fails\n\t    if (val.length === 0) {\n\t      return -1\n\t    }\n\t    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n\t  } else if (typeof val === 'number') {\n\t    val = val & 0xFF; // Search for a byte value [0-255]\n\t    if (typeof GlobalUint8Array.prototype.indexOf === 'function') {\n\t      if (dir) {\n\t        return GlobalUint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n\t      } else {\n\t        return GlobalUint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n\t      }\n\t    }\n\t    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n\t}\n\n\tfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n\t  let indexSize = 1;\n\t  let arrLength = arr.length;\n\t  let valLength = val.length;\n\n\t  if (encoding !== undefined) {\n\t    encoding = String(encoding).toLowerCase();\n\t    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n\t        encoding === 'utf16le' || encoding === 'utf-16le') {\n\t      if (arr.length < 2 || val.length < 2) {\n\t        return -1\n\t      }\n\t      indexSize = 2;\n\t      arrLength /= 2;\n\t      valLength /= 2;\n\t      byteOffset /= 2;\n\t    }\n\t  }\n\n\t  function read (buf, i) {\n\t    if (indexSize === 1) {\n\t      return buf[i]\n\t    } else {\n\t      return buf.readUInt16BE(i * indexSize)\n\t    }\n\t  }\n\n\t  let i;\n\t  if (dir) {\n\t    let foundIndex = -1;\n\t    for (i = byteOffset; i < arrLength; i++) {\n\t      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n\t        if (foundIndex === -1) foundIndex = i;\n\t        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n\t      } else {\n\t        if (foundIndex !== -1) i -= i - foundIndex;\n\t        foundIndex = -1;\n\t      }\n\t    }\n\t  } else {\n\t    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\t    for (i = byteOffset; i >= 0; i--) {\n\t      let found = true;\n\t      for (let j = 0; j < valLength; j++) {\n\t        if (read(arr, i + j) !== read(val, j)) {\n\t          found = false;\n\t          break\n\t        }\n\t      }\n\t      if (found) return i\n\t    }\n\t  }\n\n\t  return -1\n\t}\n\n\tBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n\t  return this.indexOf(val, byteOffset, encoding) !== -1\n\t};\n\n\tBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n\t  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n\t};\n\n\tBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n\t  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n\t};\n\n\tfunction hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0;\n\t  const remaining = buf.length - offset;\n\t  if (!length) {\n\t    length = remaining;\n\t  } else {\n\t    length = Number(length);\n\t    if (length > remaining) {\n\t      length = remaining;\n\t    }\n\t  }\n\n\t  const strLen = string.length;\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2;\n\t  }\n\t  let i;\n\t  for (i = 0; i < length; ++i) {\n\t    const parsed = parseInt(string.substr(i * 2, 2), 16);\n\t    if (numberIsNaN(parsed)) return i\n\t    buf[offset + i] = parsed;\n\t  }\n\t  return i\n\t}\n\n\tfunction utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\n\tfunction asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n\t}\n\n\tfunction base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n\t}\n\n\tfunction ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\n\tBuffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8';\n\t    length = this.length;\n\t    offset = 0;\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset;\n\t    length = this.length;\n\t    offset = 0;\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset >>> 0;\n\t    if (isFinite(length)) {\n\t      length = length >>> 0;\n\t      if (encoding === undefined) encoding = 'utf8';\n\t    } else {\n\t      encoding = length;\n\t      length = undefined;\n\t    }\n\t  } else {\n\t    throw new Error(\n\t      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n\t    )\n\t  }\n\n\t  const remaining = this.length - offset;\n\t  if (length === undefined || length > remaining) length = remaining;\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('Attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8';\n\n\t  let loweredCase = false;\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t      case 'latin1':\n\t      case 'binary':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase();\n\t        loweredCase = true;\n\t    }\n\t  }\n\t};\n\n\tBuffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n\t};\n\n\tfunction base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n\t}\n\n\tfunction utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end);\n\t  const res = [];\n\n\t  let i = start;\n\t  while (i < end) {\n\t    const firstByte = buf[i];\n\t    let codePoint = null;\n\t    let bytesPerSequence = (firstByte > 0xEF)\n\t      ? 4\n\t      : (firstByte > 0xDF)\n\t          ? 3\n\t          : (firstByte > 0xBF)\n\t              ? 2\n\t              : 1;\n\n\t    if (i + bytesPerSequence <= end) {\n\t      let secondByte, thirdByte, fourthByte, tempCodePoint;\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte;\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1];\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint;\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1];\n\t          thirdByte = buf[i + 2];\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint;\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1];\n\t          thirdByte = buf[i + 2];\n\t          fourthByte = buf[i + 3];\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint;\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD;\n\t      bytesPerSequence = 1;\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000;\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n\t      codePoint = 0xDC00 | codePoint & 0x3FF;\n\t    }\n\n\t    res.push(codePoint);\n\t    i += bytesPerSequence;\n\t  }\n\n\t  return decodeCodePointsArray(res)\n\t}\n\n\t// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n\t// the lowest limit is Chrome, with 0x10000 args.\n\t// We go 1 magnitude less, for safety\n\tconst MAX_ARGUMENTS_LENGTH = 0x1000;\n\n\tfunction decodeCodePointsArray (codePoints) {\n\t  const len = codePoints.length;\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  let res = '';\n\t  let i = 0;\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    );\n\t  }\n\t  return res\n\t}\n\n\tfunction asciiSlice (buf, start, end) {\n\t  let ret = '';\n\t  end = Math.min(buf.length, end);\n\n\t  for (let i = start; i < end; ++i) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F);\n\t  }\n\t  return ret\n\t}\n\n\tfunction latin1Slice (buf, start, end) {\n\t  let ret = '';\n\t  end = Math.min(buf.length, end);\n\n\t  for (let i = start; i < end; ++i) {\n\t    ret += String.fromCharCode(buf[i]);\n\t  }\n\t  return ret\n\t}\n\n\tfunction hexSlice (buf, start, end) {\n\t  const len = buf.length;\n\n\t  if (!start || start < 0) start = 0;\n\t  if (!end || end < 0 || end > len) end = len;\n\n\t  let out = '';\n\t  for (let i = start; i < end; ++i) {\n\t    out += hexSliceLookupTable[buf[i]];\n\t  }\n\t  return out\n\t}\n\n\tfunction utf16leSlice (buf, start, end) {\n\t  const bytes = buf.slice(start, end);\n\t  let res = '';\n\t  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n\t  for (let i = 0; i < bytes.length - 1; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256));\n\t  }\n\t  return res\n\t}\n\n\tBuffer.prototype.slice = function slice (start, end) {\n\t  const len = this.length;\n\t  start = ~~start;\n\t  end = end === undefined ? len : ~~end;\n\n\t  if (start < 0) {\n\t    start += len;\n\t    if (start < 0) start = 0;\n\t  } else if (start > len) {\n\t    start = len;\n\t  }\n\n\t  if (end < 0) {\n\t    end += len;\n\t    if (end < 0) end = 0;\n\t  } else if (end > len) {\n\t    end = len;\n\t  }\n\n\t  if (end < start) end = start;\n\n\t  const newBuf = this.subarray(start, end);\n\t  // Return an augmented `Uint8Array` instance\n\t  Object.setPrototypeOf(newBuf, Buffer.prototype);\n\n\t  return newBuf\n\t};\n\n\t/*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n\tfunction checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n\t}\n\n\tBuffer.prototype.readUintLE =\n\tBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset >>> 0;\n\t  byteLength = byteLength >>> 0;\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t  let val = this[offset];\n\t  let mul = 1;\n\t  let i = 0;\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul;\n\t  }\n\n\t  return val\n\t};\n\n\tBuffer.prototype.readUintBE =\n\tBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset >>> 0;\n\t  byteLength = byteLength >>> 0;\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length);\n\t  }\n\n\t  let val = this[offset + --byteLength];\n\t  let mul = 1;\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul;\n\t  }\n\n\t  return val\n\t};\n\n\tBuffer.prototype.readUint8 =\n\tBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 1, this.length);\n\t  return this[offset]\n\t};\n\n\tBuffer.prototype.readUint16LE =\n\tBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 2, this.length);\n\t  return this[offset] | (this[offset + 1] << 8)\n\t};\n\n\tBuffer.prototype.readUint16BE =\n\tBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 2, this.length);\n\t  return (this[offset] << 8) | this[offset + 1]\n\t};\n\n\tBuffer.prototype.readUint32LE =\n\tBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 4, this.length);\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n\t};\n\n\tBuffer.prototype.readUint32BE =\n\tBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 4, this.length);\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n\t};\n\n\tBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n\t  offset = offset >>> 0;\n\t  validateNumber(offset, 'offset');\n\t  const first = this[offset];\n\t  const last = this[offset + 7];\n\t  if (first === undefined || last === undefined) {\n\t    boundsError(offset, this.length - 8);\n\t  }\n\n\t  const lo = first +\n\t    this[++offset] * 2 ** 8 +\n\t    this[++offset] * 2 ** 16 +\n\t    this[++offset] * 2 ** 24;\n\n\t  const hi = this[++offset] +\n\t    this[++offset] * 2 ** 8 +\n\t    this[++offset] * 2 ** 16 +\n\t    last * 2 ** 24;\n\n\t  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n\t});\n\n\tBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n\t  offset = offset >>> 0;\n\t  validateNumber(offset, 'offset');\n\t  const first = this[offset];\n\t  const last = this[offset + 7];\n\t  if (first === undefined || last === undefined) {\n\t    boundsError(offset, this.length - 8);\n\t  }\n\n\t  const hi = first * 2 ** 24 +\n\t    this[++offset] * 2 ** 16 +\n\t    this[++offset] * 2 ** 8 +\n\t    this[++offset];\n\n\t  const lo = this[++offset] * 2 ** 24 +\n\t    this[++offset] * 2 ** 16 +\n\t    this[++offset] * 2 ** 8 +\n\t    last;\n\n\t  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n\t});\n\n\tBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset >>> 0;\n\t  byteLength = byteLength >>> 0;\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t  let val = this[offset];\n\t  let mul = 1;\n\t  let i = 0;\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul;\n\t  }\n\t  mul *= 0x80;\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n\t  return val\n\t};\n\n\tBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset >>> 0;\n\t  byteLength = byteLength >>> 0;\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t  let i = byteLength;\n\t  let mul = 1;\n\t  let val = this[offset + --i];\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul;\n\t  }\n\t  mul *= 0x80;\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n\t  return val\n\t};\n\n\tBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 1, this.length);\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n\t};\n\n\tBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 2, this.length);\n\t  const val = this[offset] | (this[offset + 1] << 8);\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t};\n\n\tBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 2, this.length);\n\t  const val = this[offset + 1] | (this[offset] << 8);\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t};\n\n\tBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 4, this.length);\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n\t};\n\n\tBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 4, this.length);\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n\t};\n\n\tBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n\t  offset = offset >>> 0;\n\t  validateNumber(offset, 'offset');\n\t  const first = this[offset];\n\t  const last = this[offset + 7];\n\t  if (first === undefined || last === undefined) {\n\t    boundsError(offset, this.length - 8);\n\t  }\n\n\t  const val = this[offset + 4] +\n\t    this[offset + 5] * 2 ** 8 +\n\t    this[offset + 6] * 2 ** 16 +\n\t    (last << 24); // Overflow\n\n\t  return (BigInt(val) << BigInt(32)) +\n\t    BigInt(first +\n\t    this[++offset] * 2 ** 8 +\n\t    this[++offset] * 2 ** 16 +\n\t    this[++offset] * 2 ** 24)\n\t});\n\n\tBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n\t  offset = offset >>> 0;\n\t  validateNumber(offset, 'offset');\n\t  const first = this[offset];\n\t  const last = this[offset + 7];\n\t  if (first === undefined || last === undefined) {\n\t    boundsError(offset, this.length - 8);\n\t  }\n\n\t  const val = (first << 24) + // Overflow\n\t    this[++offset] * 2 ** 16 +\n\t    this[++offset] * 2 ** 8 +\n\t    this[++offset];\n\n\t  return (BigInt(val) << BigInt(32)) +\n\t    BigInt(this[++offset] * 2 ** 24 +\n\t    this[++offset] * 2 ** 16 +\n\t    this[++offset] * 2 ** 8 +\n\t    last)\n\t});\n\n\tBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 4, this.length);\n\t  return ieee754$1.read(this, offset, true, 23, 4)\n\t};\n\n\tBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 4, this.length);\n\t  return ieee754$1.read(this, offset, false, 23, 4)\n\t};\n\n\tBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 8, this.length);\n\t  return ieee754$1.read(this, offset, true, 52, 8)\n\t};\n\n\tBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkOffset(offset, 8, this.length);\n\t  return ieee754$1.read(this, offset, false, 52, 8)\n\t};\n\n\tfunction checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n\t}\n\n\tBuffer.prototype.writeUintLE =\n\tBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  byteLength = byteLength >>> 0;\n\t  if (!noAssert) {\n\t    const maxBytes = Math.pow(2, 8 * byteLength) - 1;\n\t    checkInt(this, value, offset, byteLength, maxBytes, 0);\n\t  }\n\n\t  let mul = 1;\n\t  let i = 0;\n\t  this[offset] = value & 0xFF;\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF;\n\t  }\n\n\t  return offset + byteLength\n\t};\n\n\tBuffer.prototype.writeUintBE =\n\tBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  byteLength = byteLength >>> 0;\n\t  if (!noAssert) {\n\t    const maxBytes = Math.pow(2, 8 * byteLength) - 1;\n\t    checkInt(this, value, offset, byteLength, maxBytes, 0);\n\t  }\n\n\t  let i = byteLength - 1;\n\t  let mul = 1;\n\t  this[offset + i] = value & 0xFF;\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF;\n\t  }\n\n\t  return offset + byteLength\n\t};\n\n\tBuffer.prototype.writeUint8 =\n\tBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n\t  this[offset] = (value & 0xff);\n\t  return offset + 1\n\t};\n\n\tBuffer.prototype.writeUint16LE =\n\tBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\t  this[offset] = (value & 0xff);\n\t  this[offset + 1] = (value >>> 8);\n\t  return offset + 2\n\t};\n\n\tBuffer.prototype.writeUint16BE =\n\tBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\t  this[offset] = (value >>> 8);\n\t  this[offset + 1] = (value & 0xff);\n\t  return offset + 2\n\t};\n\n\tBuffer.prototype.writeUint32LE =\n\tBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\t  this[offset + 3] = (value >>> 24);\n\t  this[offset + 2] = (value >>> 16);\n\t  this[offset + 1] = (value >>> 8);\n\t  this[offset] = (value & 0xff);\n\t  return offset + 4\n\t};\n\n\tBuffer.prototype.writeUint32BE =\n\tBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\t  this[offset] = (value >>> 24);\n\t  this[offset + 1] = (value >>> 16);\n\t  this[offset + 2] = (value >>> 8);\n\t  this[offset + 3] = (value & 0xff);\n\t  return offset + 4\n\t};\n\n\tfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n\t  checkIntBI(value, min, max, buf, offset, 7);\n\n\t  let lo = Number(value & BigInt(0xffffffff));\n\t  buf[offset++] = lo;\n\t  lo = lo >> 8;\n\t  buf[offset++] = lo;\n\t  lo = lo >> 8;\n\t  buf[offset++] = lo;\n\t  lo = lo >> 8;\n\t  buf[offset++] = lo;\n\t  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff));\n\t  buf[offset++] = hi;\n\t  hi = hi >> 8;\n\t  buf[offset++] = hi;\n\t  hi = hi >> 8;\n\t  buf[offset++] = hi;\n\t  hi = hi >> 8;\n\t  buf[offset++] = hi;\n\t  return offset\n\t}\n\n\tfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n\t  checkIntBI(value, min, max, buf, offset, 7);\n\n\t  let lo = Number(value & BigInt(0xffffffff));\n\t  buf[offset + 7] = lo;\n\t  lo = lo >> 8;\n\t  buf[offset + 6] = lo;\n\t  lo = lo >> 8;\n\t  buf[offset + 5] = lo;\n\t  lo = lo >> 8;\n\t  buf[offset + 4] = lo;\n\t  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff));\n\t  buf[offset + 3] = hi;\n\t  hi = hi >> 8;\n\t  buf[offset + 2] = hi;\n\t  hi = hi >> 8;\n\t  buf[offset + 1] = hi;\n\t  hi = hi >> 8;\n\t  buf[offset] = hi;\n\t  return offset + 8\n\t}\n\n\tBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n\t  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n\t});\n\n\tBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n\t  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n\t});\n\n\tBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) {\n\t    const limit = Math.pow(2, (8 * byteLength) - 1);\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n\t  }\n\n\t  let i = 0;\n\t  let mul = 1;\n\t  let sub = 0;\n\t  this[offset] = value & 0xFF;\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n\t      sub = 1;\n\t    }\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n\t  }\n\n\t  return offset + byteLength\n\t};\n\n\tBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) {\n\t    const limit = Math.pow(2, (8 * byteLength) - 1);\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n\t  }\n\n\t  let i = byteLength - 1;\n\t  let mul = 1;\n\t  let sub = 0;\n\t  this[offset + i] = value & 0xFF;\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n\t      sub = 1;\n\t    }\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n\t  }\n\n\t  return offset + byteLength\n\t};\n\n\tBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n\t  if (value < 0) value = 0xff + value + 1;\n\t  this[offset] = (value & 0xff);\n\t  return offset + 1\n\t};\n\n\tBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\t  this[offset] = (value & 0xff);\n\t  this[offset + 1] = (value >>> 8);\n\t  return offset + 2\n\t};\n\n\tBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\t  this[offset] = (value >>> 8);\n\t  this[offset + 1] = (value & 0xff);\n\t  return offset + 2\n\t};\n\n\tBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\t  this[offset] = (value & 0xff);\n\t  this[offset + 1] = (value >>> 8);\n\t  this[offset + 2] = (value >>> 16);\n\t  this[offset + 3] = (value >>> 24);\n\t  return offset + 4\n\t};\n\n\tBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\t  if (value < 0) value = 0xffffffff + value + 1;\n\t  this[offset] = (value >>> 24);\n\t  this[offset + 1] = (value >>> 16);\n\t  this[offset + 2] = (value >>> 8);\n\t  this[offset + 3] = (value & 0xff);\n\t  return offset + 4\n\t};\n\n\tBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n\t  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n\t});\n\n\tBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n\t  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n\t});\n\n\tfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n\t  if (offset < 0) throw new RangeError('Index out of range')\n\t}\n\n\tfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4);\n\t  }\n\t  ieee754$1.write(buf, value, offset, littleEndian, 23, 4);\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n\t};\n\n\tBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n\t};\n\n\tfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  value = +value;\n\t  offset = offset >>> 0;\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8);\n\t  }\n\t  ieee754$1.write(buf, value, offset, littleEndian, 52, 8);\n\t  return offset + 8\n\t}\n\n\tBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n\t};\n\n\tBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n\t};\n\n\t// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\tBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n\t  if (!start) start = 0;\n\t  if (!end && end !== 0) end = this.length;\n\t  if (targetStart >= target.length) targetStart = target.length;\n\t  if (!targetStart) targetStart = 0;\n\t  if (end > 0 && end < start) end = start;\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length;\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start;\n\t  }\n\n\t  const len = end - start;\n\n\t  if (this === target && typeof GlobalUint8Array.prototype.copyWithin === 'function') {\n\t    // Use built-in when available, missing from IE11\n\t    this.copyWithin(targetStart, start, end);\n\t  } else {\n\t    GlobalUint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, end),\n\t      targetStart\n\t    );\n\t  }\n\n\t  return len\n\t};\n\n\t// Usage:\n\t//    buffer.fill(number[, offset[, end]])\n\t//    buffer.fill(buffer[, offset[, end]])\n\t//    buffer.fill(string[, offset[, end]][, encoding])\n\tBuffer.prototype.fill = function fill (val, start, end, encoding) {\n\t  // Handle string cases:\n\t  if (typeof val === 'string') {\n\t    if (typeof start === 'string') {\n\t      encoding = start;\n\t      start = 0;\n\t      end = this.length;\n\t    } else if (typeof end === 'string') {\n\t      encoding = end;\n\t      end = this.length;\n\t    }\n\t    if (encoding !== undefined && typeof encoding !== 'string') {\n\t      throw new TypeError('encoding must be a string')\n\t    }\n\t    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n\t      throw new TypeError('Unknown encoding: ' + encoding)\n\t    }\n\t    if (val.length === 1) {\n\t      const code = val.charCodeAt(0);\n\t      if ((encoding === 'utf8' && code < 128) ||\n\t          encoding === 'latin1') {\n\t        // Fast path: If `val` fits into a single byte, use that numeric value.\n\t        val = code;\n\t      }\n\t    }\n\t  } else if (typeof val === 'number') {\n\t    val = val & 255;\n\t  } else if (typeof val === 'boolean') {\n\t    val = Number(val);\n\t  }\n\n\t  // Invalid ranges are not set to a default, so can range check early.\n\t  if (start < 0 || this.length < start || this.length < end) {\n\t    throw new RangeError('Out of range index')\n\t  }\n\n\t  if (end <= start) {\n\t    return this\n\t  }\n\n\t  start = start >>> 0;\n\t  end = end === undefined ? this.length : end >>> 0;\n\n\t  if (!val) val = 0;\n\n\t  let i;\n\t  if (typeof val === 'number') {\n\t    for (i = start; i < end; ++i) {\n\t      this[i] = val;\n\t    }\n\t  } else {\n\t    const bytes = Buffer.isBuffer(val)\n\t      ? val\n\t      : Buffer.from(val, encoding);\n\t    const len = bytes.length;\n\t    if (len === 0) {\n\t      throw new TypeError('The value \"' + val +\n\t        '\" is invalid for argument \"value\"')\n\t    }\n\t    for (i = 0; i < end - start; ++i) {\n\t      this[i + start] = bytes[i % len];\n\t    }\n\t  }\n\n\t  return this\n\t};\n\n\t// CUSTOM ERRORS\n\t// =============\n\n\t// Simplified versions from Node, changed for Buffer-only usage\n\tconst errors = {};\n\tfunction E (sym, getMessage, Base) {\n\t  errors[sym] = class NodeError extends Base {\n\t    constructor () {\n\t      super();\n\n\t      Object.defineProperty(this, 'message', {\n\t        value: getMessage.apply(this, arguments),\n\t        writable: true,\n\t        configurable: true\n\t      });\n\n\t      // Add the error code to the name to include it in the stack trace.\n\t      this.name = `${this.name} [${sym}]`;\n\t      // Access the stack to generate the error message including the error code\n\t      // from the name.\n\t      this.stack; // eslint-disable-line no-unused-expressions\n\t      // Reset the name to the actual name.\n\t      delete this.name;\n\t    }\n\n\t    get code () {\n\t      return sym\n\t    }\n\n\t    set code (value) {\n\t      Object.defineProperty(this, 'code', {\n\t        configurable: true,\n\t        enumerable: true,\n\t        value,\n\t        writable: true\n\t      });\n\t    }\n\n\t    toString () {\n\t      return `${this.name} [${sym}]: ${this.message}`\n\t    }\n\t  };\n\t}\n\n\tE('ERR_BUFFER_OUT_OF_BOUNDS',\n\t  function (name) {\n\t    if (name) {\n\t      return `${name} is outside of buffer bounds`\n\t    }\n\n\t    return 'Attempt to access memory outside buffer bounds'\n\t  }, RangeError);\n\tE('ERR_INVALID_ARG_TYPE',\n\t  function (name, actual) {\n\t    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n\t  }, TypeError);\n\tE('ERR_OUT_OF_RANGE',\n\t  function (str, range, input) {\n\t    let msg = `The value of \"${str}\" is out of range.`;\n\t    let received = input;\n\t    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n\t      received = addNumericalSeparator(String(input));\n\t    } else if (typeof input === 'bigint') {\n\t      received = String(input);\n\t      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n\t        received = addNumericalSeparator(received);\n\t      }\n\t      received += 'n';\n\t    }\n\t    msg += ` It must be ${range}. Received ${received}`;\n\t    return msg\n\t  }, RangeError);\n\n\tfunction addNumericalSeparator (val) {\n\t  let res = '';\n\t  let i = val.length;\n\t  const start = val[0] === '-' ? 1 : 0;\n\t  for (; i >= start + 4; i -= 3) {\n\t    res = `_${val.slice(i - 3, i)}${res}`;\n\t  }\n\t  return `${val.slice(0, i)}${res}`\n\t}\n\n\t// CHECK FUNCTIONS\n\t// ===============\n\n\tfunction checkBounds (buf, offset, byteLength) {\n\t  validateNumber(offset, 'offset');\n\t  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n\t    boundsError(offset, buf.length - (byteLength + 1));\n\t  }\n\t}\n\n\tfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n\t  if (value > max || value < min) {\n\t    const n = typeof min === 'bigint' ? 'n' : '';\n\t    let range;\n\t    if (byteLength > 3) {\n\t      if (min === 0 || min === BigInt(0)) {\n\t        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`;\n\t      } else {\n\t        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n\t                `${(byteLength + 1) * 8 - 1}${n}`;\n\t      }\n\t    } else {\n\t      range = `>= ${min}${n} and <= ${max}${n}`;\n\t    }\n\t    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n\t  }\n\t  checkBounds(buf, offset, byteLength);\n\t}\n\n\tfunction validateNumber (value, name) {\n\t  if (typeof value !== 'number') {\n\t    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n\t  }\n\t}\n\n\tfunction boundsError (value, length, type) {\n\t  if (Math.floor(value) !== value) {\n\t    validateNumber(value, type);\n\t    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n\t  }\n\n\t  if (length < 0) {\n\t    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n\t  }\n\n\t  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n\t                                    `>= ${type ? 1 : 0} and <= ${length}`,\n\t                                    value)\n\t}\n\n\t// HELPER FUNCTIONS\n\t// ================\n\n\tconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;\n\n\tfunction base64clean (str) {\n\t  // Node takes equal signs as end of the Base64 encoding\n\t  str = str.split('=')[0];\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = str.trim().replace(INVALID_BASE64_RE, '');\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '=';\n\t  }\n\t  return str\n\t}\n\n\tfunction utf8ToBytes (string, units) {\n\t  units = units || Infinity;\n\t  let codePoint;\n\t  const length = string.length;\n\t  let leadSurrogate = null;\n\t  const bytes = [];\n\n\t  for (let i = 0; i < length; ++i) {\n\t    codePoint = string.charCodeAt(i);\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint;\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t        leadSurrogate = codePoint;\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t    }\n\n\t    leadSurrogate = null;\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint);\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      );\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      );\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      );\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n\t}\n\n\tfunction asciiToBytes (str) {\n\t  const byteArray = [];\n\t  for (let i = 0; i < str.length; ++i) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF);\n\t  }\n\t  return byteArray\n\t}\n\n\tfunction utf16leToBytes (str, units) {\n\t  let c, hi, lo;\n\t  const byteArray = [];\n\t  for (let i = 0; i < str.length; ++i) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i);\n\t    hi = c >> 8;\n\t    lo = c % 256;\n\t    byteArray.push(lo);\n\t    byteArray.push(hi);\n\t  }\n\n\t  return byteArray\n\t}\n\n\tfunction base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n\t}\n\n\tfunction blitBuffer (src, dst, offset, length) {\n\t  let i;\n\t  for (i = 0; i < length; ++i) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i];\n\t  }\n\t  return i\n\t}\n\n\t// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n\t// the `instanceof` check but they should be treated as of that type.\n\t// See: https://github.com/feross/buffer/issues/166\n\tfunction isInstance (obj, type) {\n\t  return obj instanceof type ||\n\t    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n\t      obj.constructor.name === type.name)\n\t}\n\tfunction numberIsNaN (obj) {\n\t  // For IE11 support\n\t  return obj !== obj // eslint-disable-line no-self-compare\n\t}\n\n\t// Create lookup table for `toString('hex')`\n\t// See: https://github.com/feross/buffer/issues/219\n\tconst hexSliceLookupTable = (function () {\n\t  const alphabet = '0123456789abcdef';\n\t  const table = new Array(256);\n\t  for (let i = 0; i < 16; ++i) {\n\t    const i16 = i * 16;\n\t    for (let j = 0; j < 16; ++j) {\n\t      table[i16 + j] = alphabet[i] + alphabet[j];\n\t    }\n\t  }\n\t  return table\n\t})();\n\n\t// Return not function with Error if BigInt not supported\n\tfunction defineBigIntMethod (fn) {\n\t  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n\t}\n\n\tfunction BufferBigIntNotDefined () {\n\t  throw new Error('BigInt not supported')\n\t} \n} (buffer));\n\nconst Buffer = buffer.Buffer;\n\nconst Blob = buffer.Blob;\nconst BlobOptions = buffer.BlobOptions;\nconst Buffer$1 = buffer.Buffer;\nconst File = buffer.File;\nconst FileOptions = buffer.FileOptions;\nconst INSPECT_MAX_BYTES = buffer.INSPECT_MAX_BYTES;\nconst SlowBuffer = buffer.SlowBuffer;\nconst TranscodeEncoding = buffer.TranscodeEncoding;\nconst atob = buffer.atob;\nconst btoa = buffer.btoa;\nconst constants = buffer.constants;\nconst isAscii = buffer.isAscii;\nconst isUtf8 = buffer.isUtf8;\nconst kMaxLength = buffer.kMaxLength;\nconst kStringMaxLength = buffer.kStringMaxLength;\nconst resolveObjectURL = buffer.resolveObjectURL;\nconst transcode = buffer.transcode;\nexport { Blob, BlobOptions, Buffer$1 as Buffer, File, FileOptions, INSPECT_MAX_BYTES, SlowBuffer, TranscodeEncoding, atob, btoa, constants, Buffer as default, isAscii, isUtf8, kMaxLength, kStringMaxLength, resolveObjectURL, transcode };\n//# sourceMappingURL=index.js.map\n","'use strict';\nexport {};\n//Checking the crypto module\nimport crypto from 'crypto';\nexport type encrytext={\n    iv:string,\n    encryptedData:string\n}\nexport class CryptoSource {\n    private algorithm:string = 'aes-256-cbc'; //Using AES encryption\n    private key:Buffer;\n    private iv:Buffer = crypto.randomBytes(16);\n    constructor() {\n        this.algorithm = 'aes-256-cbc'; //Using AES encryption\n        const salt=\"Tus7uAT6r3eSj9gVbF7Wic3ipNczYNK1\"\n        //this.key = Buffer.from(crypto.createHash(\"sha1\").update(salt).digest().slice(0, 16));\n        this.key = Buffer.from(salt);\n        this.iv = crypto.randomBytes(16);\n        // this.key=crypto.scryptSync(salt, 'GfG', 16)\n    }\n    //Encrypting text\n    encrypt(text:string):encrytext {\n        let cipher = crypto.createCipheriv(this.algorithm, this.key, this.iv);\n        let encrypted = cipher.update(text);\n        encrypted = Buffer.concat([encrypted, cipher.final()]);\n        return { iv: this.iv.toString('hex'), encryptedData: encrypted.toString('hex') };\n    }\n    // Decrypting text\n    decrypt(text:encrytext):string {\n        let iv = Buffer.from(text.iv, 'hex');\n        let encryptedText = Buffer.from(text.encryptedData, 'hex');\n        let decipher = crypto.createDecipheriv(this.algorithm, Buffer.from(this.key), iv);\n        let decrypted = decipher.update(encryptedText);\n        decrypted = Buffer.concat([decrypted, decipher.final()]);\n        return decrypted.toString();\n    }\n}\n\n\n//Encrypting text\n// function encrypt(text) {\n//    let cipher = crypto.createCipheriv('aes-256-cbc', Buffer.from(key), iv);\n//    let encrypted = cipher.update(text);\n//    encrypted = Buffer.concat([encrypted, cipher.final()]);\n//    return { iv: iv.toString('hex'), encryptedData: encrypted.toString('hex') };\n// }\n\n// Decrypting text\n// function decrypt(text) {\n//    let iv = Buffer.from(text.iv, 'hex');\n//    let encryptedText = Buffer.from(text.encryptedData, 'hex');\n//    let decipher = crypto.createDecipheriv('aes-256-cbc', Buffer.from(key), iv);\n//    let decrypted = decipher.update(encryptedText);\n//    decrypted = Buffer.concat([decrypted, decipher.final()]);\n//    return decrypted.toString();\n// }\n//}","// const keytar = require('keytar')\n// import keytar from 'keytar'\nconst keytar = require('keytar')\n\nexport class StoreService {\n    private service:string;\n    constructor(service:string){\n        this.service=service;\n    }\n    public setPassword(account:string, password:string){\n        keytar.setPassword(this.service, account, password)\n    } \n    //get password\n    public async getPassword(account:string):Promise<string | null>{\n        return await keytar.getPassword(this.service, account)\n    }\n\n}","\"use strict\";\nexport { };\n// const keytar = require('keytar')\n// const os = require('os');\nimport Store from 'electron-store';\nimport { safeStorage } from 'electron';\nimport { CryptoSource } from './cryptosource';\nimport {StoreService} from \"@/modules/storeservice\"\n\nexport class Token {\n\n    // private keytarService = 'SocialScraper-token';\n    private store: StoreService;\n    private useSafestore: boolean;\n\n    constructor() {\n        let option = {\n            encryptionKey: \"social-market-key\",//对配置文件进行加密\n            clearInvalidConfig: true, // 发生 SyntaxError  则清空配置,\n        }\n\n        this.store = new StoreService(\"social-market-token\");\n        // this.useSafestore=safeStorage?.isEncryptionAvailable();  \n        this.useSafestore = false;\n    }\n    //get account name\n    // private getaccountname():string{\n    //     return os.userInfo().username;\n    // }\n    //save user token\n    public setValue(key: string, token: string): void {\n        // console.log(\"encrypt token \"+token)\n        // console.log(safeStorage)\n        if (this.useSafestore) {\n            const buffer = safeStorage.encryptString(token);\n            // this.store.set(key, buffer.toString());\n            this.store.setPassword(key, buffer.toString());\n        } else {\n            //if system not support safe storage\n            const cryptModel = new CryptoSource();\n            const encrytoken = cryptModel.encrypt(token)\n            this.store.setPassword(key, JSON.stringify(encrytoken));\n        }\n        // keytar.setPassword(this.keytarService, this.getaccountname(), token)\n    }\n    //get user token\n    public async getValue(key: string): Promise<string|null> {\n        // console.log(\"the key is\"+key);\n        // const token=await keytar.getPassword(this.keytarService, this.getaccountname())\n        // const buffer = this.store.get(key) as string;\n        const buffer =await this.store.getPassword(key);\n        if (!buffer) {\n            return \"\";\n        }\n        if (this.useSafestore) {\n            return safeStorage.decryptString(Buffer.from(buffer))\n        } else {\n            //if system not support safe storage\n            const cryptModel = new CryptoSource();\n            return cryptModel.decrypt(JSON.parse(buffer))\n        }\n    }\n    //check encryption is available\n    public checkEncryavaile(key: string): boolean {\n        return safeStorage.isEncryptionAvailable()\n    }\n}\n\n","export type HttpClientOptions = {\n    headers?:HeadersInit;\n}\n// export type FetchOptions = {\n//     headers?: HeadersInit;\n// }\n//import { AuthInterceptor } from '@/modules/lib/authInterceptor';\nimport {Token} from \"@/modules/token\"\n// export type RemoteResp = {\n//   status: boolean,\n//   msg: string,\n//   data?: any,\n// }\nexport class HttpClient {\n    private _headers: HeadersInit = {};\n    private baseUrl: string;\n    constructor() {\n      //AuthInterceptor()\n      this.baseUrl = import.meta.env.VITE_REMOTEADD;\n      \n      // const tokenModel=new Token()\n      // const tokenval=tokenModel.getValue(\"social-market-token\")\n      // if (tokenval) {\n      //   //config.headers.Authorization = 'Bearer ' + tokenval\n      //   this.setHeader('Authorization', 'Bearer ' + tokenval)\n      // }\n    }\n\n    public async setheaderToken(){\n      const tokenModel=new Token()\n      const tokenval=await tokenModel.getValue(\"social-market-token\")\n      console.log(\"prepare to set token:\"+tokenval)\n      if (tokenval) {\n        //config.headers.Authorization = 'Bearer ' + tokenval\n        this.setHeader('Authorization', 'Bearer ' + tokenval)\n      }\n    }\n  \n    public async _fetchJSON(endpoint:string, options:RequestInit): Promise<any> {\n      await this.setheaderToken()\n      const res = await fetch(this.baseUrl+endpoint,\n        {...options,\n          headers: this._headers,\n        }\n       );\n       \n      if (!res.ok) throw new Error(res.statusText);\n  \n    //   if (options.parseResponse !== false && res.status !== 204)\n    //     return res.json();\n    const data = await res.json();\n    console.log(data)\n      return data;\n    }\n  \n    setHeader(key, value) {\n      this._headers[key] = value;\n      return this;\n    }\n  \n    getHeader(key) {\n      return this._headers[key];\n    }\n  \n    setBasicAuth(username, password) {\n      this._headers['Authorization'] = `Basic ${btoa(`${username}:${password}`)}`;\n      return this;\n    }\n  \n    setBearerAuth(token) {\n      this._headers['Authorization'] = `Bearer ${token}`;\n      return this;\n    }\n  \n    public async get(endpoint:string, options = {}): Promise<any> {\n      // const body = new URLSearchParams(params).toString();  \n      console.log(this._headers)\n      return this._fetchJSON(endpoint, {\n        ...options,\n        method: \"GET\",\n        // headers: this._headers,\n      });\n    }\n  \n    public async post(endpoint:string, formData:FormData, options = {}): Promise<any>{\n        // const body=new URLSearchParams(formData)\n        // const body=formData\n        // var requestOptions = {\n        //   method: 'POST',\n        //   headers: this._headers,\n        //   body: formData,\n          \n        // };\n        // return fetch(\"http://localhost:8082/user/login\", requestOptions)\n        // .then(response => {return response.json()})\n        // const postheader={'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}\n        // let mergedhead = {...this._headers, ...postheader};\n        return this._fetchJSON(endpoint, {\n        ...options,\n        // headers: this._headers,\n        body: formData,\n        method: \"POST\"\n      });\n    }\n  \n    public async put(endpoint:string, data): Promise<any> {\n        return this._fetchJSON(endpoint, {\n        // headers: this._headers,\n        body: data ? JSON.stringify(data) : undefined,\n        method: \"PUT\"\n      });\n    }\n  \n    public async patch(endpoint:string, operations, options = {}): Promise<any> {\n      return this._fetchJSON(endpoint, {\n        ...options,\n        body: JSON.stringify(operations),\n        method: \"PATCH\",\n        // headers: this._headers,\n      });\n    }\n  \n    public async delete(endpoint:string, options = {}) {\n      return this._fetchJSON(endpoint, {\n        ...options,\n        method: \"DELETE\",\n        // headers: this._headers,\n      });\n    }\n  }\n  \n  export default HttpClient;","function e(e){this.message=e}e.prototype=new Error,e.prototype.name=\"InvalidCharacterError\";var r=\"undefined\"!=typeof window&&window.atob&&window.atob.bind(window)||function(r){var t=String(r).replace(/=+$/,\"\");if(t.length%4==1)throw new e(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var n,o,a=0,i=0,c=\"\";o=t.charAt(i++);~o&&(n=a%4?64*n+o:o,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(o);return c};function t(e){var t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw\"Illegal base64url string!\"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t=\"0\"+t),\"%\"+t})))}(t)}catch(e){return r(t)}}function n(e){this.message=e}function o(e,r){if(\"string\"!=typeof e)throw new n(\"Invalid token specified\");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(t(e.split(\".\")[o]))}catch(e){throw new n(\"Invalid token specified: \"+e.message)}}n.prototype=new Error,n.prototype.name=\"InvalidTokenError\";export default o;export{n as InvalidTokenError};\n//# sourceMappingURL=jwt-decode.esm.js.map\n","export { };\n// import axios from \"axios\";\n//import request from \"@/modules/lib/request\"\nimport { HttpClient } from \"@/modules/lib/httpclient\"\nimport jwt_decode from \"jwt-decode\";\nimport { Token } from \"./token\"\n// import { decode } from \"punycode\";\nconst debug = require('debug')('RemoteSource');\n// const url = require(\"url\");\n// const FormData = require('form-data');\ntype sosetting = {\n  sotype: string;\n  socialuser: string;\n  socialpass: string;\n  proxy: {\n    proxy: string;\n    user: string;\n    pass: string;\n  },\n}\nexport type Linkdata = {\n  id?: number,\n  title: string,\n  url: string,\n  content?: string,\n  lang: string,\n  socialtask_id: number,\n}\n\nexport type socialTask = {\n  id: number,\n  campaign_id: number,\n  campaign_name: string,\n  tag: string,\n  type: string,\n  keywords: Array<string>,\n  extra_task_info: {\n    TaskId: number\n    ResulttaskId?: number\n  }\n}\ntype configType = {\n  REMOTEADD: string,\n  REMOTEUSERNAME: string,\n  REMOTEPASSWORD: string,\n}\ntype keywordItem = {\n  keyword: string,\n  tag: string,\n  Created: string,\n  UsedTime: number,\n}\nexport type jwtUser = {\n  account_id: number,\n  email: string,\n  // token:string\n  roles: Array<string>,\n}\ntype jwtTokenUser = {\n  AccountId: number,\n  Email: string,\n  exp?: number,\n  iat?: number,\n  iss?: string,\n  Roles: Array<string>,\n}\n\nexport class RemoteSource {\n  private tokenname: string = \"social-market-token\";\n  // private static instance: RemoteSource;\n  REMOTEADD: string;\n  // REMOTEUSERNAME: string;\n  // REMOTEPASSWORD: string;\n  // private _Token:string;\n  private _httpClient: HttpClient\n  constructor() {\n\n    this._httpClient = new HttpClient();\n    // const config = this.readenv();\n    // this.REMOTEADD = config.REMOTEADD;\n    // this.tokenname=\"social-market-token\"\n    // this.REMOTEUSERNAME = config.REMOTEUSERNAME;\n    // this.REMOTEPASSWORD = config.REMOTEPASSWORD;\n  }\n\n  // public static getInstance(): RemoteSource {\n  //   if (!RemoteSource.instance) {\n  //     RemoteSource.instance = new RemoteSource();\n  //   }\n  //   return RemoteSource.instance;\n  // }\n\n\n  // readenv(): configType {\n  //   //read config from .env file\n  //   const envcofig = this.readConfig();\n  //   debug(envcofig)\n  //   //check key exist in object\n  //   if (!envcofig.hasOwnProperty(\"REMOTEADD\")) {\n  //     throw new Error(`REMOTEADD not found in .env file`);\n  //   }\n  //   if (!envcofig.hasOwnProperty(\"REMOTEUSERNAME\")) {\n  //     throw new Error(`USERNAME not found in .env file`);\n  //   }\n  //   if (!envcofig.hasOwnProperty(\"REMOTEPASSWORD\")) {\n  //     throw new Error(`PASSWORD not found in .env file`);\n  //   }\n  //   return envcofig as configType;\n  // }\n\n  /**\n   * read config from .env File\n   *\n   * @returns {object} config\n   * */\n  readConfig(): object {\n    const result = require(\"dotenv\").config();\n    if (result.error) {\n      throw result.error;\n    }\n    return result.parsed;\n  }\n\n  /**\n   * get response from remote servive\n   * @return object\n   */\n  async getRemoteConfig(campaignId): Promise<sosetting | void> {\n    // let envconfig = await readenv();\n\n    const sosetvar = this._httpClient.get(\n      \"/api/getsobyCam/?campaign_id=\" + campaignId\n    )\n      .then(function (res) {\n        if (res.status != 200) {\n          throw new Error(\"code not equal 200\");\n        }\n        if (!res.data.status) {\n          throw new Error(\"code not equal 200\");\n        }\n        // console.log(res.status)\n        // console.log(res.data.data.user)\n        // console.log(res.data.data.pass)\n        // console.log(res.data.data.proxy)\n        const sosetting = {\n          sotype: res.data.data.sotype,\n          socialuser: res.data.data.user,\n          socialpass: res.data.data.pass,\n          proxy: {\n            proxy: res.data.data.proxy.url,\n            user: res.data.data.proxy.user,\n            pass: res.data.data.proxy.pass,\n          },\n        };\n        return sosetting;\n      })\n      .catch(function (error) {\n        console.error(error);\n      });\n\n    return sosetvar;\n\n  }\n\n\n  /**\n   * save link to remote servive\n   */\n  async saveLinkremote(link: Linkdata): Promise<number> {\n    const FormData = require('form-data');\n    debug(link)\n    let data = new FormData();\n    data.append('title', link.title);\n    if (link.content) {\n      data.append('content', link.content);\n    }\n    data.append('url', link.url);\n    data.append('lang', link.lang);\n    if (link.socialtask_id) {\n      data.append('socialtask_id', link.socialtask_id);\n    }\n    // debug(this.REMOTEUSERNAME)\n    // debug(this.REMOTEPASSWORD)\n    const linkId = this._httpClient.post(\n      \"/api/savesolink\",\n      data\n    )\n      .then(function (res) {\n        // debug(res);\n        // console.log(res)\n        return res.data.data as number;\n      })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n    return linkId;\n  }\n  //get scrapy info list\n  async Getscrapyinfolist(taskId: number, limit: number): Promise<Array<Linkdata> | null> {\n    const linkdaarr = this._httpClient.get(\n      \"/api/getscrapeinfolist?sotaskid=\" + taskId + \"&limit=\" + limit\n    ).then(function (res) {\n      debug(res);\n      // console.log(res)\n      if (res.data.data) {\n        return res.data.data as Array<Linkdata>;\n      } else {\n        return null;\n      }\n    })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n    return linkdaarr;\n  }\n  /**\n   * get task info\n   * @param taskId \n   */\n  async Gettaskinfo(taskId: number): Promise<null | socialTask> {\n    const taskInfo = this._httpClient.get(\n      \"/api/getsocialtaskinfo?task_id=\" + taskId,\n    ).then(function (res) {\n      // debug(res);\n      // console.log(res)\n      return res.data.data as socialTask;\n    })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n    return taskInfo;\n  }\n  /**\n   * get social task keywords\n   * @param taskId \n   * @returns \n   */\n  async Gettaskkeywords(taskId: number): Promise<Array<string>> {\n    const taskInfo = this._httpClient.get(\n      \"/api/taskkeyword?task_id=\" + taskId,\n    ).then(function (res) {\n      // debug(res);\n      // console.log(res)\n      const keywords: Array<string> = [];\n      const Keyitemarr = res.data.data as Array<keywordItem>;\n      for (const item in Keyitemarr) {\n\n        keywords.push(Keyitemarr[item].keyword)\n      }\n      return keywords;\n    })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n    return taskInfo;\n  }\n  async Updateprocesstime(scropeId: number) {\n    const FormData = require('form-data');\n    const data = new FormData();\n    data.append('id', scropeId);\n\n    await this._httpClient.post(\n      \"/api/updatescrapeprotime\",\n      data,\n    ).then(function (res) {\n      // debug(res);\n      // console.log(res)\n      // return res.data.data as number;\n    })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n  }\n  //login user\n  async Login(username: string, password: string): Promise<jwtUser> {\n    // const FormData = require('form-data');\n    var data = new FormData();\n    data.append('username', username);\n    data.append('password', password);\n    console.log(Array.from(data));\n    const thisobj = this\n\n    const loginInfo = await this._httpClient.post(\n      \"/user/login\",\n      data, \n    ).then(function (res) {\n      // if (res.status != 200) {\n      //   throw new Error(res.statusText);\n      // }\n      if (!res.status) {\n        throw new Error(res.msg);\n      }\n      //decode jwt token\n      const decoded = thisobj.ValidateToken(res.data.Token);\n      if (decoded.account_id > 0) {\n        const tokenModel = new Token()\n        tokenModel.setValue(thisobj.tokenname, res.data.Token)\n      }\n      return decoded;\n      //return res.data.Token as {token:string};\n    })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n    return loginInfo;\n  }\n  //get user info use token\n  async GetUserInfo(): Promise<jwtUser | null> {\n    const tokenModel = new Token()\n    //console.log(\"token name:\"+this.tokenname)\n\n    const token = await tokenModel.getValue(this.tokenname);\n    //const thisobj=this\n    if (token == null || token.length < 1) {\n      return null;\n    }\n    console.log(\"token is:\" + token)\n\n    const loginInfo = await this._httpClient.get(\n     \"/api/user/info\",\n   ).then(function (res) {\n      // console.log(res);\n      \n      if (res.status == false) {\n        throw new Error(res.msg);\n      }\n\n      //const decoded = thisobj.ValidateToken(token);\n      return res.data;\n      //return res.data.Token as {token:string};\n    })\n      .catch(function (error) {\n        // console.log(error);\n        throw new Error(error.message);\n      });\n    return loginInfo;\n  }\n  //validate jwt token \n  public ValidateToken(token: string): jwtUser {\n    //console.log(token)\n    const decoded = jwt_decode(token) as jwtTokenUser;\n    const jwtuser: jwtUser = {\n      account_id: decoded.AccountId,\n      email: decoded.Email,\n      // token:token,\n      roles: decoded.Roles ? decoded.Roles : [],\n    }\n    return jwtuser;\n  }\n}\n\n","'use strict';\nexport { };\nimport * as fs from 'fs';\n// import { todo } from 'node:test';\nconst debug = require('debug')('videoedit');\nimport { spawn } from 'node:child_process';\nimport * as path from 'path';\n\nexport class Videoedit {\n  /**\n   * \n   * @param videoPath \n   * @param startTime \n   * @param endTime \n   */\n  async removeWatermark(videoPath: string, outputpathfile: string, insertId: number | null, callback: Function | undefined|null) {\n    //check video path exist\n    if (!fs.existsSync(videoPath)) {\n      throw new Error(\"video path not exist for the path \"+videoPath);\n    }\n    const outputpath = path.dirname(outputpathfile)\n    //check output path exist\n    if (!fs.existsSync(outputpath)) {\n      //create directory\n      fs.mkdirSync(outputpath, { recursive: true });\n    }\n    const pythonProcess = await spawn('Marketingtool', [\n      '--action', 'removeWatermark', '-f', videoPath, '-o', outputpathfile\n    ]);\n\n    pythonProcess.stdout.on('data', (data) => {\n      debug(`stdout: ${data}`);\n\n    });\n\n    pythonProcess.stderr.on('data', (data) => {\n      debug(`stderr: ${data}`);\n    });\n\n    pythonProcess.on('close', (code) => {\n      debug(`watermark remove child process exited with code ${code}`);\n\n      if (callback && (code == 0)) {\n        debug(\"run callback\")\n        callback(insertId, outputpathfile);\n      } else {\n        //fileter watermark failuer, try to convert the \n        //const convertPath=path.dirname(videoPath)+path.sep+'convert_'+Math.random().toString(16).slice(2)+\".mp4\"\n        const convername = '_convert'\n        if (videoPath.includes(convername)) {\n          //the video has been converted, not need to try again\n          return;\n        } else {\n          debug(\"start convert video\")\n          const convertPath = path.dirname(videoPath) + path.sep + path.parse(videoPath).name +convername+'.mp4'\n          this.convertvideo(videoPath,convertPath,()=>this.removeWatermark(convertPath,outputpathfile,insertId,callback));\n          \n        }\n        // fs.access(convertPath, fs.constants.F_OK, (err) => {\n        //   if (err) {\n        //     debug(\"start convert video\")\n        //     this.convertvideo(videoPath,convertPath);\n        //     this.removeWatermark(convertPath,outputpathfile,insertId,callback)\n        //     return;\n        //   }\n        //   debug('File exists not need convert');\n        //   console.log(\"remove watermark failuer\")\n        // });\n\n      }\n    });\n\n    // const result = pythonProcess.stdout;\n    // // const error = pythonProcess.stderr?.toString()?.trim();\n    // const error = pythonProcess.stderr;\n    // console.log(result)\n    // debug(result)\n    // //check command run success \n    // if(error){\n    //   throw new Error(error)\n    // }\n  }\n  /**\n   * get video captions\n   */\n  async getVideocaptions(videoPath: string, outputPath: string, sourcelang: string, targetlang: string) {\n    if (!fs.existsSync(videoPath)) {\n      throw new Error(\"video path not exist\");\n    }\n    const pythonProcess = await spawn('Marketingtool', [\n      '--action',\n      'translate',\n      '-f', videoPath,\n      '--source-lang', sourcelang,\n      '--target-lang', targetlang\n    ]);\n\n    // const result = pythonProcess.stdout?.toString()?.trim();\n    // const error = pythonProcess.stderr?.toString()?.trim();\n    // debug(result)\n    // if(error){\n    //   throw new Error(error)\n    // }\n  }\n\n  async convertvideo(videoPath: string, outputpathfile: string,callback:Function|undefined) {\n    if (!fs.existsSync(videoPath)) {\n      throw new Error(\"video path not exist\");\n    }\n    //try {\n      const pythonProcess = await spawn('Marketingtool', [\n        '--action',\n        'convertvideo',\n        '-f', videoPath,\n        '-o', outputpathfile,\n      ]);\n    // } catch (error) {\n    //   debug(error)\n    //   throw new Error(error)\n    // }\n    pythonProcess.on('close', (code) => {\n      debug(`convert video child process exited with code ${code}`);\n      if(code!=1){\n        debug(\"convert command failure: Marketingtool --action convertvideo -f \"+videoPath+\" -o \"+outputpathfile )\n      }\n      if(callback&& (code == 0)){\n        callback;\n      }\n    });\n\n  }\n\n\n}\n","import { Scraperdb } from \"./scraperdb\";\nimport { Database } from \"sqlite3\";\nimport { VideoInfo } from \"@/modules/social_scraper\";\nimport {getRecorddatetime} from \"@/modules/lib/function\";\n\nexport class Videodb {\n  db: Database;\n  videoTable = \"video\";\n  videoDescriptionTable = \"video_description\";\n  language: Array<{ id: number; name: string }> = [\n    { id: 1, name: \"en-us\" },\n    { id: 2, name: \"zh-cn\" },\n  ];\n  constructor() {\n    const scraperModel = Scraperdb.getInstance();\n    this.db = scraperModel.getdb();\n  }\n\n\n  /**\n   * save video\n   * @param url string\n   */\n  saveVideo(videoinfo: VideoInfo,callback:Function|undefined|null) {\n    // saveVideo(url: string, localpath:string,title: string, description: string, language: string) {\n    let languageid = 0;\n    for (let i = 0; i < this.language.length; i++) {\n      if (this.language[i].name == videoinfo.language) {\n        languageid = this.language[i].id;\n      }\n    }\n    const date = new Date();\n    const recordtime =getRecorddatetime();\n    // const recordtime =\n    //   date.getFullYear().toString() +\n    //   \"-\" +\n    //   this.pad2(date.getMonth() + 1) +\n    //   \"-\" +\n    //   this.pad2(date.getDate()) +\n    //   \" \" +\n    //   this.pad2(date.getHours()) +\n    //   \":\" +\n    //   this.pad2(date.getMinutes()) +\n    //   \":\" +\n    //   this.pad2(date.getSeconds());\n    const sql =\n      `INSERT INTO ` +\n      this.videoTable +\n      ` (url,localpath,record_time) VALUES (?,?,?)`;\n    const component = this;\n    this.db.run(\n      sql,\n      [videoinfo.url, videoinfo.localpath, recordtime],\n      function (err) {\n        if (err) {\n          throw new Error(\n            err.message + \" url:\" + videoinfo.url + \" recordtime:\" + recordtime\n          );\n        }\n        if (this.lastID) {\n          const sql =\n            `INSERT INTO ` +\n            component.videoDescriptionTable +\n            ` (video_id,language_id,title,description) VALUES (?,?,?,?)`;\n          component.db.run(\n            sql,\n            [this.lastID, languageid, videoinfo.title, videoinfo.description],\n            function (err) {\n              if (err) {\n                throw new Error(err.message);\n              }\n            }\n          );\n          if(callback){\n            callback(this.lastID)\n          }\n        }    \n      }\n    );\n    \n    // this.db.close();\n  }\n  /**\n   * update the video path which watermark has been remove\n   */\n  updateVideofilter(videoId: number, filterpath: string) {\n    const sql =\n      `UPDATE ` + this.videoTable + ` SET filterwatermark = ? WHERE id = ?`;\n    this.db.run(sql, [filterpath, videoId], function (err) {\n      if (err) {\n        throw new Error(err.message);\n      }\n    });\n  }\n  truncatedb() {\n    const sql = `DELETE FROM ` + this.videoTable;\n    this.db.run(sql, [], function (err) {\n      if (err) {\n        throw new Error(err.message);\n      }\n    });\n    const videoscsql = `DELETE FROM ` + this.videoDescriptionTable;\n    this.db.run(videoscsql, [], function (err) {\n      if (err) {\n        throw new Error(err.message);\n      }\n    });\n\n    // this.db.close();\n  }\n}\n","'use strict';\nexport { };\nimport {Observer} from './subject';\nimport {ScrapeVideo} from './social_scraper';\n// import {Scraperdb} from \"../model/scraperdb\";\nimport {RemoteSource} from \"./remotesource\";\nimport {Videoedit} from \"./videoedit\";\nconst debug = require(\"debug\")(\"Observer:videodownloadObserver\");\nconst appRoot = require('app-root-path');\nimport * as path from \"path\";\nimport {Videodb} from \"@/model/videodb\";\n\nexport class videodownloadObserver implements Observer{\n    constructor() {\n    }\n    update(type:string,data:any){\n        switch(type){\n            case 'downloadvideoend':\n                this.videodownloadend(data as ScrapeVideo);\n                break;\n            default:\n                break;\n        }\n    }\n    videodownloadend(data:ScrapeVideo){\n        debug(data);\n        //save data to video db\n        // const scraperDb = Scraperdb.getInstance(); \n        const videoDb=new Videodb();\n        const vemodel=new Videoedit();\n        const outputpath=path.resolve(appRoot+\"/tmp/video/filterwater/\")\n        const outputpathfilename=outputpath+path.sep+Math.random().toString(16).slice(2)+\".mp4\"\n        //save video data to db\n        videoDb.saveVideo(data.video,(insertId) =>vemodel.removeWatermark(data.video.localpath,outputpathfilename,insertId,function updatevidedata(insertId:number,outputpathfilename:string){\n            const videoDbs=new Videodb();\n            debug(\"start to update video filter, the insert id is \"+insertId+\" the output path is \"+outputpathfilename)\n            videoDbs.updateVideofilter(insertId,outputpathfilename)\n        }))\n        //update remote data\n        const remoteSourmodel = new RemoteSource();\n        if(data.scrapeinfo.id){\n        remoteSourmodel.Updateprocesstime(data.scrapeinfo.id);     \n        }\n    }\n    }","const { Browser } = require('puppeteer-cluster/dist/concurrency/builtInConcurrency');\nconst debug = require('debug')('se-scraper:CustomConcurrency');\nconst { timeoutExecute } = require('puppeteer-cluster/dist/util');\n\nconst BROWSER_TIMEOUT = 5000;\n\nexport class CustomConcurrency extends Browser {\n\n    async init() {}\n    async close() {}\n\n    async workerInstance() {\n        const options = this.options.perBrowserOptions.shift();\n        debug('Launch puppeteer instance with options=%o', options);\n        let chrome = await this.puppeteer.launch(options);\n        let page;\n        let context;\n\n        return {\n            jobInstance: async () => {\n                await timeoutExecute(BROWSER_TIMEOUT, (async () => {\n                    context = await chrome.createIncognitoBrowserContext();\n                    page = await context.newPage();\n                    //page = await context.Page();\n                })());\n\n                return {\n                    resources: {\n                        page,\n                    },\n\n                    close: async () => {\n                        await timeoutExecute(BROWSER_TIMEOUT, context.close());\n                    },\n                };\n            },\n\n            close: async () => {\n                await chrome.close();\n            },\n\n            repair: async () => {\n                debug('Starting repair');\n                try {\n                    // will probably fail, but just in case the repair was not necessary\n                    await chrome.close();\n                } catch (e) {\n                    debug('Failed to close chrome: %o', e);\n                }\n\n                // just relaunch as there is only one page per browser\n                chrome = await this.puppeteer.launch(options);\n            },\n        };\n    }\n}\n\n// module.exports = CustomConcurrency;","\"use strict\";\n// Use TypeScript modules https://stackoverflow.com/questions/35758584/cannot-redeclare-block-scoped-variable\nexport { };\nconst fs = require(\"fs\");\nconst os = require(\"os\");\nconst _ = require(\"lodash\");\nconst { createLogger, format, transports } = require(\"winston\");\nconst { combine, timestamp, printf } = format;\nconst debug = require(\"debug\")(\"se-scraper:ScrapeManager\");\nconst { Cluster } = require(\"puppeteer-cluster\");\nconst vanillaPuppeteer = require(\"puppeteer\");\nconst { addExtra } = require(\"puppeteer-extra\");\n// const Stealth = require(\"puppeteer-extra-plugin-stealth\");\n// const AdblockerPlugin = require(\"puppeteer-extra-plugin-adblocker\");\n\nconst UserAgent = require(\"user-agents\");\nimport { FacebookScraper } from \"@/modules/facebook_scraper\";\nimport { YoutubeScraper } from \"@/modules/youtube_scraper\";\nimport { BilibiliScraper } from \"@/modules/bilibili_scraper\";\nimport { SocialScraper, WosearchObj } from \"@/modules/social_scraper\"\nimport { Page } from 'puppeteer';\nimport { Linkdata } from '@/modules/remotesource';\nimport { videodownloadObserver } from '@/modules/videodownload_observer';\n\n// const bing = require('./modules/bing.js');\n// const yandex = require('./modules/yandex.js');\n// const infospace = require('./modules/infospace.js');\n// const duckduckgo = require('./modules/duckduckgo.js');\nimport { CustomConcurrency as CustomConcurrencyImpl } from \"@/concurrency-implementation\";\nimport { ScrapeOptions } from \"@/modules/social_scraper\";\n// const axios = require(\"axios\");\nconst MAX_ALLOWED_BROWSERS = 6;\n// const puppeteer = require(\"puppeteer-extra\");\n// const _StealthPlugin = require('puppeteer-extra-plugin-stealth');\n// const _AdblockerPlugin = require('puppeteer-extra-plugin-adblocker');\n// export type getScraperconfig={\n//   config:SMconfig,\n//   context:object,\n//   pluggable:object,\n//   page:Page,\n//   tmppath:string\n\n// }\n\nfunction write_results(fname, data) {\n  fs.writeFileSync(fname, data, (err) => {\n    if (err) throw err;\n    console.log(`Results written to file ${fname}`);\n  });\n}\n\nfunction read_keywords_from_file(fname) {\n  let kws = fs.readFileSync(fname).toString().split(os.EOL);\n  // clean keywords\n  kws = kws.filter((kw) => {\n    return kw.trim().length > 0;\n  });\n  return kws;\n}\n\n\nfunction getScraper(search_engine: string, args: ScrapeOptions): SocialScraper {\n  if (typeof search_engine === \"string\") {\n    return new {\n      facebook: FacebookScraper,\n      youtube: YoutubeScraper,\n      bilibili: BilibiliScraper,\n    }[search_engine](args);\n  }\n  // else if (typeof search_engine === \"function\") {\n  //   return new search_engine(args);\n  // } \n  else {\n    throw new Error(\n      `social platform must either be a string of class (function)`\n    );\n  }\n}\nexport type SMconfig = {\n  logger: { info: Function, error: Function };\n  keywords: Array<string>;\n  proxies: Array<string>;\n  keyword_file: string;\n  proxy_file: string;\n  use_proxies_only: boolean;\n  custom_func: string;\n  chrome_flags: Array<string>;\n  puppeteer_cluster_config: {\n    maxConcurrency: number;\n    monitor: boolean;\n    timeout: number;\n  }\n  random_user_agent: boolean;\n  user_agent: string;\n  headless: boolean;\n  platform: string;\n  apply_evasion_techniques?: boolean;\n  block_assets?: boolean;\n  test_evasion?: boolean;\n  log_http_headers?: boolean;\n  log_ip_address?: boolean;\n}\nexport type SMstruct = {\n  // the user agent to scrape with\n  user_agent: string,\n  // if random_user_agent is set to True, a random user agent is chosen\n  random_user_agent: boolean,\n  // whether to start the browser in headless mode\n  // headless: false,\n  // whether debug information should be printed\n  // level 0: print nothing\n  // level 1: print most important info\n  // ...\n  // level 4: print all shit nobody wants to know\n  debug_level: number,\n  // specify flags passed to chrome here\n  chrome_flags: Array<string>,\n  // path to js module that extends functionality\n  // this module should export the functions:\n  // get_browser, handle_metadata, close_browser\n  // must be an absolute path to the module\n  //custom_func: resolve('examples/pluggable.js'),\n  custom_func: string,\n  // use a proxy for all connections\n  // example: 'socks5://78.94.172.42:1080'\n  // example: 'http://118.174.233.10:48400'\n  proxy: string,\n  // a file with one proxy per line. Example:\n  // socks5://78.94.172.42:1080\n  // http://118.174.233.10:48400\n  proxy_file: string,\n  use_cluster: boolean,\n  puppeteer_cluster_config: {\n    timeout: number, // max timeout set to 10 minutes\n    monitor: boolean,\n    concurrency: number, // one scraper per tab\n    maxConcurrency: number, // scrape with 1 tab\n  },\n  sleep_range?: Array<number>,\n  taskid?: number,\n  taskrunId?: number\n}\nexport class ScrapeManager {\n  cluster: { execute: Function; idle: Function; close: Function };\n  pluggable: { start_browser?: Function, close_browser?: Function, handle_results?: Function, handle_metadata?: Function };\n  scraper: SocialScraper;\n  context: object;\n  config: SMconfig;\n  logger: { info: Function };\n  browser: { newPage: Function };\n  page: Page;\n  numClusters: number;\n  tmppath: string;\n  runLogin: Function;\n  taskid?: number;\n  taskrunId?: number;\n  constructor(config: SMstruct, context = {}) {\n    // this.cluster = null;\n    // this.pluggable = null;\n    // this.scraper = null;\n    this.context = context;\n\n    // await this.getRemoteConfig(campaignId)\n\n    this.config = _.defaults(config, {\n      // remote_add:endcofig.REMOTEADD,\n      // remote_username:endcofig.USERNAME,\n      // remote_password:endcofig.PASSWORD,\n      // the user agent to scrape with\n      user_agent:\n        \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\",\n      // if random_user_agent is set to True, a random user agent is chosen\n      random_user_agent: false,\n      // whether to select manual settings in visible mode\n      set_manual_settings: false,\n      // log ip address data\n      log_ip_address: false,\n      // log http headers\n      log_http_headers: false,\n      // how long to sleep between requests. a random sleep interval within the range [a,b]\n      // is drawn before every request. empty string for no sleeping.\n      sleep_range: null,\n\n      logger: createLogger({\n        level: \"info\",\n        format: combine(\n          timestamp(),\n          printf(({ level, message, timestamp }) => {\n            return `${timestamp} [${level}] ${message}`;\n          })\n        ),\n        transports: [new transports.Console()],\n      }),\n      // platform: \"facebook\",\n      // keywords: [\"nodejs rocks\"],\n      // whether to start the browser in headless mode\n      // headless: true,\n      // specify flags passed to chrome here\n      // About our defaults values https://peter.sh/experiments/chromium-command-line-switches/\n      chrome_flags: [\n        \"--disable-infobars\",\n        \"--window-position=0,0\",\n        \"--ignore-certifcate-errors\",\n        \"--ignore-certifcate-errors-spki-list\",\n        \"--no-sandbox\",\n        \"--disable-setuid-sandbox\",\n        \"--disable-dev-shm-usage\",\n        \"--disable-accelerated-2d-canvas\",\n        \"--disable-gpu\",\n        \"--window-size=1280,768\",\n        \"--start-fullscreen\",\n        \"--hide-scrollbars\",\n        \"--disable-notifications\",\n      ],\n      //fix google account can not login\n      ignoreDefaultArgs: [\n        \"--enable-automation\",\n        \"--disable-extensions\",\n        \"--disable-default-apps\",\n        \"--disable-component-extensions-with-background-pages\",\n      ],\n      // the number of pages to scrape for each keyword\n      num_pages: 1,\n      // path to output file, data will be stored in JSON\n      output_file: \"\",\n      // whether to also passthru all the html output of the serp pages\n      html_output: false,\n      // whether to strip JS and CSS from the html_output\n      // has only an effect if `html_output` is true\n      clean_html_output: true,\n      // remove all data images from the html\n      clean_data_images: true,\n      // whether to return a screenshot of serp pages as b64 data\n      screen_output: false,\n      // Scrape url from local file. Mainly used for testing.\n      scrape_from_file: \"\",\n      // whether to prevent images, css, fonts and media from being loaded\n      // will speed up scraping a great deal\n      block_assets: true,\n      // path to js module that extends functionality\n      // this module should export the functions:\n      // get_browser, handle_metadata, close_browser\n      //custom_func: resolve('examples/pluggable.js'),\n      custom_func: null,\n      throw_on_detection: false,\n      // List of proxies to use ['socks5://78.94.172.42:1080', 'http://localhost:1080']\n      proxies: null,\n      // a file with one proxy per line. Example:\n      // socks5://78.94.172.42:1080\n      // http://118.174.233.10:48400\n      proxy_file: \"\",\n      // whether to use proxies only\n      // when this is set to true, se-scraper will not use\n      // your default IP address\n      use_proxies_only: false,\n      // check if headless chrome escapes common detection techniques\n      // this is a quick test and should be used for debugging\n      test_evasion: false,\n      apply_evasion_techniques: true,\n      // settings for puppeteer-cluster\n      puppeteer_cluster_config: {\n        timeout: 30 * 60 * 1000, // max timeout set to 30 minutes\n        monitor: false,\n        concurrency: Cluster.CONCURRENCY_BROWSER,\n        maxConcurrency: 1,\n      },\n    });\n\n    this.logger = this.config.logger;\n\n    if (config.sleep_range) {\n      // parse an array\n      // config.sleep_range = eval(config.sleep_range);\n\n      if (\n        config.sleep_range.length !== 2\n      ) {\n        throw \"sleep_range is not a valid array of two integers.\";\n      }\n    }\n\n    if (fs.existsSync(this.config.keyword_file)) {\n      this.config.keywords = read_keywords_from_file(this.config.keyword_file);\n    }\n\n    if (this.config.proxies && this.config.proxy_file) {\n      throw new Error(\n        \"Either use a proxy_file or specify a proxy for all connections. Do not use both options.\"\n      );\n    }\n\n    if (this.config.proxy_file) {\n      this.config.proxies = read_keywords_from_file(this.config.proxy_file);\n      this.logger.info(`${this.config.proxies.length} proxies read from file.`);\n    }\n\n    if (!this.config.proxies && this.config.use_proxies_only) {\n      throw new Error(\n        \"Must provide at least one proxy in proxies if you enable use_proxies_only\"\n      );\n    }\n\n    debug(\"this.config=%O\", this.config);\n    //defind task id and task run id\n    if (config.taskid) {\n      this.taskid = config.taskid;\n    }\n    if (config.taskrunId) {\n      this.taskrunId = config.taskrunId;\n    }\n  }\n\n  /*\n   * Launches the puppeteer cluster or browser.\n   *\n   * Returns true if the browser was successfully launched. Otherwise will return false.\n   */\n  async start() {\n    if (this.config.custom_func) {\n      if (fs.existsSync(this.config.custom_func)) {\n        try {\n          const PluggableClass = require(this.config.custom_func);\n          this.pluggable = new PluggableClass({\n            config: this.config,\n            context: this.context,\n          });\n        } catch (exception) {\n          console.error(exception);\n          return false;\n        }\n      } else {\n        console.error(`File \"${this.config.custom_func}\" does not exist!`);\n        return false;\n      }\n    }\n\n    const chrome_flags = _.clone(this.config.chrome_flags);\n\n    if (this.pluggable && this.pluggable.start_browser) {\n      // launch_args.config = this.config;\n      this.browser = await this.pluggable.start_browser({\n        config: this.config,\n      });\n      // console.log(\"229\")\n      this.page = await this.browser.newPage();\n    } else {\n\n      // if no custom start_browser functionality was given\n      // use puppeteer-cluster for scraping\n\n      let proxies;\n      // if we have at least one proxy, always use CONCURRENCY_BROWSER\n      // and set maxConcurrency to this.config.proxies.length + 1\n      // else use whatever this.configuration was passed\n      if (this.config.proxies && this.config.proxies.length > 0) {\n        // because we use real browsers, we ran out of memory on normal laptops\n        // when using more than maybe 5 or 6 browsers.\n        // therefore hardcode a limit here\n        // TODO not sure this what we want\n        this.numClusters = Math.min(\n          this.config.proxies.length + (this.config.use_proxies_only ? 0 : 1),\n          MAX_ALLOWED_BROWSERS\n        );\n        proxies = _.clone(this.config.proxies);\n\n        // Insert a first config without proxy if use_proxy_only is false\n        if (this.config.use_proxies_only === false) {\n          proxies.unshift(null);\n        }\n      } else {\n        this.numClusters = this.config.puppeteer_cluster_config.maxConcurrency;\n        proxies = _.times(this.numClusters, null);\n      }\n\n      this.logger.info(`Using ${this.numClusters} clusters.`);\n\n      // Give the per browser options\n      const perBrowserOptions = _.map(proxies, (proxy) => {\n        const userAgent = this.config.random_user_agent\n          ? new UserAgent({ deviceCategory: \"desktop\" }).toString()\n          : this.config.user_agent;\n        let args = chrome_flags.concat([`--user-agent=${userAgent}`]);\n\n        if (proxy) {\n          args = args.concat([`--proxy-server=${proxy}`]);\n        }\n\n        return {\n          headless: this.config.headless,\n          ignoreHTTPSErrors: true,\n          args,\n        };\n      });\n\n      debug(\"perBrowserOptions=%O\", perBrowserOptions);\n\n      // puppeteer.use(_StealthPlugin());\n      // puppeteer.use(_AdblockerPlugin());\n\n      const puppeteer = addExtra(vanillaPuppeteer);\n\n      // Add stealth plugin and use defaults (all tricks to hide puppeteer usage)\n      //  puppeteer.use(Stealth());\n\n      // Add adblocker plugin to block all ads and trackers (saves bandwidth)\n      // puppeteer.use(AdblockerPlugin({ blockTrackers: true }));\n\n      this.cluster = await Cluster.launch({\n        puppeteer,\n        monitor: this.config.puppeteer_cluster_config.monitor,\n        timeout: this.config.puppeteer_cluster_config.timeout, // max timeout set to 30 minutes\n        concurrency: CustomConcurrencyImpl,\n        maxConcurrency: this.numClusters,\n        puppeteerOptions: {\n          // puppeteer:puppeteer,\n          perBrowserOptions: perBrowserOptions,\n        },\n      });\n    }\n  }\n\n  /*\n   * login the socila media platform\n   */\n  async login(scrape_config = {}) {\n    Object.assign(this.config, scrape_config);\n\n    // var results = {};\n    // var num_requests = 0;\n    // var metadata = {};\n    // var startTime = Date.now();\n\n    if (this.pluggable && this.pluggable.start_browser) {\n      // console.log(this.config.platform)\n      this.scraper = getScraper(this.config.platform, {\n        config: this.config,\n        context: this.context,\n        pluggable: this.pluggable,\n        page: this.page,\n        // tmppath: this.tmppath,\n      });\n\n      await this.scraper.runLogin({ page: this.page });\n    } else {\n      // Each browser will get N/(K+1) keywords and will issue N/(K+1) * M total requests to the search engine.\n      // https://github.com/GoogleChrome/puppeteer/issues/678\n      // The question is: Is it possible to set proxies per Page? Per Browser?\n      // as far as I can see, puppeteer cluster uses the same puppeteerOptions\n      // for every browser instance. We will use our custom puppeteer-cluster version.\n      // https://www.npmjs.com/package/proxy-chain\n      // this answer looks nice: https://github.com/GoogleChrome/puppeteer/issues/678#issuecomment-389096077\n      const chunks: [][] = [];\n      for (let n = 0; n < this.numClusters; n++) {\n        chunks.push([]);\n      }\n      for (let k = 0; k < this.config.keywords.length; k++) {\n        chunks[k % this.numClusters].push(this.config.keywords[k] as never);\n      }\n\n      debug(\"chunks=%o\", chunks);\n\n      const execPromises = [];\n      for (let c = 0; c < chunks.length; c++) {\n        const config = _.clone(this.config);\n        config.keywords = chunks[c];\n\n        const obj = getScraper(this.config.platform, {\n          config: config,\n          context: {},\n          pluggable: this.pluggable,\n        });\n\n        const boundMethod = obj.runLogin.bind(obj);\n        execPromises.push(this.cluster.execute({}, boundMethod) as never);\n      }\n\n      await Promise.all(execPromises);\n\n      // Merge results and metadata per keyword\n      // for (let promiseReturn of promiseReturns) {\n      //     Object.assign(results, promiseReturn.results);\n      //     Object.assign(metadata, promiseReturn.metadata);\n      //     num_requests += promiseReturn.num_requests;\n      // }\n    }\n\n    // let timeDelta = Date.now() - startTime;\n    // let ms_per_request = timeDelta/num_requests;\n\n    // this.logger.info(`Scraper took ${timeDelta}ms to perform ${num_requests} requests.`);\n    // this.logger.info(`On average ms/request: ${ms_per_request}ms/request`);\n\n    // if (this.pluggable && this.pluggable.handle_results) {\n    //     await this.pluggable.handle_results(results);\n    // }\n\n    // metadata.elapsed_time = timeDelta.toString();\n    // metadata.ms_per_keyword = ms_per_request.toString();\n    // metadata.num_requests = num_requests;\n\n    // debug('metadata=%O', metadata);\n\n    // if (this.pluggable && this.pluggable.handle_metadata) {\n    //     await this.pluggable.handle_metadata(metadata);\n    // }\n\n    // if (this.config.output_file) {\n    //     this.logger.info(`Writing results to ${this.config.output_file}`);\n    //     write_results(this.config.output_file, JSON.stringify(results, null, 4));\n    // }\n\n    // return {\n    //     results: results,\n    //     metadata: metadata || {},\n    // };\n  }\n\n  /*\n   * get data url from platform\n   */\n  async searchdata(scrape_config = {}) {\n    Object.assign(this.config, scrape_config);\n\n    if (this.pluggable && this.pluggable.start_browser) {\n      // console.log(this.config.platform)\n      this.scraper = getScraper(this.config.platform, {\n        config: this.config,\n        context: this.context,\n        pluggable: this.pluggable,\n        page: this.page,\n        taskid: this.taskid,\n        taskrunid: this.taskrunId,\n        // taskid?: number,\n        // taskrunid?:number,\n        // tmppath: this.tmppath,\n      });\n      const searobj: WosearchObj = { page: this.page };\n      await this.scraper.workersearchdata(searobj);\n    } else {\n      // Each browser will get N/(K+1) keywords and will issue N/(K+1) * M total requests to the search engine.\n      // https://github.com/GoogleChrome/puppeteer/issues/678\n      // The question is: Is it possible to set proxies per Page? Per Browser?\n      // as far as I can see, puppeteer cluster uses the same puppeteerOptions\n      // for every browser instance. We will use our custom puppeteer-cluster version.\n      // https://www.npmjs.com/package/proxy-chain\n      // this answer looks nice: https://github.com/GoogleChrome/puppeteer/issues/678#issuecomment-389096077\n      const chunks: [][] = [];\n      for (let n = 0; n < this.numClusters; n++) {\n        chunks.push([] as never);\n      }\n      for (let k = 0; k < this.config.keywords.length; k++) {\n        chunks[k % this.numClusters].push(this.config.keywords[k] as never);\n      }\n\n      debug(\"chunks=%o\", chunks);\n\n      const execPromises = [];\n      for (let c = 0; c < chunks.length; c++) {\n        const config = _.clone(this.config);\n        config.keywords = chunks[c];\n        console.log(\"task run id is\" + config.taskrunid)\n        const obj = getScraper(this.config.platform, {\n          config: config,\n          context: {},\n          pluggable: this.pluggable,\n          taskid: config.taskid,\n          taskrunid: config.taskrunid,\n\n        });\n\n        const boundMethod = obj.workersearchdata.bind(obj);\n        execPromises.push(this.cluster.execute({}, boundMethod) as never);\n      }\n\n      await Promise.all(execPromises);\n\n      // Merge results and metadata per keyword\n      // for (let promiseReturn of promiseReturns) {\n      //     Object.assign(results, promiseReturn.results);\n      //     Object.assign(metadata, promiseReturn.metadata);\n      //     num_requests += promiseReturn.num_requests;\n      // }\n    }\n\n    // let timeDelta = Date.now() - startTime;\n    // let ms_per_request = timeDelta/num_requests;\n\n    // this.logger.info(`Scraper took ${timeDelta}ms to perform ${num_requests} requests.`);\n    // this.logger.info(`On average ms/request: ${ms_per_request}ms/request`);\n\n    // if (this.pluggable && this.pluggable.handle_results) {\n    //     await this.pluggable.handle_results(results);\n    // }\n\n    // metadata.elapsed_time = timeDelta.toString();\n    // metadata.ms_per_keyword = ms_per_request.toString();\n    // metadata.num_requests = num_requests;\n\n    // debug('metadata=%O', metadata);\n\n    // if (this.pluggable && this.pluggable.handle_metadata) {\n    //     await this.pluggable.handle_metadata(metadata);\n    // }\n\n    // if (this.config.output_file) {\n    //     this.logger.info(`Writing results to ${this.config.output_file}`);\n    //     write_results(this.config.output_file, JSON.stringify(results, null, 4));\n    // }\n\n    // return {\n    //     results: results,\n    //     metadata: metadata || {},\n    // };\n  }\n\n  /*\n   * Quit the puppeteer cluster/browser.\n   */\n  async quit() {\n    if (this.pluggable && this.pluggable.close_browser) {\n      await this.pluggable.close_browser();\n    } else {\n      await this.cluster.idle();\n      await this.cluster.close();\n    }\n  }\n  async downloadPlatomvideo(links: Array<Linkdata>) {\n    //check whether user send correct platform parameter \n    const availPlatform = [\"bilibili\"];\n    if (!availPlatform.includes(this.config.platform)) {\n      throw new Error(\"download video function not work at platform \" + this.config.platform)\n    }\n    this.scraper = getScraper(this.config.platform, {\n      config: this.config,\n      context: this.context,\n      pluggable: this.pluggable,\n      page: this.page,\n      // tmppath: this.tmppath,\n    });\n    debug(\"links=%o\", links)\n    //console.log(this.scraper)\n\n    //add observer before download video\n    const videodownObser = new videodownloadObserver();\n    this.scraper.attach(videodownObser);\n    await this.scraper.downloadvideo(links)\n\n\n  }\n}\n\n\n\nmodule.exports = {\n  ScrapeManager: ScrapeManager,\n};\n","\"use strict\";\nexport {};\n// import { debug } from \"console\";\n// import { debug } from \"console\";\nimport {ScrapeManager,SMstruct} from \"../node_socialmk\";\nimport { RemoteSource } from \"./remotesource\"\nimport {Scraperdb} from \"../model/scraperdb\";\nconst debug = require('debug')('index');\n// var Scraper = require(\"./src/modules/social_scraper\");\n\nexport type ScrapeConfig={\n  // which search engine to scrape\n  // platform: \"facebook\",\n  // an array of keywords to scrape\n  keywords?: Array<string>,\n  // the number of pages to scrape for each keyword\n  num_pages?: number,\n\n  // OPTIONAL PARAMS BELOW:\n  // google_settings: {\n  //     gl: 'us', // The gl parameter determines the Google country to use for the query.\n  //     hl: 'fr', // The hl parameter determines the Google UI language to return results.\n  //     start: 0, // Determines the results offset to use, defaults to 0.\n  //     num: 100, // Determines the number of results to show, defaults to 10. Maximum is 100.\n  // },\n  // instead of keywords you can specify a keyword_file. this overwrites the keywords array\n  keyword_file?: string,\n  // how long to sleep between requests. a random sleep interval within the range [a,b]\n  // is drawn before every request. empty string for no sleeping.\n  sleep_range?: Array<number>,\n  // path to output file, data will be stored in JSON\n  output_file?: string,\n  // whether to prevent images, css, fonts from being loaded\n  // will speed up scraping a great deal\n  block_assets: boolean,\n  // check if headless chrome escapes common detection techniques\n  // this is a quick test and should be used for debugging\n  test_evasion?: boolean,\n  apply_evasion_techniques: boolean,\n  // log ip address data\n  log_ip_address?: boolean,\n  // log http headers\n  log_http_headers?: boolean,\n  platform: string,\n  user?:string,\n  pass?: string,\n  tmppath?:string,\n  taskid?:number,\n  resulttaskid?:number,\n  taskrunid?:number\n}\nexport async function Login(browser_config:SMstruct, scrape_config:ScrapeConfig) {\n  // scrape config overwrites the browser_config\n  Object.assign(browser_config, scrape_config);\n\n  var scraper = new ScrapeManager(browser_config);\n  // var remoteConfig=await scraper.getRemoteConfig();\n  await scraper.start();\n\n  var results = await scraper.login(scrape_config);\n\n  await scraper.quit();\n\n  return results;\n}\n//get data urls\nexport async function Searchdata(browser_config:SMstruct, scrape_config:ScrapeConfig) {\n  // scrape config overwrites the browser_config\n  Object.assign(browser_config, scrape_config);\n  // debug(browser_config)\n  var scraper = new ScrapeManager(browser_config);\n  // var remoteConfig=await scraper.getRemoteConfig();\n  console.log(\"scraper task id\"+scraper.taskid)\n  await scraper.start();\n  await scraper.searchdata(scrape_config);\n\n  await scraper.quit();\n}\n/**\n * get link from remote and download video\n * @param browser_config \n * @param scrape_config \n */\nexport async function Downloadvideo(browser_config:SMstruct, scrape_config:ScrapeConfig) {\n  Object.assign(browser_config, scrape_config);\n  const scropeNum=5;\n  // var scraper = new ScrapeManager(browser_config);\n  const remoteSourmodel = new RemoteSource();\n  debug(\"result task id is \"+scrape_config.resulttaskid)\n  if(!scrape_config.resulttaskid){\n    throw new Error(\"result_taskid is null\")\n  }\n  const linklist=await remoteSourmodel.Getscrapyinfolist(scrape_config.resulttaskid,scropeNum)\n  debug(linklist)\n  if(!linklist){\n    throw new Error(\"video link list is null\")   \n  }\n  if(linklist.length<1){\n    throw new Error(\"link list is empty\")\n  }\n  var scraper = new ScrapeManager(browser_config);\n \n  scraper.downloadPlatomvideo(linklist)\n\n}\nexport async function Sqlinit(){\n  const scraperdb=Scraperdb.getInstance();\n  scraperdb.init();\n}\n\n\n","import { Database } from 'sqlite3';\nimport { Scraperdb } from \"@/model/scraperdb\";\nimport {getRecorddatetime} from \"@/modules/lib/function\";\nexport class Taskrundb {\n    db: Database;\n    taskrunTable = \"task_run\"; \n    constructor() {\n        const scraperModel = Scraperdb.getInstance();\n        this.db = scraperModel.getdb();\n    }\n\n    public saveTaskrun(taskId:number,taskrunNum:string,logfilepath:string,callback:Function|undefined|null){\n        const recordtime =getRecorddatetime();\n        const sql =\n        `INSERT INTO ` +\n        this.taskrunTable +\n        ` (task_id,taskrun_num,log_path,record_time) VALUES (?,?,?,?)`;  \n        this.db.run(    \n            sql,\n            [taskId, taskrunNum,logfilepath,recordtime],\n            function (err) {\n              if (err) {\n                throw new Error(\n                  err.message + \" taskid:\" + taskId.toString() + \" recordtime:\" + recordtime\n                );\n              }\n              if (this.lastID) {           \n                if(callback){\n                  callback(this.lastID)\n                }\n              }    \n            }\n          );\n    }\n    //get task id by task run number\n    public getTaskidbytaskrunNum(taskrunNum: string,callback:Function|undefined|null) {\n      const sql = `SELECT id,task_id FROM ` + this.taskrunTable + ` WHERE taskrun_num = ?`;\n      // let taskid: number = 0;\n      this.db.get(sql, [taskrunNum], (err, row) => {\n        if (err) {\n          throw new Error(err.message);\n        }\n        if (row) {\n          const taskid = (row as { id:number,task_id: number }).task_id;\n          const id = (row as { id:number,task_id: number }).id;\n          if(callback){\n            callback(id,taskid)\n          }\n        }\n      });\n      //return taskid;\n    }\n    //check task id and task run number exist\n    public checkTaskrunExist(taskid:number,taskrunNum:string,callback:Function|undefined|null){\n      const sql = `SELECT task_id FROM ` + this.taskrunTable + ` WHERE task_id = ? AND taskrun_num = ?`;\n      let exist: boolean = false;\n      this.db.get(sql, [taskid,taskrunNum], (err, row) => {\n        if (err) {\n          throw new Error(err.message);\n        }\n        if (row) {\n          exist = true;\n        }\n       \n          if(callback){\n            callback(exist)\n          }\n        \n      });\n      //return exist;\n    }\n\n}","'use strict'\n\nfunction oldBrowser () {\n  throw new Error('secure random number generation not supported by this browser\\nuse chrome, FireFox or Internet Explorer 11')\n}\n\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > 65536) throw new Error('requested too many random bytes')\n  // in case browserify  isn't using the Uint8Array version\n  var rawBytes = new global.Uint8Array(size)\n\n  // This will not work in older browsers.\n  // See https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    crypto.getRandomValues(rawBytes)\n  }\n  // phantomjs doesn't like a buffer being passed here\n  var bytes = new Buffer(rawBytes.buffer)\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","function Charset() {\n  this.chars = '';\n}\n\nCharset.prototype.setType = function(type) {\n  if (Array.isArray(type)) {\n    for (var i=0; i < type.length; i++) {\n      this.chars += this.getCharacters(type[i]);\n    }\n  }\n  else {\n    this.chars = this.getCharacters(type);\n  }\n}\n\nCharset.prototype.getCharacters = function(type) {\n  var chars;\n\n  var numbers     = '0123456789';\n  var charsLower  = 'abcdefghijklmnopqrstuvwxyz';\n  var charsUpper  = charsLower.toUpperCase();\n  var hexChars    = 'abcdef';\n  var binaryChars = '01';\n  var octalChars  = '01234567';\n\n  if (type === 'alphanumeric') {\n    chars = numbers + charsLower + charsUpper;\n  }\n  else if (type === 'numeric') {\n    chars = numbers;\n  }\n  else if (type === 'alphabetic') {\n    chars = charsLower + charsUpper;\n  }\n  else if (type === 'hex') {\n    chars = numbers + hexChars;\n  }\n  else if (type === 'binary') {\n    chars = binaryChars;\n  }\n  else if (type === 'octal') {\n    chars = octalChars;\n  }\n  else {\n    chars = type;\n  }\n\n  return chars;\n}\n\nCharset.prototype.removeUnreadable = function() {\n  var unreadableChars = /[0OIl]/g;\n  this.chars = this.chars.replace(unreadableChars, '');\n}\n\nCharset.prototype.setcapitalization = function(capitalization) {\n  if (capitalization === 'uppercase') {\n    this.chars = this.chars.toUpperCase();\n  }\n  else if (capitalization === 'lowercase') {\n    this.chars = this.chars.toLowerCase();\n  }\n}\n\nCharset.prototype.removeDuplicates = function() {\n  var charMap = this.chars.split('');\n  charMap = [...new Set(charMap)];\n  this.chars = charMap.join('');\n}\n\nmodule.exports = exports = Charset;\n","\"use strict\";\n\nvar randomBytes = require('randombytes');\nvar Charset = require('./charset.js');\n\n\nfunction unsafeRandomBytes(length) {\n  var stack = [];\n  for (var i = 0; i < length; i++) {\n    stack.push(Math.floor(Math.random() * 255));\n  }\n\n  return {\n    length,\n    readUInt8: function (index) {\n      return stack[index];\n    }\n  };\n}\n\nfunction safeRandomBytes(length) {\n  try {\n    return randomBytes(length);\n  } catch (e) {\n    /* React/React Native Fix + Eternal loop removed */\n    return unsafeRandomBytes(length);\n  }\n}\n\nfunction processString(buf, initialString, chars, reqLen, maxByte) {\n  var string = initialString;\n  for (var i = 0; i < buf.length && string.length < reqLen; i++) {\n    var randomByte = buf.readUInt8(i);\n    if (randomByte < maxByte) {\n      string += chars.charAt(randomByte % chars.length);\n    }\n  }\n  return string;\n}\n\nfunction getAsyncString(string, chars, length, maxByte, cb) {\n  randomBytes(length, function(err, buf) {\n    if (err) {\n      // Since it is waiting for entropy, errors are legit and we shouldn't just keep retrying\n      cb(err);\n    }\n    var generatedString = processString(buf, string, chars, length, maxByte);\n    if (generatedString.length < length) {\n      getAsyncString(generatedString, chars, length, maxByte, cb);\n    } else {\n      cb(null, generatedString);\n    }\n  })\n}\n\nexports.generate = function(options, cb) {\n  var charset = new Charset();\n\n  var length, chars, capitalization, string = '';\n\n  // Handle options\n  if (typeof options === 'object') {\n    length = typeof options.length === 'number' ? options.length : 32;\n\n    if (options.charset) {\n      charset.setType(options.charset);\n    }\n    else {\n      charset.setType('alphanumeric');\n    }\n\n    if (options.capitalization) {\n      charset.setcapitalization(options.capitalization);\n    }\n\n    if (options.readable) {\n      charset.removeUnreadable();\n    }\n\n    charset.removeDuplicates();\n  }\n  else if (typeof options === 'number') {\n    length = options;\n    charset.setType('alphanumeric');\n  }\n  else {\n    length = 32;\n    charset.setType('alphanumeric');\n  }\n\n  // Generate the string\n  var charsLen = charset.chars.length;\n  var maxByte = 256 - (256 % charsLen);\n\n  if (!cb) {\n    while (string.length < length) {\n      var buf = safeRandomBytes(Math.ceil(length * 256 / maxByte));\n      string = processString(buf, string, charset.chars, length, maxByte);\n    }\n\n    return string;\n  }\n\n  getAsyncString(string, charset.chars, length, maxByte, cb);\n\n};\n","module.exports = require(\"./lib/randomstring\");","import { getApplogpath, getdate } from \"@/modules/lib/function\"\nimport { Taskrundb } from \"@/model/taskrundb\"\n// import { v4 as uuidv4 } from 'uuid';\nimport * as randomstring from \"randomstring\";\nimport {SocialTaskRunEntity} from \"@/entity-types/socialtask-type\"\nconst path = require(\"path\");\n\n//the social task run created each time when task run\nexport class SocialTaskRun {\n    public createsocialtaskrun(socailtaskId: number,taskrunNum:string): SocialTaskRunEntity {\n        const taskrunmodel = new Taskrundb()\n        const logfile = this.getlogfile(socailtaskId)\n        const res=taskrunmodel.checkTaskrunExist(socailtaskId, taskrunNum,(res)=>{\n            if(res){\n                throw new Error(\"task run number exist\")\n            }\n        })\n        \n        // const taskrunNum = this.gentaskrunNum(socailtaskId)\n        taskrunmodel.saveTaskrun(socailtaskId, taskrunNum, logfile, null)\n        const socialtaskRun: SocialTaskRunEntity = {\n            taskId: socailtaskId,\n            taskRunNum: taskrunNum,\n            logfile: logfile\n        }\n        return socialtaskRun\n    }\n   \n\n    private getlogfile(socailtaskId: number): string {\n        const logDir = getApplogpath();\n        if (!logDir) {\n            throw new Error(\"get user home dir error\")\n        }\n        const recorddate = getdate()\n        return path.join(logDir, \"social-task-log\", recorddate, socailtaskId.toString() + \".log\");\n    }\n\n    //generate unique task run number\n    private gentaskrunNum(taskId: number): string {\n        return taskId.toString() + \":\" + randomstring.generate();\n    }\n    //get task id by task run id\n    public TaskidbytaskrunNum(taskrunNum: string,callback:Function|undefined|null) {\n        const taskrunmodel = new Taskrundb()\n        taskrunmodel.getTaskidbytaskrunNum(taskrunNum,callback)\n    }\n}\n","import url from \"url\"\n//import request from \"@/modules/lib/request\"\nimport { SocialTaskRun } from \"@/modules/socialtaskrun\"\n//import { spawn } from 'node:child_process';\n// import { Worker } from 'worker_threads';\n// const os = require(\"os\");\nimport { SocialTaskEntity, SocialTaskResponse, SocialTaskInfoResponse, SocialTaskTypeResponse, SaveSocialTaskResponse, TagResponse, SocialTaskRunEntity } from \"@/entity-types/socialtask-type\"\nimport { utilityProcess, MessageChannelMain} from \"electron\";\nimport * as path from 'path';\n// import { spawn } from 'node:child_process';\nimport * as fs from 'fs';\nimport { HttpClient } from \"@/modules/lib/httpclient\"\n// const fileLocation = path.join(__static, 'myText.txt')\nexport class SocialTask {\n    private _httpClient: HttpClient\n    //construct\n    constructor() {\n        this._httpClient=new HttpClient()\n    }\n    /**\n    * get social task from remote servive\n    */\n    async getTaskbycampagin(campaignId: number, page: number, size: number): Promise<SocialTaskResponse | null> {\n        const queryParams = new URLSearchParams({ \"campaiginId\": campaignId.toString(), \"page\": page.toString(), \"size\": size.toString() })\n        const params = new url.URLSearchParams(queryParams);\n\n        const tasklistres = await this._httpClient.get(\n            '/api/listsotask?' + params\n        ).catch(function (error) {\n            throw new Error(error.message);\n            // console.error(error);\n        })\n        if (!tasklistres) {\n            throw new Error(\"remote return social task is null\");\n        }\n        // console.log(\"campaign list is following\")\n        // console.log(campignlistres.data)\n        // const resp: SocialTaskResponse = {\n        //     status: campignlistres.data.status,\n        //     msg: campignlistres.data.msg,\n        //     data: campignlistres.data.data,\n        // }\n        return tasklistres as SocialTaskResponse\n    }\n\n    /**\n     * get social task info by task id\n     */\n    async getTaskbyid(taskId: number): Promise<SocialTaskInfoResponse | null> {\n        const queryParams = new URLSearchParams({ \"task_id\": taskId.toString() })\n        const params = new url.URLSearchParams(queryParams);\n\n        const taskinfores = await this._httpClient.get(\n            '/api/getsocialtaskinfo?' + params,\n        ).catch(function (error) {\n            throw new Error(error.message);\n            // console.error(error);\n        })\n        if (!taskinfores) {\n            throw new Error(\"remote return social task is null\");\n        }\n        // console.log(\"campaign list is following\")\n        // console.log(campignlistres.data)\n        // const resp: SocialTaskResponse = {\n        //     status: campignlistres.data.status,\n        //     msg: campignlistres.data.msg,\n        //     data: campignlistres.data.data,\n        // }\n        return taskinfores as SocialTaskInfoResponse\n    }\n    //get social task type list\n    async getTasktype(): Promise<SocialTaskTypeResponse | null> {\n        const tasktyperes = await this._httpClient.get(\n          '/api/socialtasktype',\n        ).catch(function (error) {\n            throw new Error(error.message);\n            // console.error(error);\n        })\n        if (!tasktyperes) {\n            throw new Error(\"remote return social task type is null\");\n        }\n\n        return tasktyperes as SocialTaskTypeResponse\n    }\n\n    //get tag list\n    async getTaglist(): Promise<TagResponse> {\n        const tagres = await this._httpClient.get(\n        '/api/tag',\n        ).catch(function (error) {\n            throw new Error(error.message);\n            // console.error(error);\n        })\n        if (!tagres) {\n            throw new Error(\"remote return tag is null\");\n        }\n\n        return tagres as TagResponse\n    }\n    //save social task\n    async saveSocialTask(data: SocialTaskEntity): Promise<SaveSocialTaskResponse> {\n\n\n        let formData = new FormData();\n        // Object.entries(data).forEach(([key, value]) => {\n        //     formData.append(key, String(value));\n        // });\n        if (data.id) {\n            formData.append(\"socialtask_id\", String(data.id));\n        }\n        formData.append(\"campaign_id\", String(data.campaign_id));\n        formData.append(\"task_name\", String(data.task_name));\n        formData.append(\"type_id\", String(data.type_id));\n        if (data.tag) {\n            formData.append(\"tags[]\", String(data.tag));\n        }\n        if (data.keywords) {\n            formData.append(\"keywords[]\", String(data.keywords));\n        }\n\n        const tasktyperes = await this._httpClient.post(\n           '/api/savesocialtask',\n           formData,\n        ).catch(function (error) {\n            throw new Error(error.message);\n            // console.error(error);\n        })\n        if (!tasktyperes) {\n            throw new Error(\"remote return social task type is null\");\n        }\n\n        return tasktyperes as SaveSocialTaskResponse\n    }\n\n    async createsocialtask(socailtaskId: number,taskRunNum:string): Promise<SocialTaskRunEntity> {\n        const runModel = new SocialTaskRun()\n        const socialTaskrun = runModel.createsocialtaskrun(socailtaskId,taskRunNum)\n        // const result = await this.runsocialtask(socialTaskrun)\n        return socialTaskrun\n    }\n\n    public async runsocialtask(entity: SocialTaskRunEntity,callback:Function|undefined|null) {\n        const childPath = path.join(__dirname, 'utilityCode.js')\n        if (!fs.existsSync(childPath)) {\n            throw new Error(\"child js path not exist for the path \" + childPath);\n        }\n        const { port1, port2 } = new MessageChannelMain()\n\n        const child = utilityProcess.fork(path.join(__dirname, 'utilityCode.js'), ['-a','runtask','-t',entity.taskRunNum],{stdio:\"pipe\",execArgv:[\"puppeteer-cluster:*\"]} )\n        console.log(path.join(__dirname, 'utilityCode.js'))\n        \n        // child.postMessage({ message: 'hello' }, [port1])\n        child.on(\"spawn\", () => {\n            \n            child.postMessage({ message: 'hello' }, [port1])\n        })\n        child.stdout?.on('data', (data) => {\n            console.log(`Received data chunk ${data}`)\n            if(callback){\n                callback(data.toString())\n            }\n        })\n        child.stderr?.on('data', (data) => {\n            console.log(`Received error chunk ${data}`)\n            if(callback){\n                callback(data.toString())\n            }\n        })\n        child.on(\"exit\", () => {\n            console.log(`child process exited `)\n        })\n\n        port2.on(\"message\", (e) => {\n            console.log(\"port receive:\", e.data);\n            port2.postMessage(\"I receive your messages:\")\n        })\n        port2.start()\n        child.on(\"message\", (e) => {\n            console.log(\"接收到消息了：\", e);\n        })\n\n    }\n}","import {ScrapeConfig} from \"@/modules/scrapeindex\";\nexport const default_browser_config = {\n    // the user agent to scrape with\n    user_agent:\n      \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\",\n    // if random_user_agent is set to True, a random user agent is chosen\n    random_user_agent: false,\n    // whether to start the browser in headless mode\n     headless: false,\n    // whether debug information should be printed\n    // level 0: print nothing\n    // level 1: print most important info\n    // ...\n    // level 4: print all shit nobody wants to know\n    debug_level: 1,\n    // specify flags passed to chrome here\n    chrome_flags: [],\n    // path to js module that extends functionality\n    // this module should export the functions:\n    // get_browser, handle_metadata, close_browser\n    // must be an absolute path to the module\n    //custom_func: resolve('examples/pluggable.js'),\n    custom_func: \"\",\n    // use a proxy for all connections\n    // example: 'socks5://78.94.172.42:1080'\n    // example: 'http://118.174.233.10:48400'\n    proxy: \"\",\n    // a file with one proxy per line. Example:\n    // socks5://78.94.172.42:1080\n    // http://118.174.233.10:48400\n    proxy_file: \"\",\n    use_cluster:false,\n    puppeteer_cluster_config: {\n      timeout: 10 * 60 * 1000, // max timeout set to 10 minutes\n      monitor: false,\n      concurrency: 1, // one scraper per tab\n      maxConcurrency: 1, // scrape with 1 tab\n    },\n  };\n\nexport const default_scrape_config:ScrapeConfig = {\n    // which search engine to scrape\n    // platform: \"facebook\",\n    // an array of keywords to scrape\n    // keywords: [\"cloud service test\"],\n    // the number of pages to scrape for each keyword\n    // num_pages: 1,\n  \n    // OPTIONAL PARAMS BELOW:\n    // google_settings: {\n    //     gl: 'us', // The gl parameter determines the Google country to use for the query.\n    //     hl: 'fr', // The hl parameter determines the Google UI language to return results.\n    //     start: 0, // Determines the results offset to use, defaults to 0.\n    //     num: 100, // Determines the number of results to show, defaults to 10. Maximum is 100.\n    // },\n    // instead of keywords you can specify a keyword_file. this overwrites the keywords array\n    // keyword_file: \"\",\n    // how long to sleep between requests. a random sleep interval within the range [a,b]\n    // is drawn before every request. empty string for no sleeping.\n    // sleep_range: \"\",\n    // path to output file, data will be stored in JSON\n    output_file: \"/tmp/test/test.json\",\n    // whether to prevent images, css, fonts from being loaded\n    // will speed up scraping a great deal\n    block_assets: false,\n    // check if headless chrome escapes common detection techniques\n    // this is a quick test and should be used for debugging\n    test_evasion: false,\n    apply_evasion_techniques: true,\n    // log ip address data\n    log_ip_address: false,\n    // log http headers\n    log_http_headers: false,\n    platform: \"facebook\",\n    // user: \"\",\n    // pass: \"\",\n    tmppath:\"\",\n    taskid:0,\n  };","\"use strict\";\nexport {};\nimport { HttpClient } from \"@/modules/lib/httpclient\"\nimport {KeywordResponse} from \"@/entity-types/keywords-type\"\nexport class Keyword {\n    private _httpClient: HttpClient\n    //construct               \n    constructor() {\n        this._httpClient=new HttpClient()\n    }\n    /**\n     * get keywords by tag\n     */\n    async getKeywordsbytag(tag:Array<string>): Promise<Array<string>|undefined> {\n        let formData = new FormData();\n        formData.append(\"tags[]\", String(tag));\n        const kewres = await this._httpClient.post(\n            '/api/getkeywordtag',\n            formData,\n         ).catch(function (error) {\n             throw new Error(error.message);\n             // console.error(error);\n         }).then(function (res) {\n            return res as KeywordResponse;\n         });\n        //  kewres as KeywordResponse \n            if (!kewres) {\n                throw new Error(\"remote return social task type is null\");\n            }\n        return kewres.data\n\n    }\n\n}","\"use strict\";\nexport {};\n// const se_scraper = require(\"./index\");\nimport {Login,Searchdata,Downloadvideo,ScrapeConfig,Sqlinit} from \"@/modules/scrapeindex\";\nconst { ArgumentParser } = require(\"argparse\");\nimport {RemoteSource} from \"@/modules/remotesource\";\nimport {SocialTaskRun} from \"@/modules/socialtaskrun\"\nimport {SocialTaskEntity} from \"@/entity-types/socialtask-type\"\nimport {SocialTask} from \"@/modules/socialtask\"\nimport {default_browser_config,default_scrape_config} from \"@/config/puppeteerconfig\"\n// const { version } = require(\"./package.json\");\nconst fs = require('fs');\nconst resolve = require('path').resolve;\nconst debug = require('debug')('runcli');\nimport {Keyword} from \"@/modules/keyword\"\n\n// const { data } = require(\"cheerio/lib/api/attributes.js\");\n\nconst parser = new ArgumentParser({\n  description: \"Social martketing\",\n});\n\n// parser.add_argument(\"-v\", \"--version\", { action: \"version\", version });\nparser.add_argument(\"-a\", \"--action\", {\n  help: \"Tha action you want to the program to take\",\n});\nparser.add_argument(\"-c\", \"--campaign\", {\n  help: \"Tha campaign id you want to program to take\",\n});\nparser.add_argument(\"-t\", \"--taskrunnum\", {\n  help: \"Tha task run number you want to program to take\",\n});\nparser.add_argument(\"-head\", \"--headless\", {\n    help: \"Tha task run number you want to program to take\",\n});\n\nlet parearg = parser.parse_args();\n\n// those options need to be provided on startup\n// and cannot give to se-scraper on scrape() calls\n// let browser_config = {\n//   // the user agent to scrape with\n//   user_agent:\n//     \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\",\n//   // if random_user_agent is set to True, a random user agent is chosen\n//   random_user_agent: false,\n//   // whether to start the browser in headless mode\n//    headless: false,\n//   // whether debug information should be printed\n//   // level 0: print nothing\n//   // level 1: print most important info\n//   // ...\n//   // level 4: print all shit nobody wants to know\n//   debug_level: 1,\n//   // specify flags passed to chrome here\n//   chrome_flags: [],\n//   // path to js module that extends functionality\n//   // this module should export the functions:\n//   // get_browser, handle_metadata, close_browser\n//   // must be an absolute path to the module\n//   //custom_func: resolve('examples/pluggable.js'),\n//   custom_func: \"\",\n//   // use a proxy for all connections\n//   // example: 'socks5://78.94.172.42:1080'\n//   // example: 'http://118.174.233.10:48400'\n//   proxy: \"\",\n//   // a file with one proxy per line. Example:\n//   // socks5://78.94.172.42:1080\n//   // http://118.174.233.10:48400\n//   proxy_file: \"\",\n//   use_cluster:false,\n//   puppeteer_cluster_config: {\n//     timeout: 10 * 60 * 1000, // max timeout set to 10 minutes\n//     monitor: false,\n//     concurrency: 1, // one scraper per tab\n//     maxConcurrency: 1, // scrape with 1 tab\n//   },\n// };\nlet browser_config=default_browser_config;\nlet scrape_config=default_scrape_config;\n\n// let scrape_config:ScrapeConfig = {\n//   // which search engine to scrape\n//   // platform: \"facebook\",\n//   // an array of keywords to scrape\n//   // keywords: [\"cloud service test\"],\n//   // the number of pages to scrape for each keyword\n//   // num_pages: 1,\n\n//   // OPTIONAL PARAMS BELOW:\n//   // google_settings: {\n//   //     gl: 'us', // The gl parameter determines the Google country to use for the query.\n//   //     hl: 'fr', // The hl parameter determines the Google UI language to return results.\n//   //     start: 0, // Determines the results offset to use, defaults to 0.\n//   //     num: 100, // Determines the number of results to show, defaults to 10. Maximum is 100.\n//   // },\n//   // instead of keywords you can specify a keyword_file. this overwrites the keywords array\n//   // keyword_file: \"\",\n//   // how long to sleep between requests. a random sleep interval within the range [a,b]\n//   // is drawn before every request. empty string for no sleeping.\n//   // sleep_range: \"\",\n//   // path to output file, data will be stored in JSON\n//   output_file: \"/tmp/test/test.json\",\n//   // whether to prevent images, css, fonts from being loaded\n//   // will speed up scraping a great deal\n//   block_assets: false,\n//   // check if headless chrome escapes common detection techniques\n//   // this is a quick test and should be used for debugging\n//   test_evasion: false,\n//   apply_evasion_techniques: true,\n//   // log ip address data\n//   log_ip_address: false,\n//   // log http headers\n//   log_http_headers: false,\n//   platform: \"facebook\",\n//   // user: \"\",\n//   // pass: \"\",\n//   tmppath:\"\",\n//   taskid:0,\n// };\n\nfunction get(object:Array<string>, key:string, default_value) {\n  var result = object[key];\n  return typeof result !== \"undefined\" ? result : default_value;\n}\n\nasync function runCommand(parearg) {\n  let action = get(parearg, \"action\", false);\n  if (!action) {\n    console.log(\"no parameter action been passed\");\n  }\n \n  switch (action) {\n    case \"login\":\n      login();\n      break;\n    case \"runtask\":\n      const taskrunnum = get(parearg, \"taskrunnum\", false);\n      if(!taskrunnum){\n        throw new Error(\"task run number is empty\")\n      }\n      runTask(taskrunnum)\n      break; \n    case \"sqlinit\":\n      Sqlinit();\n    break;  \n\n  }\n}\n//get campaign\n// async function getcampaign():Promise<void> {\n//   var remotesource =RemoteSource.getInstance();\n//   const campaignlist=await remotesource.getCampaignlist()\n//   debug(campaignlist)\n//   if(!campaignlist){\n//     throw new Error(\"campaignlist is undefined\");\n//   }\n//   const arrLength = campaignlist?.length ?? 0;\n//   if(arrLength==0){\n//     console.log(\"not campaign need to run\")\n//   }\n//   for (const campaign of campaignlist) {\n//     switch (campaign.type) {\n//       case \"bilibiliscrape\":\n//         scrape_config.platform=\"bilibili\"\n//         scrape_config.taskid=campaign.id\n//         scrape_config.keywords=campaign.keywords\n//         await Searchdata(browser_config, scrape_config);\n//         break;\n//       case 'bilibilidownload':\n//         scrape_config.platform=\"bilibili\"\n//         if(campaign.extra_task_info.TaskId<=0){\n//           break;\n//         }\n//         scrape_config.taskid=campaign.extra_task_info.TaskId;\n//         scrape_config.resulttaskid=campaign.extra_task_info.TaskId\n//         await Downloadvideo(browser_config, scrape_config);\n//         break;  \n//     }\n//   }  \n// }\n\nasync function runTask(taskRunNum:string):Promise<void>{\n  const socialtaskrun = new SocialTaskRun();\n  await socialtaskrun.TaskidbytaskrunNum(taskRunNum,async(taskrunid,taskId)=>{\n  console.log(taskId)\n  if(!taskId){\n    throw new Error(\"get taskid from db error\");\n  }\n  if(!taskrunid){\n    throw new Error(\"get taskrunid from db error\");\n  }\n  const socialtask=new SocialTask()\n  const taskInfoResult=await socialtask.getTaskbyid(taskId)\n  if(!taskInfoResult){\n    throw new Error(\"taskInfo is undefined\");\n  }\n  console.log(taskInfoResult)\n  // const taskArr=await remoteSourmodel.Gettaskkeywords(taskId)\n  if(!taskInfoResult.status){\n      throw new Error(taskInfoResult.msg)\n  }\n  if(!taskInfoResult.data){\n      throw new Error(\"social task data empty\");\n  }\n  const taskInfo=taskInfoResult.data as SocialTaskEntity;\n  switch (taskInfo.type_name) {\n    case \"bilibiliscrape\":\n        scrape_config.platform=\"bilibili\"\n        scrape_config.taskid=taskInfo.id\n        scrape_config.taskrunid=taskrunid\n        if(!taskInfo.keywords){\n          //try to get keywords by tag\n          const tagarr=taskInfo.tag\n          if(!tagarr){\n            throw new Error(\"both keyword and tag is undefined\");\n\n          }else{\n            const keywordModel=new Keyword()\n            const keywordarr=await keywordModel.getKeywordsbytag(tagarr)\n            if(!keywordarr){\n              throw new Error(\"get keyword by tag failure, keywordarr is undefined\");\n            }else{\n              scrape_config.keywords=keywordarr\n            }\n          }\n        }else{\n          scrape_config.keywords=taskInfo.keywords\n        }\n        if(!scrape_config.keywords){\n          throw new Error(\"can not get keywords,keywords is undefined\");\n        }\n        \n        await Searchdata(browser_config, scrape_config);\n        break;\n      case 'bilibilidownload':\n         scrape_config.platform=\"bilibili\"\n        // if(!taskInfo.extra_task_info.ResulttaskId){\n        //  throw new Error(\"ResulttaskId is undefined\");\n        // }\n        // debug(taskInfo)\n         scrape_config.taskid=taskInfo.id;\n        // scrape_config.resulttaskid=taskInfo.extra_task_info.ResulttaskId\n        // debug(scrape_config)\n         await Downloadvideo(browser_config, scrape_config);\n        break;\n  }\n  });\n  \n\n\n}\n//login to facebook\nasync function login() {\n  let campaignId = get(parearg, \"campaign\", false);\n  var remotesource =new RemoteSource();\n  let sosetting = await remotesource.getRemoteConfig(campaignId);\n  debug(sosetting)\n  if(sosetting== null||!sosetting){\n    throw new Error(\"sosetting is undefined\");\n  }\n  scrape_config.platform = sosetting.sotype;\n  scrape_config.user = sosetting.socialuser;\n  scrape_config.pass = sosetting.socialpass;\n  console.log(sosetting);\n  //create a tmp folder\n  const tmppath = resolve(\"./tmp/\" + scrape_config.platform + \"/\" + sosetting.socialuser);\n  await createPath(tmppath);\n  scrape_config.tmppath=tmppath\n\n  await Login(browser_config, scrape_config);\n}\n\nfunction createPath(path) {\n  path.split(\"/\").reduce((directories, directory) => {\n    directories += `${directory}/`;\n\n    if (!fs.existsSync(directories)) {\n      fs.mkdirSync(directories);\n    }\n\n    return directories;\n  }, \"\");\n}\n\nrunCommand(parearg);\n"],"names":["cheerio","get_ip_data","page","json","ipinfo_text","get_http_headers","headers","headers_text","debug","appRoot","_Scraperdb","__publicField","dbpath","path","fs","Database","err","videotablepath","files","file","Scraperdb","getDefaultExportFromCjs","x","browser","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","args","Item","array","noop","name","dir","browserExports","process$1","autoScroll","resolve","totalHeight","distance","timer","scrollHeight","getRecorddatetime","date","pad2","n","getdate","getUserhome","getApplogpath","appname","TaskResultdb","scraperModel","taskresult","callback","recordtime","sql","SocialScraper","options","settings","observer","observerIndex","type","data","runobj","_a","evadeChromeHeadlessDetection","req","testUrl","ipinfo","_b","_c","seachobj","workerseach","links","taskresultModel","linkItem","taskresultEntity","error","list","currentdate","datetime","videosavepath","index","videoArray","i","scrapeitem","link","videopath","newProto","FacebookScraper","Scraper","startUrl","YoutubeScraper","icon","cookies","crypto","http","https","progress","fetch","debugerror","Task","url","Downloader","videoUrl","mapping","key","value","response","result","aiddata","aid","cid","fallback","playUrl","params","sign","target","part","o","item","state","stream","proStream","percentage","downloadLink","res","sanitize","BilibiliScraper","button","searobj","searchbtn","element","subsearobg","linkres","sersearobg","serobj","keyelement","csobj","pages","searchPage","linkPage","linkmap","alinks","alink","linkobg","herf","htitle","htres","downloader","videores","filename","quality","videoQuantity","buffer","base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","extraBytes","parts","maxChunkLength","len2","ieee754","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","s","c","rt","exports","base64","ieee754$1","customInspectSymbol","Buffer","SlowBuffer","K_MAX_LENGTH","GlobalUint8Array","GlobalArrayBuffer","GlobalSharedArrayBuffer","typedArraySupport","proto","createBuffer","length","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","b","fromObject","assertSize","size","alloc","fill","encoding","checked","string","actual","fromArrayLike","arrayView","copy","byteOffset","obj","numberIsNaN","a","y","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","str","max","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","val","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","bytes","newBuf","checkOffset","ext","noAssert","mul","defineBigIntMethod","validateNumber","first","last","boundsError","lo","hi","checkInt","min","maxBytes","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","errors","E","sym","getMessage","Base","range","input","msg","received","addNumericalSeparator","checkBounds","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","CryptoSource","salt","text","cipher","encrypted","iv","encryptedText","decipher","decrypted","keytar","StoreService","service","account","password","Token","token","safeStorage","encrytoken","HttpClient","tokenval","endpoint","username","formData","operations","r","t","RemoteSource","campaignId","FormData","taskId","keywords","Keyitemarr","scropeId","thisobj","decoded","jwt_decode","Videoedit","videoPath","outputpathfile","insertId","outputpath","pythonProcess","spawn","convername","convertPath","outputPath","sourcelang","targetlang","Videodb","videoinfo","languageid","component","videoId","filterpath","videoscsql","videodownloadObserver","videoDb","vemodel","outputpathfilename","videoDbs","remoteSourmodel","Browser","timeoutExecute","BROWSER_TIMEOUT","CustomConcurrency","chrome","context","os","_","createLogger","format","transports","combine","timestamp","printf","Cluster","vanillaPuppeteer","addExtra","UserAgent","MAX_ALLOWED_BROWSERS","read_keywords_from_file","fname","kws","kw","getScraper","search_engine","ScrapeManager","config","level","message","PluggableClass","exception","chrome_flags","proxies","perBrowserOptions","proxy","userAgent","puppeteer","CustomConcurrencyImpl","scrape_config","chunks","k","execPromises","boundMethod","videodownObser","Login","browser_config","scraper","results","Searchdata","Downloadvideo","scropeNum","linklist","Sqlinit","Taskrundb","taskrunNum","logfilepath","row","taskid","id","exist","oldBrowser","global","browserModule","randomBytes","cb","rawBytes","Charset","chars","numbers","charsLower","charsUpper","hexChars","binaryChars","octalChars","unreadableChars","capitalization","charMap","module","require$$0","require$$1","unsafeRandomBytes","stack","safeRandomBytes","processString","initialString","reqLen","maxByte","randomByte","getAsyncString","generatedString","randomstring","charset","charsLen","SocialTaskRun","socailtaskId","taskrunmodel","logfile","logDir","recorddate","randomstring.generate","SocialTask","queryParams","tasklistres","taskinfores","tasktyperes","tagres","taskRunNum","entity","childPath","port1","port2","MessageChannelMain","child","utilityProcess","default_browser_config","default_scrape_config","Keyword","tag","kewres","ArgumentParser","parser","parearg","get","object","default_value","runCommand","action","login","taskrunnum","runTask","taskrunid","taskInfoResult","taskInfo","tagarr","keywordarr","remotesource","sosetting","tmppath","createPath","directories","directory"],"mappings":"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","x_google_ignoreList":[2,10,15,24,25,26,27]}